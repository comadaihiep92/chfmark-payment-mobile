function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var HomePageBannerHandler=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"getHomePageAPIData",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b={};return"home"===a&&(b.type="homepage"),fn.ajaxForm(b,"GET","/loyalty/get-user-loyalty-details")}},{key:"showAutoRenewalSection",value:function(a){!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];a&&a.is_enabled&&!a.is_user_subscribed?$(".auto-renew-toggle").css("display","flex"):(sessionStorage.setItem("auto_renew","hide"),$(".auto-renew-toggle").css("display","none"))}},{key:"handleBannerRenderCases",value:function(a,b){this.validateResponse(a)&&a.is_eligible&&(null===a.cart_loyalty?this.is_subscribed(a.is_subscribed)?this.validatesubscriberData(a.subscribed)&&(a.subscribed.is_expired?(this.renderExpiredPageBanner(a.subscribed,b),document.getElementsByName("isLoyaltyPurchased").length&&(document.getElementsByName("isLoyaltyPurchased")[0].value=!1)):this.renderSubHomePageBanner(a.subscribed,b)):this.validatesubscriberData(a.non_subscribed)&&(this.renderNonSubHomePageBanner(a,b),document.getElementsByName("isLoyaltyPurchased").length&&(document.getElementsByName("isLoyaltyPurchased")[0].value=!1)):this.renderAlreadyInCart(a.cart_loyalty,b))}},{key:"renderAlreadyInCart",value:function(a,b){if("cart"!==b){var c=document.querySelector(".".concat(b,"_loyalty_default_banner_placeholder"));c.innerHTML="<div class=\"added-to-cart-banner\">\n                                        <img src=\"/images/licious-meatopia-logo.svg\" class=\"licious_logo\" />\n                                        <div class=\"separator\"></div>\n                                        <div class=\"added-to-cart-info\">\n                                             <div class=\"top-data\">".concat(a.loyalty_title,"</div>\n                                             <div class=\"bottom-data\">").concat(a.loyalty_subtitle,"</div>\n                                        </div>\n                                    </div>"),$(".added-to-cart-banner").on("click",function(a){a.stopPropagation(),window.location.href="/customer/cart"})}}},{key:"renderNonSubHomePageBanner",value:function(a,b){if("homepage"===b||"category"===b){var c=document.querySelector(".".concat(b,"_loyalty_default_banner_placeholder"));c.innerHTML=" <div class=\"loyalty-non-member-banner-background\">  \n                                    <div class=\"top-content\">\n                                        <img src=\"/images/licious-meatopia-logo.svg\" />\n                                        <div class=\"join-now-cta\">\n                                            <div>JOIN NOW</div>\n                                        </div>\n                                    </div>\n                                    <hr style=\"width: 98.5%;;margin-left: 3px;border: solid 0.5px rgba(0,0,0,0.16)\"/>\n                                    <div class=\"bottom-content\">\n                                        <span> ".concat(a.bannerMessage," </span>\n                                    </div>\n                                </div>")}else if("cart"===b||"order-status"===b){var d=document.querySelector(".".concat(b,"_loyalty_banner"));d.innerHTML="<div class=\"ll-cart-msg\"> ".concat(a.non_subscribed.message," </div>\n                                <div class=\"loyalty-non-member-banner\" style=\"width: 95%; margin: 0 auto;border-radius: 5px;box-shadow: 0 4px 10px 0 rgba(183, 183, 183, 0.5);font-family: 'Barlow', sans-serif;border: solid 1px #9b9b9b\">\n                                        <div class=\"loyalty-non-member-banner-top\" style=\"padding:15px 0;padding-left: 5px;\">\n                                            <img src=\"/images/licious-meatopia-logo.svg\" class=\"loyalty-banner-licious-non-member-logo\">\n                                            <div class=\"loyalty-non-member-banner-redirection-text\">\n                                                <span>JOIN NOW</span>\n                                                <img src=\"/images/dropdown1_icon.png\">\n                                            </div>\n                                        </div> </div>\n                                    </div>")}else if("sidebar"===b||"user-profile"===b){var e=document.querySelector(".".concat(b,"_loyalty_default_banner_placeholder"));e.innerHTML="<div style=\"width: 100%;padding: 10px 5px;background-color: #f8f8f8;\">\n        <div class=\"loyalty-non-member-banner\" style=\"margin-top:0px\">\n            <div class=\"loyalty-non-member-banner-top\">\n                <img src=\"/images/licious-meatopia-logo.svg\" class=\"loyalty-banner-licious-non-member-logo\">\n                <div class=\"loyalty-non-member-banner-redirection-text\">\n                <span>JOIN NOW</span>\n                <img src=\"/images/dropdown1_icon.png\">\n            </div>\n        </div>\n        <hr style=\"border: .5px solid #ebebeb\">\n        <div class=\"loyalty-non-member-banner-bottom\">\n            ".concat(this.renderBenefitList(a.non_subscribed.benefits),"\n        </div> \n    </div> </div>\n    ")}}},{key:"renderSubHomePageBanner",value:function(a,b){if("homepage"===b||"category"===b){var c=document.querySelector(".".concat(b,"_loyalty_member_banner_placeholder"));c.innerHTML=" \n        <div class=\"home-page-loyalty-member-banner\">\n        <img src=\"/images/licious-meatopia-logo.svg\" class=\"home-page-loyalty-banner-licious-member-logo\">\n        <div class=\"home-page-loyalty-member-banner-vertical-separator\"></div>\n        <div class=\"home-page-loyalty-member-info\">\n          <div class=\"home-page-loyalty-member-expiry-info\">".concat(0===a.days_left?a.expiry_message:a.plan_info_msg,"</div>\n            <div class=\"home-page-loyalty-member-orders-savings-info\">\n                <div class=\"only_order_info\">\n                    \u20B9").concat(a.total_saving," TOTAL SAVINGS\n                </div>\n            </div>\n        ").concat(a.is_renewable?"\n                <div class=\"extend-now\">\n                    <span>EXTEND NOW</span>\n                    <img class=\"proceed-image\" src=\"/images/dropdown1_icon.png\" />\n                </div> \n                ":"","\n            </div>")}else if("sidebar"===b){var d=document.querySelector(".".concat(b,"_loyalty_default_banner_placeholder"));d.innerHTML="<div class=\"loyalty-non-member-banner\" style=\"margin-top:0px;border-bottom:none;background:#ebebeb !important;box-shadow:none;border-radius: unset;\">\n                                       <div class=\"loyalty-non-member-banner-top\">\n                                        <img src=\"/images/licious-meatopia-logo.svg\" class=\"loyalty-banner-licious-non-member-logo\">\n                                        <div class=\"vr\"></div>\n                                        <div class=\"loyalty-non-member-banner-redirection-text-other\" style=\"border-bottom:none;\">\n                                            <div class=\"plan_name\" style=\"color:#313131\">".concat(a.page_header,"</div>\n                                            <div class=\"days_left\" style=\"border-bottom:none;\"> ").concat(0===a.days_left?a.expiry_message:"".concat(a.days_left," days left")," </div>\n                                        </div>\n                                        ").concat(a.is_renewable?"\n                                        <div class=\"loyalty-non-member-banner-redirection-text\">\n                                            <span style=\"position: relative;\n                                            left: 5px;\n                                            top: 2px;\n                                            font-size:12px;\n                                            \">EXTEND NOW</span>\n                                            <img style=\"position: relative;\n                                            top: 2px;\"src=\"/images/dropdown1_icon.png\">\n                                        </div>\n                                        ":"","\n                                        </div>\n                                      </div>")}}},{key:"renderExpiredPageBanner",value:function(a,b){if("homepage"===b||"user-profile"===b||"order-status"===b||"category"===b){var c=document.querySelector(".".concat(b,"_loyalty_default_banner_placeholder"));c.innerHTML=" <div class=\"loyalty-renew\" id=\"".concat(b,"\">\n                                            <img class=\"logo\" src=\"/images/licious-meatopia-logo.svg\" />\n                                            <div class=\"separator\" style=\"opacity: 0.3\"></div>\n                                            <div class=\"ll-renew-details\">\n                                                <div class=\"ll-expiredtext\"> <span>").concat(0===a.days_left?a.expiry_message:a.plan_info_msg,"</span></div>\n                                                <div class=\"ll-order-savings\">\n                                                <div class=\"ll-plan-name\"> <span>  \u20B9").concat(a.total_saving," </span> Total Savings  </div> \n                                                </div>\n                                            <div class=\"renew-button\">\n                                                <span>RENEW NOW</span>\n                                                <img class=\"proceed-image\" src=\"/images/dropdown1_icon.png\" />\n                                            </div>  \n                                        </div>\n            ")}else if("cart"===b){var d=document.querySelector(".".concat(b,"_loyalty_banner"));d.innerHTML="\n                <div class=\"loyalty-non-member-banner\" style=\"width: 95%; margin: 0 auto;border-radius: 5px;box-shadow: 0 4px 10px 0 rgba(183, 183, 183, 0.5);font-family: 'Barlow', sans-serif;border: solid 1px #9b9b9b\">\n                        <div class=\"loyalty-non-member-banner-top\" style=\"padding:15px 0;padding-left: 5px;\">\n                            <img src=\"/images/licious-meatopia-logo.svg\" class=\"loyalty-banner-licious-non-member-logo\">\n                            <div class=\"loyalty-non-member-banner-redirection-text\">\n                                <span>RENEW NOW</span>\n                                <img src=\"/images/dropdown1_icon.png\">\n                            </div>\n                        </div> </div>\n                    </div>"}else if("sidebar"===b){var e=document.querySelector(".".concat(b,"_loyalty_default_banner_placeholder"));e.innerHTML="\n                \n                <div class=\"loyalty-non-member-banner\" style=\"width: 95%;margin: 0 auto;border-radius: 5px;box-shadow: 0 4px 10px 0 rgba(183, 183, 183, 0.5);font-family: 'Barlow', sans-serif;\">\n                        <div class=\"loyalty-non-member-banner-top\" style=\"padding:15px 0;padding-left: 5px;\">\n                            <img src=\"/images/licious-meatopia-logo.svg\" class=\"loyalty-banner-licious-non-member-logo\">\n                            <div class=\"loyalty-non-member-banner-redirection-text\">\n                                <span>RENEW NOW</span>\n                                <img src=\"/images/dropdown1_icon.png\">\n                            </div>\n                        </div> </div>\n                    </div>"}}},{key:"validateResponse",value:function(){return!0}},{key:"is_subscribed",value:function(a){return a}},{key:"validatesubscriberData",value:function(a){return null!==a&&0<Object.keys(a).length}},{key:"renderBenefitList",value:function(a){var b="";return a.map(function(c,d){1>=d?b+="<span class=\"loyalty-non-member-banner-benefits\">".concat(c.name,"</span>\n                    ").concat(1!==d&&d!==a.length-1?"<span class=\"loyalty-dot\"></span>":""):2==d&&(b+="<span class=\"loyalty-non-member-banner-benefits\">...& more</span>")}),b}},{key:"renderPopupBenefits",value:function(a){var b=[];if(this.checkBenefits(a.non_subscribed))b=a.non_subscribed.benefits;else if(this.checkBenefits(a.subscribed))b=a.subscribed.benefits;else return;document.querySelector(".popup-benefits").innerHTML="".concat(this.renderBenefitList(b))}},{key:"checkBenefits",value:function(a){return a&&0<Object.keys(a).length&&Array.isArray(a.benefits)&&a.benefits.length}}],[{key:"handleBannerClick",value:function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"click",e=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4];if(localStorage.setItem("loyalty_banner_click_page",c),meatopia_data.setData({click_source:c}),c===fn.page_list_constants.home&&meatopia_new_events.Loyalty_Banner_Click({banner_type:fn.loyalty_banners_obj.banner_type,list:fn.page_list_constants.home}),!b)e?($(".plan_pop_up").show(),$(".plan_pop_up").addClass("show")):(fn.msite.sendAnalyticsData("".concat(c,"_Loyalty_Banner_click"),_objectSpread(_objectSpread({},fn.loyalty_banners_obj),{source:"click"})),window.location.href="/loyalty/licious-meatopia");else{var f={name:"",city:"",hub_id:"",total_plans:"",list:"",member_status:"",selected_plan:"",recommended_plan:"",user_type:"",logged_in:"",total_orders:"",oldcart_value:"",total_items:"",olddelivery_charge:"",saved_amount:"",newcart_value:"",newdelivery_charge:""};localStorage.setItem("loyalty_banner_click_page",c),$(".plan_pop_up").show(),$(".plan_pop_up").addClass("show"),f.name=fn.loyalty_plan_name,f.city=fn.getCityFromLS(),f.hub_id=fn.getHubFromLS(),f.total_plans=fn.getterLS("loyalty_total_plans"),f.list=fn.loyalty_list,f.member_status=fn.loyalty_banners_obj.member_status,f.expired_plan=fn.getterLS("loyalty_expired_plan"),f.new_plan="",f.recommended_plan="",f.user_type=fn.getUserTypeFromLS(),f.logged_in=fn.getLoginStatus(),f.total_orders=fn.getTotalOrdersFromLS(),f.cart_value="",f.total_items="",f.delivery_charge="",f.saved_amount="",f.pr_totalsavedvalue=fn.loyalty_banners_obj.pr_totalsavedvalue,f.pr_totalorders=fn.loyalty_banners_obj.pr_totalorders}}}]),a}();