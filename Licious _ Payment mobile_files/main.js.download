function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,a){if(t){if("string"==typeof t)return _arrayLikeToArray(t,a);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(t,a):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,a){(null==a||a>t.length)&&(a=t.length);for(var s=0,o=Array(a);s<a;s++)o[s]=t[s];return o}function ownKeys(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,i)}return s}function _objectSpread(t){for(var a=1,s;a<arguments.length;a++)s=null==arguments[a]?{}:arguments[a],a%2?ownKeys(Object(s),!0).forEach(function(a){_defineProperty(t,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))});return t}function _defineProperty(t,a,s){return a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}var pr_delid=0,ship_id=0,forgot=!1,discountprice=0,unrelatedContentList="",cleverTap_page_constants={hp:"home_page",cp:"category_page",pdp:"product_page"},cleverTap_page_source="",cleverTap_events=function(){var t=function(t,a){var s={city_name:fn.getCityFromLS(),hub_id:fn.getHubFromLS(),User_Identifier:$(".customer_key_value").val()},i=_objectSpread(_objectSpread({},s),a);clevertap.event.push(t,i)};return{bannerClickEvent:function(a){t("Screenhome_CarousalBanner",a)},catHeaderClickEvent:function(a){t("Screenhome_CategoryNavigation",a)},catSectionClickEvent:function(a){t("Screenhome_ExplorebyCategory",a)}}}(),meatopia_data=function(){var t=function(){var t={};return!sessionStorage.getItem("meatopia_data")||""===sessionStorage.getItem("meatopia_data")||(t=JSON.parse(sessionStorage.getItem("meatopia_data"))),t};return{setData:function(a){var s=t(),i=_objectSpread(_objectSpread({},s),a);sessionStorage.setItem("meatopia_data",JSON.stringify(i))},getDataByKeyName:function(a){var s=t();return s.hasOwnProperty(a)?0==s[a]?"0":s[a]?s[a]:"":""}}}(),meatopia_new_events=function(){var t=function(t,a){var s={city:fn.getCityFromLS(),hub_id:fn.getHubFromLS(),name:fn.loyalty_plan_name,member_status:fn.getMemberStatus(),user_type:fn.getUserTypeFromSS(),start_date:meatopia_data.getDataByKeyName("start_date"),end_date:meatopia_data.getDataByKeyName("end_date"),plan_price:meatopia_data.getDataByKeyName("plan_price"),plan_name:meatopia_data.getDataByKeyName("plan_name"),no_of_days_left:meatopia_data.getDataByKeyName("days_left"),total_orders:meatopia_data.getDataByKeyName("order_count"),total_saving:meatopia_data.getDataByKeyName("total_saving"),logged_in:$(".user_logged_in").val(),click_source:meatopia_data.getDataByKeyName("click_source"),list:fn.loyalty_list},i=_objectSpread(_objectSpread({},s),a);ga("send",{hitType:"event",eventCategory:"loyalty",eventAction:t,eventLabel:JSON.stringify(i)}),clevertap.event.push(t,i)},a=function(t,a){var s={city:fn.getCityFromLS(),hub_id:fn.getHubFromLS(),name:fn.loyalty_plan_name,member_status:fn.getMemberStatus(),user_type:fn.getUserTypeFromSS(),total_plans:meatopia_data.getDataByKeyName("total_plans"),list:fn.loyalty_list,recommended_plan:meatopia_data.getDataByKeyName("recommended_plan"),logged_in:$(".user_logged_in").val(),total_orders:meatopia_data.getDataByKeyName("order_count"),auto_renewal:fn.getAutoRenewalFlag()?"Yes":"No",enrolment_type:meatopia_data.getDataByKeyName("enrolment_type"),click_source:meatopia_data.getDataByKeyName("click_source"),selected_plan:meatopia_data.getDataByKeyName("selected_plan")},i=_objectSpread(_objectSpread({},s),a);ga("send",{hitType:"event",eventCategory:"loyalty",eventAction:t,eventLabel:JSON.stringify(i)}),clevertap.event.push(t,i)};return{cancel_autorenew:function(a){t("cancel_autorenew",a)},cancel_autorenew_confirm:function(a){t("cancel_autorenew_confirm",a)},enable_autorenew_auth:function(a){t("enable_autorenew_auth",a)},extend_planpage:function(a){t("extend_planpage",a)},view_loyaltycart:function(t){a("view_loyaltycart",t)},disable_auto_renew:function(t){a("disable_auto_renew",t)},enable_auto_renew:function(t){a("enable_auto_renew",t)},get_loyaltycart:function(t){a("get_loyaltycart",t)},Loyalty_Banner_Click:function(a){t("Loyalty_Banner_Click",a)},auto_renew_coupon_popup:function(t){_sendEvent("auto_renew_coupon_popup",t)}}}(),start_checkout_obj={cart_value:"",city_name:"",hub_id:"",product_id:"",product_name:"",quantity:"",from_module:"",total_items:"","Category ID":""};fn={setMeatopiaData:function(t){try{var a="non_member",s="New",i=t.data,o=i.subscribed,d=i.is_subscribed;if(d){var r=o.days_left,n=o.end_date,c=o.is_expired,l=o.is_renewable,p=o.sub_program_id,m=o.order_count,u=o.plan_name,_=o.start_date,g=o.total_saving,h=o.strike_price;a=c?"expired":"active";var v=fn.getAutoRenewalFlag()?"Yes":"No";c?s="Renewal":l&&(s="Extension");meatopia_data.setData({days_left:r,end_date:n,sub_program_id:p,order_count:m,plan_name:u,start_date:_,total_saving:g,enrolment_type:s,auto_renewal:v,plan_price:h})}else meatopia_data.setData({enrolment_type:s,member_status:a,order_count:"0",total_saving:"0"});$("#member_status").val(a)}catch(t){}},getSourcePage:function(){return fn.loyalty_list},getterLS:function(t){return null===localStorage.getItem(t)?"":localStorage.getItem(t)},getAdditionType:function(){return null===sessionStorage.getItem("addition_type")?"":sessionStorage.getItem("addition_type")},localStorageCheck:function(t){return"undefined"!=typeof t&&!!t},getDeviceFingerPrint:function(){var t=new ClientJS,a=t.getFingerprint();return a},loyalty_plan_name:"Licious Meatopia",loyalty_list:"",notify_me_ana_obj:{city:"",hub_id:"",category_name:"",product_name:"",product_id:"",price:"",discount:"",user_type:"",total_orders:"",email_id:"",product_url:"",product_image_url:""},generateProductData:function(t,a,s){var i=[],o=[],d=[];$.map(t,function(t){o.push(t.product_name),i.push(t.product_id),d.push(+t.quantity)});localStorage.setItem("prod_data",JSON.stringify({pr_name:o,pr_ids:i,pr_qty:d})),checkoutobj={Source:"Checkout_Proceedshipment","Cart Value":a,"City Name":fn.cityName,"Hub ID":+fn.hubId,"Product Name":o,"Saved Value":s,Quantity:d,"Product ID":i},localStorage.setItem("checkoutstarted",JSON.stringify(checkoutobj))},setLsProducts:function(t,a){var s={};s.normal=t,s.exotic=a,localStorage.setItem("products",JSON.stringify(s)),console.log("function setLsProducts called",s)},updateProductLsRemove:function(t){products=JSON.parse(localStorage.getItem("products")),flag=0,$.map(products.normal,function(a,s){a.product_id==t.product_id&&(products.normal=[].concat(_toConsumableArray(products.normal.splice(0,s)),_toConsumableArray(products.normal.splice(s+1))))}),$.map(products.exotic,function(a,s){a.product_id==t.product_id&&(products.exotic=[].concat(_toConsumableArray(products.exotic.splice(0,s)),_toConsumableArray(products.exotic.splice(s+1))))}),localStorage.setItem("products",JSON.stringify(products))},updateLsProducts:function(t){products=JSON.parse(localStorage.getItem("products")),flag=0,$.map(products.normal,function(a,s){a.product_id==t.product_id&&(products.normal[s]=t,flag=1)}),$.map(products.exotic,function(a,s){a.product_id==t.product_id&&(products.exotic[s]=t,flag=1)}),0==flag&&products.normal.push(t),localStorage.setItem("products",JSON.stringify(products))},getCategoryId:function(){res=JSON.parse(localStorage.getItem("products"));var t=[];return $.map(res.normal,function(a){t.push(a.category_id)}),$.map(res.exotic,function(a){t.push(a.category_id)}),t=_toConsumableArray(new Set(t)),res=JSON.stringify(t),res=res.substring(1,res.length-1),res},lsFindProduct:function(t){var a=JSON.parse(localStorage.getItem("products"));if(fn.localStorageCheck(a)){var s=a.exotic?a.normal.concat(a.exotic):a.normal,i=null;return $.map(s,function(a){if(a.product_id==t)return i=a,i}),i}},getnotifyMeDataForAnalytics:function(t){var a={category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""};a.price=t.attr("data_price"),a.product_id=t.attr("pr_id"),a.product_name=t.attr("data_name"),a.product_image_url=t.attr("data_img"),a.category_name=t.attr("data_cat"),a.discount=t.attr("data_discount"),a.product_url=window.location.href,fn.populateNotifyMeData(a),fn.msite.sendAnalyticsData("notify_productOOS",_objectSpread(_objectSpread({},fn.notify_me_ana_obj),{source:"availability"}))},populateNotifyMeData:function(t){fn.notify_me_ana_obj.incoming_source=fn.loyalty_list,fn.notify_me_ana_obj.city=fn.getCityFromLS(),fn.notify_me_ana_obj.hub_id=fn.getHubFromLS(),fn.notify_me_ana_obj.user_type=fn.getUserTypeFromLS(),fn.notify_me_ana_obj.total_orders=fn.getTotalOrdersFromLS(),fn.notify_me_ana_obj.email_id=fn.getEmailFromLS(),fn.notify_me_ana_obj.category_name=t.category_name,fn.notify_me_ana_obj.product_name=t.product_name,fn.notify_me_ana_obj.product_id=t.product_id,fn.notify_me_ana_obj.price=t.price,fn.notify_me_ana_obj.discount=t.discount,fn.notify_me_ana_obj.product_url=t.product_url,fn.notify_me_ana_obj.product_image_url=t.product_image_url},validateCookieForProduct:function(t){var a=fn.msite.home.getCookie("notify_products");return!!a.includes(t)},refreshCookie:function(t){var a=fn.msite.home.getCookie("notify_products");if(a.includes(t)){var s=a.split(","),i=s.indexOf(t);s.splice(i,1);var o=s.join(","),d="expires="+fn.getCookieExpire().toString();fn.msite.home.setCookie("notify_products",o,d)}},setLSLoyaltyData:function(t){if(!!t&&Array.isArray(t)&&t.length){localStorage.setItem("loyalty_cart_data",JSON.stringify(t[0]));var a=t[0],s=a.addition_type,i=a.subprogram_name,o=a.price,d=a.discounted_price;sessionStorage.setItem("addition_type",s),meatopia_data.setData({selected_plan:"".concat(i,", ").concat(0>=o-d?"0":o,", ").concat(d)})}else localStorage.setItem("loyalty_cart_data",null)},checkElementInViewPort:function(t){var a=t.getBoundingClientRect();return!!(0<=a.top&&0<=a.left&&a.right<=(window.innerWidth||document.documentElement.clientWidth)&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight))},loyalty_banners_obj:{banner_url:"",position:"",banner_type:"",list:"",logged_in:"",member_status:"",pr_totalsavedvalue:"",pr_totalorders:""},loyalty_landing_obj:{name:"",city:"",hub_id:"",total_plans:"",list:"",member_status:"",recommended_plan:"",user_type:"",logged_in:"",total_orders:"",auto_renewal:"",enrolment_type:meatopia_data.getDataByKeyName("enrolment_type"),click_source:meatopia_data.getDataByKeyName("click_source")},analytics_impression:["homepage_Loyalty_Banner_impression","order_status_Loyalty_Banner_impression","category_Loyalty_Banner_impression","Banner_impression"],analytics_click:["Banner_click","homepage_Loyalty_Banner_click","order_status_Loyalty_Banner_click","category_Loyalty_Banner_click"],populateLoyaltyBannerData:function(t,a){fn.loyalty_banners_obj.banner_type=fn.getLoyaltyBannerMemberType(t).bannerType,fn.loyalty_banners_obj.list=a,fn.loyalty_banners_obj.logged_in=$(".user_logged_in").val(),fn.loyalty_banners_obj.member_status=fn.getMemberStatus(),fn.loyalty_banners_obj.pr_totalsavedvalue=fn.getSavingAndOrderCount(t).saved_value,fn.loyalty_banners_obj.pr_totalorders=fn.getSavingAndOrderCount(t).total_orders},populateLoyaltyLandingData:function(t){fn.loyalty_landing_obj.name=fn.loyalty_plan_name,fn.loyalty_landing_obj.city=fn.getCityFromLS(),fn.loyalty_landing_obj.hub_id=fn.getHubFromLS(),fn.loyalty_landing_obj.total_plans=t.sub_programs.length.toString(),fn.loyalty_landing_obj.list=fn.loyalty_list,fn.loyalty_landing_obj.user_type=fn.getUserTypeFromLS(),fn.loyalty_landing_obj.logged_in=fn.getLoginStatus(),fn.loyalty_landing_obj.recommended_plan=fn.getRecommendedPlan(t),fn.loyalty_landing_obj.total_orders=fn.getTotalOrdersFromLS(),fn.loyalty_landing_obj.click_source=meatopia_data.getDataByKeyName("click_source")},getRecommendedPlan:function(t){var a="";if(Array.isArray(t.sub_programs)&&0<t.sub_programs.length){var s=t.sub_programs[0];a="".concat(s.name,", ").concat(0>=s.price-s.discounted_price?"0":" ".concat(s.price),",  ").concat(s.discounted_price)}var i=t.sub_programs.filter(function(t){return!0===t.is_recommended});if(i.length){a=i[0].id.toString();var o=i[0];a="".concat(o.name,", ").concat(0>=o.price-o.discounted_price?"0":" ".concat(o.price),",  ").concat(o.discounted_price)}return a.toString()},getSavedAndOrders:function(t){var a=0,s=0;return null!==t&&(a=t.order_count,s=t.total_saving),{order_count:a,total_saving:s}},getCityFromLS:function(){return null===localStorage.getItem("city")?"":localStorage.getItem("city")},getEmailFromLS:function(){fn.getterLS("user_email")},getHubFromLS:function(){return null===localStorage.getItem("hub")?"":localStorage.getItem("hub")},getUserTypeFromLS:function(){return null===localStorage.getItem("user_type")?"":localStorage.getItem("user_type")},getUserTypeFromSS:function(){return null===sessionStorage.getItem("user_type")?"":sessionStorage.getItem("user_type")},getTotalOrdersFromLS:function(){return null===localStorage.getItem("total_orders")?"":localStorage.getItem("total_orders")},getLoginStatus:function(){return null!==$(".user_logged_in").val()&&$(".user_logged_in").val()!==void 0&&""!==$(".user_logged_in").val()?$(".user_logged_in").val():"false"},getMemberStatus:function(){return null!==$("#member_status").val()&&$("#member_status").val()!==void 0&&""!==$("#member_status").val()?$("#member_status").val():"non_member"},getMemberDataForUserProfile:function(){var t=fn.getMemberStatus(),a=t.split(","),s="",i="",o="";return"undefined"!=typeof a&&0<a.length&&("3"===a.length.toString()?(s=a[0],i=a[1],o=a[2]):s=a[0]),{member_status:s,start_date:i,end_date:o}},getSavingAndOrderCount:function(t){var a="0",s="0";return null!==t&&null!==t.subscribed&&(a=t.subscribed.order_count.toString(),s=t.subscribed.total_saving.toString()),{saved_value:a,total_orders:s}},page_list_constants:{home:"homepage_widget",cart:"cart",order_status:"order-status",sidebar:"sidebar",userprofile:"userprofile",category:"category_browse",loyalty_landing:"loyalty_landing",loyalty_pay:"loyalty_pay",slot:"slot",past_order:"past_order",favourite_order:"favorite_items"},getLoyaltyBannerMemberType:function(t){var a="",s="";return fn.validateLoyaltyExpiry(t)?(a="loyalty_renew",s="expired"):t.is_subscribed?(a="loyalty_active",s="active"):(a="loyalty_nonmember",s="non-member"),{bannerType:a,memberType:s}},validateLoyaltyExpiry:function(t){var a=!1,s="";return null!==t&&null!==t.subscribed&&null!==t.subscribed.is_expired&&(a=t.subscribed.is_expired,s="".concat(t.subscribed.plan_name,", ").concat(t.subscribed.strike_price,", ").concat(t.subscribed.actual_price)),0<$(".buy_plan button").length&&$(".buy_plan button").attr("isExpired",a.toString()),localStorage.setItem("loyalty_expired_plan",s),a},validateLoyaltyExtend:function(t){var a=!1;return null!==t&&null!==t.subscribed&&null!==t.subscribed.is_expired&&(a=!1===t.subscribed.is_expired),0<$(".buy_plan button").length&&$(".buy_plan button").attr("isExtend",a.toString()),0<$(".ll-view .footer").length&&$(".ll-view .footer").attr("isExtend",a.toString()),a},getAutoRenewalType:function(){return fn.getAutoRenewalFlag()?"Yes":"No"},checkAndUpdateAutoRenewal:function(t){return t?t&&!sessionStorage.getItem("auto_renew")?(sessionStorage.setItem("auto_renew","show"),!0):!!(t&&"show"===sessionStorage.getItem("auto_renew"))||(t&&"hide"===sessionStorage.getItem("auto_renew")?(sessionStorage.setItem("auto_renew","show"),!0):void 0):(sessionStorage.setItem("auto_renew","hide"),!1)},getAutoRenewalFlag:function(){return"show"===sessionStorage.getItem("auto_renew")},clearAutoRenewFromSession:function(){sessionStorage.setItem("auto_renew","hide")},overlayDefault:$(".overlay"),cat_name:$(".cat_name").val(),hubId:$(".hub-id").val(),Queue:{},pageName:$(".subloc").val(),cartId:$(".cart_id").val(),cityName:localStorage.getItem("city"),paypalPaymentHandler:function(t){2e3>=t?($("#paypal_autocheck_inp").prop("disabled",!1),$("#paypal_autocheck_inp").parent().parent().parent().css("opacity"," 1"),"true"==localStorage.getItem("is_ba_present")&&$("#paypal_one_time_pay").css("display","none")):($("#paypal_autocheck_inp").prop("disabled",!0),$("#paypal_autocheck_inp").parent().parent().parent().css("opacity","0.4"),$("#paypal_one_time_pay").css("display","block"))},catList:{length:0,head:null,tail:null,catNode:function(t,a){this.catSlug=t,this.catId=a,this.next=null,this.prev=null},insert:function(t,a){var s=new this.catNode(t,a);return this.head?(s.prev=this.tail,this.tail.next=s,this.tail=this.tail.next,this.length++,s):(this.head=s,this.tail=s,length++,s)},search:function(t){for(var a=this.head;a.catSlug!=t;)a=a.next;return a.catSlug==t?a:null}},notifyMeAPI:function(t){return new Promise(function(a,s){fn.ajaxForm(t,"POST","/loyalty/loyalty-notify").done(function(t){try{var s=JSON.parse(t);a(s)}catch(t){fn.msite.hideloader(),li_fn.checkout.checkoutMsg("error","something went wrong!!")}}).fail(function(t){s(t),fn.msite.hideloader(),li_fn.checkout.checkoutMsg("error","something went wrong!!")}).always(function(){})})},notifyMeV2API:function(t){return console.log(t),new Promise(function(a,s){fn.ajaxForm({payload:t},"POST","/loyalty/loyalty-notify-v2").done(function(t){try{var s=JSON.parse(t);a(s)}catch(t){fn.msite.hideloader(),li_fn.checkout.checkoutMsg("error","something went wrong!!")}}).fail(function(t){s(t),fn.msite.hideloader(),li_fn.checkout.checkoutMsg("error","something went wrong!!")}).always(function(){})})},showNotifiedToast:function(t){$(".notify-alert").html(t),$(".notify-alert").css("display","block"),setTimeout(function(){$(".notify-alert").css("display","none")},3e3)},saveNotifyProdToCookie:function(){var t="";null!==fn.msite.home.getCookie("notify_products")&&""!==fn.msite.home.getCookie("notify_products")&&(t+=fn.msite.home.getCookie("notify_products")),t+=""===t?localStorage.getItem("loyalty_pr_id"):","+localStorage.getItem("loyalty_pr_id");var a=new Date,s=new Date;s.setFullYear(a.getFullYear()),s.setMonth(a.getMonth()),s.setDate(a.getDate()+1),s.setHours(0),s.setMinutes(0),s.setSeconds(0);var i="expires="+s.toString();fn.msite.home.setCookie("notify_products",t,i)},getNotified:function(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:void 0,s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:void 0;$(".notify-mobile-number").attr("disabled",!0),fn.msite.showloader();var i="",o=localStorage.getItem("loyalty_pr_id");t&&(i=$(".notify-mobile-number").val()),fn.ajaxForm({phone_no:i,product_id:localStorage.getItem("loyalty_pr_id")},"POST","/loyalty/loyalty-notify").done(function(t){try{var i=JSON.parse(t);if(200==i.statusCode){localStorage.setItem("notified-msg",i.message),fn.msite.sendAnalyticsData("notify_productOOS",_objectSpread(_objectSpread({},fn.notify_me_ana_obj),{source:"availability"}));var d="";null!==fn.msite.home.getCookie("notify_products")&&""!==fn.msite.home.getCookie("notify_products")&&(d+=fn.msite.home.getCookie("notify_products")),d+=""===d?localStorage.getItem("loyalty_pr_id"):","+localStorage.getItem("loyalty_pr_id");var r="expires="+fn.getCookieExpire().toString();if(fn.msite.home.setCookie("notify_products",d,r),a)"search"===a.attr("data-module")?(a.children(".image").attr("src","/images/red-tick.svg"),a.addClass("notified"),a.parent().parent().parent().parent().find(".oos-content").html(i.message).removeClass("notify").addClass("notified")):(a.parent().find(".out_stock").remove(),a.addClass("notify-border-red"),a.children("span").children(".image").attr("src","/images/red-tick.svg"),a.children("span").children(".image").css("width","15px"),a.children("span").children(".image").css("margin","5px")),a.parent().find(".out_stock").remove(),a.addClass("notify-border-red"),a.children("span").children(".image").attr("src","/images/red-tick.svg"),a.children("span").children(".image").css("width","10px"),a.children("span").children(".image").css("margin","5px"),a.children("span").children(".image").css("position","relative"),a.children("span").children(".image").css("bottom","1px");else{var n=$(document).find(".notify_".concat(o));if(n.length){$(".search-list")&&$(".search-list").length&&$(".search-list").children().length?(n.children(".image").attr("src","/images/red-tick.svg"),n.addClass("notified"),n.parent().parent().parent().parent().find(".oos-content").html(i.message).removeClass("notify").addClass("notified")):(n.parent().find(".out_stock").remove(),n.addClass("notify-border-red"),n.children("span").children(".image").attr("src","/images/red-tick.svg"),n.children("span").children(".image").css("width","15px"),n.children("span").children(".image").css("margin","5px")),n.addClass("notify-border-red"),n.children("span").children(".image").attr("src","/images/red-tick.svg"),n.children("span").children(".image").css("width","10px"),n.children("span").children(".image").css("margin","5px"),n.children("span").children(".image").css("position","relative"),n.children("span").children(".image").css("bottom","1px");var c=n.parent().parent().parent().parent().parent();c&&(1!=c.find(".stock_text").length&&1!=c.find(".scooter_img")&&(c=$(document).find("."+o).parent()),c.find(".stock_text").removeClass("stock_text_red"),c.find(".stock_text").addClass("stock_text_green"),c.find(".stock_text").html("When product is available, you will be notified"),c.find(".scooter_img").html(""))}}}s?(1!=s.find(".stock_text").length&&1!=s.find(".scooter_img")&&(s=$(document).find("."+o).parent()),s.find(".stock_text").removeClass("stock_text_red"),s.find(".stock_text").addClass("stock_text_green"),s.find(".stock_text").html("When product is available, you will be notified"),s.find(".scooter_img").html("")):(fn.msite.hideloader(),li_fn.checkoutAlert("error",i.message)),$(".footer .stock_details .stock_text")&&$(".footer .stock_details .stock_text").html("When product is available, you will be notified")}catch(t){fn.msite.hideloader(),li_fn.checkout.checkoutMsg("error","something went wrong!!")}}).fail(function(){}).always(function(){fn.msite.hideloader(),localStorage.setItem("loyalty_pr_id",""),$(".contact-form-pop-up").removeClass("show"),fn.bodyScroll()})},getCookieExpire:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,i=new Date,o=new Date;return o.setFullYear(i.getFullYear()+parseInt(t)),o.setMonth(i.getMonth()+parseInt(a)),o.setDate(i.getDate()+parseInt(s)),o.setHours(0),o.setMinutes(0),o.setSeconds(0),o},scroll:function(){$(window).scroll(function(){var t=parseInt($(window).scrollTop()),a=parseInt($(".filters").prev().offset().top+$(".filters").prev().height()-46);t>=a?$(".filters").addClass("fixed"):$(".filters").removeClass("fixed")})},selectFilter:function(){$(".filter.type").find("li a").on("click",function(t){t.preventDefault();var a=$(this).parent();a.hasClass("active")?a.removeClass("active"):a.addClass("active")}),$(".filter.refine").find("li a").on("click",function(t){t.preventDefault();var a=$(this).parent(),s=$(".filter.refine").find("li");s.removeClass("select"),a.addClass("select")})},mainSearch:function(){$(".main-search").find(".search-input").focus(function(){var t=$(".drop-menu");t.hasClass("down")&&t.addClass("searchDown")}),$(".main-search").find(".search-input").blur(function(){var t=$(".drop-menu");t.removeClass("searchDown")})},addToCart:function(){$(".add-to-cart-btn").on("click",function(){var t=$(this).parent(),a=t.parent(),s=a.data("count"),i=$(".added-to-cart"),o=$(".addons");s+=1,a.attr("data-count",s),t.find(".item-count").html(s),t.addClass("slide"),setTimeout(function(){i.removeClass("added")},2e3)})},showAddon:function(){$(".add-to-cart").find(".addon-tag").on("click",function(){$(".addons").addClass("add"),$(".overlay").show()})},closeAddon:function(){$(".addons").find(".close").on("click",function(){$(".addons").removeClass("add"),$(".overlay").hide()})},selectAddon:function(){$(".addons").find(".addons-list li").on("click",function(){var t=$(".add-to-cart").find(".addon-tag");$(this).find("input[type=\"checkbox\"]").is(":checked")?t.addClass("show-addontag"):t.removeClass("show-addontag")})},addOne:function(){$(".add-one").on("click",function(){var t=$(this).parent(),a=$(this).parents().eq(2),s=parseInt(a.attr("data-count"));s+=1,a.attr("data-count",s),t.find(".item-count").html(s)})},removeOne:function(){$(".remove-one").on("click",function(){var t=$(this).parent(),a=$(this).parents().eq(2),s=parseInt(a.attr("data-count"));s-=1,1>s?(t.parent().removeClass("slide"),a.attr("data-count",0),t.find(".item-count").html(0)):(a.attr("data-count",s),t.find(".item-count").html(s))})},showDetails:function(){$(".img-holder").on("click",function(){$(this).find(".item-details").addClass("show")})},hideDetails:function(){$(".info-close").on("click",function(t){if("info-close"==t.currentTarget.className){var a=$(this).parents().eq(2);a.find(".item-details").removeClass("show")}else return!1;t.stopImmediatePropagation()})},overflowY:function(){$("body").css({overflowY:"hidden"})},noScroll:function(){$("body").css({position:"fixed",overflowY:"hidden",width:"100%"})},bodyScroll:function(){$("body").css({position:"static",overflowY:"scroll",width:"100%"})},ajaxForm:function(t,a,s){return $.ajax({url:s,type:a,data:t,timeout:1e6,headers:{"X-CSRF-TOKEN":$("meta[name=\"_token\"]").attr("content"),"Cache-Control":"private, no-cache, no-store, must-revalidate",Expires:"-1",Pragma:"no-cache"}})},msite:{imageLazyLoad:function(t){if("IntersectionObserver"in window){var a=new IntersectionObserver(function(t,a){t.forEach(function(t){if(t.isIntersecting){var s=t.target,i=s.getAttribute("data-src");!i||(s.setAttribute("src",i),a.disconnect())}})});a.observe(t)}else{var s=entry.target,i=s.getAttribute("data-src");!i||s.setAttribute("src",i)}},getAllDOMImages:function(){var t=document.querySelectorAll("img");t.forEach(fn.msite.imageLazyLoad)},branchIO:{addEvent:function(t,a){branch.logEvent(t,a,function(s){fn.msite.branchIO.branchLogErr(s,a,t)})},branchLogErr:function(t,a,s){if(!!t){var i={error:t,event_data:a,event_name:s};fn.msite.sendAnalyticsData("BRANCH_ERR",i),fn.ajaxForm(i,"POST","/log-branch-err").done(function(){})}}},setFDUserAttrs:function(){window.fcWidget&&window.fcWidget.user.setProperties({firstName:localStorage.getItem("user_name"),email:localStorage.getItem("customer_email"),phone:localStorage.getItem("user_contact")})},isFreshChatEnabled:function(){return!("true"!==sessionStorage.getItem("customer_chat"))},CheckIfQuickCheckoutFlow:function(){(fn.msite.checkIfFavouritePage()||fn.msite.checkIfReorderPage())&&sessionStorage.setItem("isQuickCheckoutFlow",!0)},getCheckoutFlowType:function(){return"true"===sessionStorage.getItem("isQuickCheckoutFlow")?"quick_checkout":"old_checkout"},proceedShipmentEvent:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,a=JSON.parse(localStorage.getItem("checkoutstarted")),s=t?t:"old_checkout";if(a.Checkout_Flow=s,fn.localStorageCheck(a)){var i={Checkout_Flow:s,Source:"Checkout_Proceedshipment","Cart Value":a["Cart Value"],"City Name":fn.cityName,"Hub ID":+fn.hubId,"Product Name":JSON.stringify(a["Product Name"]),"Saved Value":+localStorage.getItem("saveamount"),Quantity:JSON.stringify(a.Quantity),"Product ID":JSON.stringify(a["Product ID"]),"Category ID":fn.getCategoryId()};clevertap.event.push("Checkout Started",i)}},addToCartEvents:function(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:void 0,s=t.product,i=a?a:"old_checkout";s.map(function(t){try{var a={Checkout_Flow:i,incoming_source:fn.getSourcePage(),"Product ID":t.product_id,"Category ID":t.category_id?t.category_id:"","Product Name":t.product_name,Price:t.base_price,Quantity:t.quantity};clevertap.event.push("Added to Cart",a),clevertap.event.push("Product added to cart",a),fbq("track","AddToCart",{content_type:"product",content_ids:[t.product_id],content_name:t.product_name,content_category:t.category_name,value:t.base_price,currency:"INR"})}catch(t){console.log(e)}})},getReorderPayload:function(){return{city:fn.getCityFromLS(),hub:fn.getHubFromLS(),incoming_source:fn.msite.getIncomingSource(),user:fn.getUserTypeFromLS()}},getSearchPayload:function(){return{City:fn.getCityFromLS(),Hub:fn.getHubFromLS(),customer_key:$(".customer_key_value").val(),user_type:fn.getUserTypeFromLS(),page_name:fn.msite.getPageName()}},getPageName:function(){var t=window.location.pathname;return 2==t.split("/").length?1==t.length?fn.page_list_constants.home:fn.page_list_constants.category:"product_description_page"},getIncomingSource:function(){var t=new URLSearchParams(window.location.search),a=t.get("src");return a?a:""},months:function(){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},days:function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},days_short:function(){return["SUN","MON","TUE","WED","THU","FRI","SAT"]},trackReload:function(){document.getElementById("iframeid").src+=""},setAddressFields:function(t){if(200===t.statusCode){var a=t.data,s=a.address,o=a.defaultaddress;if(0<s.length){var d=localStorage.getItem("default_addr_id");(""===d||null===d||d===void 0)&&(d=o[0],d&&""!==d?localStorage.setItem("default_addr_id",d):($(".reorder-bottom-bar .proceed-payment").attr("disabled",!0),$(".bottom-bar .proceed-payment").attr("disabled",!0)));for(var r=!1,n=0;n<s.length;n++)if(s[n].address_id.toString()===d){r=!0;var c=s[n],l=c.line1,p=c.line2;$("#addr_text").html("".concat(l,", ").concat(p)),$("#addr_text1").html("".concat(l,", ").concat(p));break}r?($("#large_pop_up_addr").html("Change"),$("#change_addr_bar").html("Change")):($("#large_pop_up_addr").html("Choose Address"),$("#change_addr_bar").html("Choose Address"),$(".reorder-bottom-bar .proceed-payment").attr("disabled",!0),$(".bottom-bar .proceed-payment").attr("disabled",!0))}else $("#large_pop_up_addr").html("ADD ADDRESS"),$("#change_addr_bar").html("ADD ADDRESS"),$(".reorder-bottom-bar .proceed-payment").attr("disabled",!0),$(".bottom-bar .proceed-payment").attr("disabled",!0)}else 203==t.statusCode?($("#large_pop_up_addr").html("ADD ADDRESS"),$("#change_addr_bar").html("ADD ADDRESS"),$(".reorder-bottom-bar .proceed-payment").attr("disabled",!0),$(".bottom-bar .proceed-payment").attr("disabled",!0)):li_fn.checkout.checkoutAlert("api_fail","Something went wrong. Please retry")},getHistory:function(){return document.referrer.split("/")},checkIfReorderPage:function(){var t=fn.msite.getHistory(),a=t.length&&t[t.length-1].split("?")[0];return a&&"past-orders"===a},checkIfFavouritePage:function(){var t=fn.msite.getHistory(),a=t.length&&t[t.length-1].split("?")[0];return a&&"favourite-items"===a},checkifPaymentPage:function(){var t=fn.msite.getHistory();return t.includes("payments")},checkIfCartSummaryPage:function(){var t=fn.msite.getHistory();return t.includes("cart-summary")&&"cart-summary"===t[t.length-1]},setToken:function(){fn.ajaxForm({},"GET","/checkout_oos/get-token").done(function(){})},setCustomer:function(){fn.ajaxForm({},"GET","/checkout_oos/get-customer").done(function(){})},fetchAddressApi:function(){return new Promise(function(t,a){fn.ajaxForm({},"GET","/customer/li-get-address").done(function(a){try{var s=JSON.parse(a);t(s)}catch(t){fn.msite.hideloader(),li_fn.checkout.checkoutAlert("api_fail","Something went wrong. Please retry")}}).fail(function(){a("failed"),fn.msite.hideloader(),li_fn.checkout.checkoutAlert("api_fail","Something went wrong. Please retry")}).always(function(){})})},getCartAPI:function(){return new Promise(function(t,a){fn.ajaxForm({},"GET","/customer/li-get-cart").done(function(s){try{var i=JSON.parse(s);t(i)}catch(t){fn.msite.hideloader(),li_fn.checkout.checkoutAlert("api_fail","Something went wrong. Please retry"),a(err)}}).fail(function(t){fn.msite.hideloader(),li_fn.checkout.checkoutAlert("api_fail","Something went wrong. Please retry"),a(t)}).always(function(){})})},getCategories:function(){fn.ajaxForm({},"GET","/checkout_oos/get-categories").done(function(t){t=JSON.parse(t),"success"==t.status?($(".search-holder .catalog").html(""),$.each(t.data,function(t,a){var s="<li> <a href=\"/"+a.slug+"\"> <img data-src=\" "+a.cat_tile_img+" \" alt=\"Licious\"><p class=\"cat-name\"><span>  "+a.cat_name+" </span></p></a></li>";$(".list").append(s);var i="<div class = \"catalog-item\"><a href = \""+a.slug+"\" class = \"catalog-head\">"+a.cat_name+"</a></div>";$(".search-holder .catalog").append(i)}),fn.msite.getAllDOMImages()):fn.msite.showAlert("generic_notif","")})},bindNotifyMeBtn:function(t){var a={category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""};t.find(".notify-btn").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var s=$(this),i="true"!==$(".contact-form-pop-up").attr("logged_in"),o=s.attr("data-pr_id");localStorage.setItem("loyalty_pr_id",o),a.price=s.attr("data_price"),a.product_id=o,a.product_name=s.attr("data_name"),a.product_image_url=s.attr("data_img"),a.category_name=s.attr("data_cat"),a.discount=s.attr("data_discount"),a.product_url=window.location.href,fn.populateNotifyMeData(a),"true"===$(".contact-form-pop-up").attr("logged_in")?fn.getNotified(i,s):($(".contact-form-pop-up").addClass("show"),fn.noScroll())})},getProducts:function(){fn.msite.showloader(),fn.ajaxForm({cat_id:$(".cat_id").val()},"POST","/checkout_oos/get-products").done(function(t){if(t=JSON.parse(t),"success"==t.status){var a=$(".item-holder"),s="",i=$(".cat_id").val(),o=$(".cat_name").val(),d=t.data[0].product_inventory.hub_id,r=[],n={category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""},c=localStorage.getItem("cat_slug");$.map(t.data,function(t,a){try{var i="",o=$(".total-item-pipe .clicked.selected").data("name");1>t.product_inventory.stock_units?fn.validateCookieForProduct(t.product_master.product_id)?i="<div class= \"notify-btn-container\"><button class=\"notify-btn notify-border-red\" data-pr_id = \""+t.product_master.product_id+"\"><span><image class=\"image_notified\" src=\"/images/red-tick.svg\">NOTIFY ME</span></button></div>":i="<div class= \"notify-btn-container\"><button class=\"notify-btn notify_"+t.product_master.product_id+"\" data_name = \""+t.product_merchantdising.merchandise_name+"\" data_cat = \""+o+"\" data_img = \""+t.product_merchantdising.pr_image+"\" data_discount = \""+t.product_pricing.base_discount+"\"  data_price = \""+t.product_pricing.base_price+"\" data-pr_id = \""+t.product_master.product_id+"\"><span><image class=\"image\"src=\"/images/notify-icon2.png\">NOTIFY ME</span></button></div>":2==t.product_inventory.slot_available?i="<div class=\"cart-button\" data-module = \"Product Listing - "+o+" \"><div><button class=\"addcartbtn addcartbtndisabled\" disabled >ADD TO CART</button></div></div><div class=\"item-count\" data-pr_id = \""+t.product_master.product_id+"\" data-stock = \""+t.product_inventory.stock_units+"\" data-index = \""+a+"\" data-count = \"0\" ><span class=\"icon icon-minus-disabled\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus-disabled\"></span></div>":(fn.refreshCookie(t.product_master.product_id),i="<div class=\"cart-button\" data-module = \"Product Listing - "+o+" \"><button class=\"addcartbtn\" >ADD TO CART</button></div><div class=\"item-count\" data-pr_id = \""+t.product_master.product_id+"\" data-stock = \""+t.product_inventory.stock_units+"\" data-index = \""+a+"\" data-count = \"0\" ><span class=\"icon icon-minus\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus\"></span></div>");var d="";d=""==t.product_master.pieces?-1==t.product_master.gross.search(/gm/i)&&-1==t.product_master.gross.search(/kg/i)?"<span class=\"item-pieces\">Pieces: "+t.product_master.gross+"</span><span class=\"item-weight\">Net: "+t.product_master.pr_weight+"</span><span class=\"item-status\">"+(t.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item-pieces\">Gross: "+t.product_master.gross+"</span><span class=\"item-weight\">Net: "+t.product_master.pr_weight+"</span><span class=\"item-status\">"+(t.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item\">"+t.product_master.pieces+" Pieces </span>",1==t.product_merchantdising.is_combo&&(d="");var n=fn.msite.discount(t.product_pricing),l=n==t.product_pricing.base_price?"MRP: ":"",p="";p=80<t.product_merchantdising.merchandise_name.length?"<div class=\"item-discription long-text\" data-itemname = \"".concat(t.product_merchantdising.merchandise_name,"\">").concat(t.product_merchantdising.merchandise_name.substring(0,77)," ... <img src=\"/images/ellipses@2x.png\" class=\"ellipses\"></div>"):"<div class=\"item-discription\" data-itemname = \"".concat(t.product_merchantdising.merchandise_name,"\">").concat(t.product_merchantdising.merchandise_name,"</div>"),s=s+"<li class = \""+t.product_master.product_id+"\" data-name =\""+t.product_merchantdising.merchandise_name+"\" data-index = \""+a+"\"><a href=\"/"+c+"/"+t.product_master.slug+"\">  <div class=\"image-holder\"><img class=\"deal-images\" data-src=\""+t.product_merchantdising.pr_image+"\" alt=\""+t.product_merchantdising.product_shortname+"\" title=\""+t.product_merchantdising.product_shortname+"\">  </div>  <div class=\"itemDetail\">"+p+"<div class=\"short-description\">"+t.product_merchantdising.usp_desc+"</div>   <p class=\"item-quantity\">"+d+"   </p>   <div class=\"item-value\"><div class=\"item-price\"><span class=\"real-price\"><span style=\"font-size: 14px;\">"+l+"</span>&#8377; "+n+"</span>"+(n==t.product_pricing.base_price?"":"<span class=\"deduct-price\" style=\"text-decoration: none;\">MRP: </span><span class=\"deduct-price\" style=\"margin: 0;\">  &#8377;"+t.product_pricing.base_price+"</span><span class=\"discount-bottom\">"+(t.product_pricing.rounded_base_discount||Math.floor(t.product_pricing.base_discount))+"% Off </span>")+"</div>"+i+"   </div>  </div></a>"+"".concat(t.product_videos.length?"<div class=\"video-link\" video-url=\"".concat(t.product_videos[0].video_link,"\" product_id=\"").concat(t.product_master.product_id,"\"><img data-src=\"/images/feather-play-circle@3x.png\" class=\"video-link-img\"><span class=\"How-to-cook\">How to cook</span></div>"):"")+fn.productDetails.getStockText(t.product_inventory,t.product_master.product_id)+"</li>",1===a&&(s+="<div class=\"category_loyalty_member_banner_placeholder\"></div>"),r.push(t.product_master.product_id)}catch(t){}}),1>=t.data.length&&(s+="<div class=\"category_loyalty_member_banner_placeholder\"></div>"),a.find("ul").html(s);var l=new HomePageBannerHandler;l.getHomePageAPIData().done(function(t){var a=JSON.parse(t);fn.setMeatopiaData(a),l.handleBannerRenderCases(a.data,"category"),isExpired=fn.validateLoyaltyExpiry(a.data),fn.populateLoyaltyBannerData(a.data),l.showAutoRenewalSection(a.data.auto_renewal)}),document.querySelector(".category_loyalty_banner").addEventListener("click",function(t){HomePageBannerHandler.handleBannerClick(t.target,isExpired,fn.page_list_constants.category,"click")}),document.querySelector(".category_loyalty_member_banner_placeholder")&&document.querySelector(".category_loyalty_default_banner_placeholder").addEventListener("click",function(t){HomePageBannerHandler.handleBannerClick(t.target,isExpired,fn.page_list_constants.category,"click")}),document.querySelector(".category_loyalty_member_banner_placeholder")&&document.querySelector(".category_loyalty_member_banner_placeholder").addEventListener("click",function(t){HomePageBannerHandler.handleBannerClick(t.target,isExpired,fn.page_list_constants.category)}),$(".icon-minus-disabled").on("click",function(t){t.preventDefault()}),$(".icon-plus-disabled").on("click",function(t){t.preventDefault()}),$(".video-link").on("click",function(t){t.preventDefault(),url=$(this).attr("video-url");var a={product_id:$(this).attr("product_id"),user_identifier:$(".customer_key_value").val(),city_name:fn.cityName,page:"category_page",hub_id:+fn.hubId,category_name:$(".cat_name").val()};clevertap.event.push("screencat_cookingvideo",a),fn.msite.playvideo(url)}),$(".item-discription").on("click",function(t){elem=$(this),elem.hasClass("long-text")&&(t.preventDefault(),t.stopImmediatePropagation(),elem.removeClass("long-text"),elem.html(""),elem.html(elem.data("itemname")))}),fn.msite.home.addToCart(a,"ProductList"),fn.msite.home.removeCart(a,"ProductList"),fn.msite.home.updateProductcount(),fn.msite.home.showdDesc(a),productIds=JSON.stringify(r),clevertap.event.push("Category Viewed",{"Category Name":o,"Category ID":i,"Hub id":d,"City Name":localStorage.getItem("city"),"Product Id":productIds.substring(1,productIds.length-1)}),$(".notify-btn").on("click",function(t){t.preventDefault();var a=$(this),s=a.parent().parent().parent().parent().parent(),i="true"!==$(".contact-form-pop-up").attr("logged_in"),o=a.attr("data-pr_id");localStorage.setItem("loyalty_pr_id",o),n.price=a.attr("data_price"),n.product_id=o,n.product_name=a.attr("data_name"),n.product_image_url=a.attr("data_img"),n.category_name=a.attr("data_cat"),n.discount=a.attr("data_discount"),n.product_url=window.location.href,fn.populateNotifyMeData(n),"true"===$(".contact-form-pop-up").attr("logged_in")?fn.getNotified(i,a,s):($(".contact-form-pop-up").addClass("show"),fn.noScroll())}),fbq("track","ViewCategory",{content_category:o,content_ids:r,content_type:"product"}),t.data&&fn.msite.home.pushEEProductionImpressionCategory(t.data),fn.msite.getAllDOMImages()}else $(".item-holder").html("")}).always(function(){fn.msite.hideloader()})},getCategoriesDetail:function(){return new Promise(function(t,a){var s=$(".slim-banner");fn.ajaxForm({cat_id:$(".cat_id").val()},"POST","/checkout_oos/get-category-details").done(function(i){if(i=JSON.parse(i),t(i),"success"==i.status){localStorage.setItem("cat_slug",i.data.slug),s.find(".content p").html(i.data.msite_desc),s.find(".cat_banner").attr("src",i.data.cat_web_img);var o=$(".hub-id").val(),d=$(".cat_id").val()}else a("failed"),s.html("")}).fail(function(t){a(t)})})},getBanners:function(){fn.ajaxForm({},"GET","/checkout_oos/get-banners").done(function(t){t=JSON.parse(t),$(".cycle-slideshow").html(""),$.map(t.data,function(t){var a="<a href=\""+t.msite_url+"\" class=\"line-height-reset\"><img src=\""+t.msite_banner+"\" alt=\"Licious\" class=\"img-responsive\" ></a>";$(".banners .main-banner").append(a)}),$(".main-banner").cycle({slides:"> a",timeout:3e3})})},getPrCount:function(){return fn.ajaxForm({cat_name:$(".cat_name").val()},"GET","/checkout_oos/order-info")},getCart:function(){fn.msite.getPrCount().done(function(t){var a=JSON.parse(t);1==a.notification.status?(fn.msite.add_alert("stay",a.notification.text),$(".lock-order").prop("disabled",!0),$(".bottom-bar").css("background-color","#727272")):($(".lock-order").prop("disabled",!1),$(".bottom-bar").css("background-color","#d50622")),fn.msite.updateCartQuantity(a.items_count),fn.msite.home.updateQuantity(a),fn.msite.setFinalPayment(parseInt(100*a.grand_total))})},updateCartQuantity:function(t){1>t?($(".cart-item-bar").removeClass("show"),$(".cart-count-top").data("ct",0).hide(),$(".cart-icon").removeClass("loaded"),$(".numbers-item").data("ct",0),fn.msite.home.getMobileOperatingSystem()):($(".cart-item-bar").addClass("show"),$(".cart-icon").addClass("loaded"),$(".Apple-playstore").hide(),$(".google-playstore").hide(),$(".numbers-item").data("ct",t),$(".numbers-item").html(t),$(".cart-count-top").data("ct",t).html(t).show())},getOrderSummary:function(){fn.msite.showloader();var t=$(".cart-card");fn.ajaxForm({cat_name:$(".cat_name").val()},"GET","/checkout_oos/order-summary").done(function(a){var s=JSON.parse(a);if(1<s.items_count&&$(".add_message").hide(),s.show_popup&&fn.msite.showAlert("offer_modified",s.web_popup_message),$(".cart-card").find("ul.live_prods").html(""),""!=s.oss_message&&fn.msite.showAlert("notif",s.oss_message),1==s.notification.status?(fn.msite.add_alert("stay",s.notification.text),$(".lock-order").prop("disabled",!0),$(".bottom-bar").css("background-color","#727272")):($(".lock-order").prop("disabled",!1),$(".bottom-bar").css("background-color","#d50622")),0<s.oss_products.length&&($(".cart-card .order-items").append("<h4 class = \"oos-heading\" style=\"color:#db3047;\">Items Unavailable</h4>"),$(".cart-card .order-items").append("<ul class = \"oss_prods\"></ul>"),$.map(s.oss_products,function(t){var a=t.offer_discount&&0<t.discount?"<span class = \"discounted-price\">&#8377; "+parseFloat(t.base_price).toFixed(0)+"</span><span class = \"deduct-price\">&#8377; "+parseFloat(t.base_price+t.discount/t.quantity).toFixed(0)+"</span>":"<span class = \"discounted-price\"> &#8377; "+parseFloat(t.base_price).toFixed(0)+"</span>",s="<li  data-prid=\""+t.product_id+"\" ><div class=\"item-detail\"><div class=\"img\"><img data-src=\" "+t.image+"\" alt=\"\"></div><div class=\"name\">"+t.product_name+"</div></div><div class=\"item-info\"><div class=\"item-price\"><span class=\"quantity\">"+function(a){return""==a?t.weight:t.pieces}(t.pieces)+"</span>"+a+"</div><div class=\"item-count quantity\"><span class=\"item-number total-count\" data-count=\""+t.quantity+"\" style=\"color:#db3047;\">"+t.quantity+" </span></div></div></li>";$(".cart-card").find("ul.oss_prods").append(s)})),0<s.products.length){var i=function(t){return""==t.pieces?t.weight:t.pieces};$(".cart-card").find(".loader").remove(),$.map(s.products,function(t,a){var s=t.offer_discount&&0<t.discount?"<span class = \"discounted-price\">&#8377; "+parseFloat(t.base_price).toFixed(0)+"</span><span class = \"deduct-price\">&#8377; "+parseFloat(t.base_price+t.discount/t.quantity).toFixed(0)+"</span>":"<span class = \"discounted-price\"> &#8377; "+parseFloat(t.base_price).toFixed(0)+"</span>",o=t.product_id,d="<li class=\"prid_"+o+" \" data-prid=\""+t.product_id+"\" data-name=\""+t.product_name+"\"><div class=\"item-detail\"><div class=\"img\"><img data-src=\" "+t.image+"\" alt=\"\"></div><div class=\"name\">"+t.product_name+"</div><button class=\"item-remove\" data-prid=\""+t.product_id+"\"><span class=\"cross\" >&times;</span></button></div><div class=\"item-info\"><div class=\"item-price\"><span class=\"quantity\">"+i(t)+"</span>"+s+"</div><div class=\"item-count quantity\"><span class=\"icon icon-minus remove-one\" data-prid = \""+t.product_id+"\"  data-stock = \""+t.stock+"\" data-index=\""+a+"\" data-prname=\""+t.product_name+"\"></span><span class=\"item-number total-count\" data-count=\""+t.quantity+"\">"+t.quantity+" </span><span class=\"icon icon-plus add-one\" data-prid = \""+t.product_id+"\"  data-stock = \""+t.stock+"\" data-index=\""+a+"\" data-prname=\""+t.product_name+"\"></span></div></div></li>";$(".cart-card").find("ul.live_prods").append(d)})}else fn.msite.showAlert("no_items","Your Cart is Empty");fn.msite.hideloader(),$(".item-remove").on("click",function(){var t=$(this).data("prid");$(".item-remove").prop("disabled",!0),fn.msite.deleteFromCart(t).done(function(a){s=JSON.parse(a),"success"==s.status&&($(".cart-card .live_prods").find(".prid_"+t).remove(),$(".cross-sell-wrap").find(".parentid_"+t).remove(),fn.msite.updateCartQuantity(s),$(".total-value").find(".total-amt span").html(s.cart.total.toFixed(2)),$(".total-value").find(".items-count span").html(s.items_count),s.show_popup&&fn.msite.showAlert("offer_modified",s.web_popup_message),1>$(".cross-sell-wrap").children(".block").length&&$(".cross-sell").hide(),fn.msite.getOrderSummary())}).always(function(){$(".item-remove").prop("disabled",!1)})});var o=" &#8377; "+s.total.toFixed(2);$(".total-value").find(".total-amt span").html(o),$(".total-value").find(".items-count span").html(s.items_count),fn.msite.setFinalPayment(parseInt(100*s.grand_total)),fn.msite.addCartCheckout(t,"cart"),fn.msite.removeCartCheckout(t,"cart"),fn.msite.getAllDOMImages()}),fn.msite.lockOrder(),fn.msite.clearCart()},getOfferProducts:function(){var t=Math.round;fn.ajaxForm({},"get","/checkout_oos/offerProducts").done(function(a){if(a=JSON.parse(a),"success"==a.status){var s=function(t){return""==t.pieces?t.net:t.pieces+" Pieces"},i=function(a,s,i,o){return"percentage"==i?t(a-a*s/100):"flat"==i?t(a-s):"nooffer"==i?0<o?t(a-a*o/100):a:a},o=function(t,s,i){return"percentage"==t?s+"% Off":"flat"==t?"&#8377; "+s+" Off":"delivery"==t?($(".deliver_bar").html("<span class=\"text\">"+a.delivery_free_message+"</span>"),"Free Delivery"):"nooffer"==t?0<i?i+"% Off":void 0:void 0};$(".sub-heading").html(a.title),$.map(a.data,function(t,a){var d=i(t.base_price,t.crosssell.value,t.crosssell.type,t.base_discount),r="nooffer"==t.crosssell.type&&0>=t.base_discount?"hide":"show",n="nooffer"==t.crosssell.type&&0>=t.base_discount||"delivery"==t.crosssell.type?"hide":"show",c="<div class=\"block prid_"+t.crosssell.product_id+" parentid_"+t.crosssell.parent_product_id+"\" data-prid=\""+t.crosssell.product_id+"\"><span class=\"offer_discount "+r+"\">"+o(t.crosssell.type,t.crosssell.value,t.base_discount)+" </span><div class=\"image\"><img data-src=\""+t.pr_image+"\"></div><div class=\"name\"><span class=\"text\">"+t.merchandise_name+"</span></div><div class=\"detail\"><span class=\"intial-price price "+n+"\">&#8377; "+t.base_price+"</span><span class=\"discount-price dis_price\">&#8377; "+d+"</span><span class=\"quantity\">"+s(t)+"</span></div><div class=\"add-item\" ><button class=\"add\" data-crosssellid=\""+t.crosssell.id+"\" data-prid=\""+t.crosssell.product_id+"\" data-offertype=\""+t.crosssell.type+"\" data-index = \""+a+"\" data-pr_name = \""+t.merchandise_name+"\" data-amount= \""+d+"\"> ADD</button></div></div>";$(".cross-sell-wrap").append(c)}),$(".add-item .add").on("click",function(t){t.stopPropagation(),$(".add-item .add").prop("disabled",!0);var a=$(this).data("prid"),s=$(this).data("crosssellid"),i=$(this).data("offertype"),o=$(this).data("index"),d=$(this).data("pr_name"),r=$(this).data("amount");fn.msite.addToCart(a,"1",s).done(function(t){resp=JSON.parse(t),"success"==resp.status&&(fn.msite.getOrderSummary(),$(".cross-sell-wrap").find(".prid_"+a).fadeOut(300,function(){$(this).remove(),1>$(".cross-sell-wrap").children(".block").length&&$(".cross-sell").hide()}),"delivery"==i?($(".deliver_bar").addClass("show"),setTimeout(function(){$(".deliver_bar").removeClass("show")},5e3)):$(".deliver_bar").removeClass("show"),fn.msite.home.GAEventOther("Cart - Cross Sell Module","CartModuleProductAddedtoCart",d+"-"+i,r))}).always(function(){$(".add-item .add").prop("disabled",!1)})}),fn.msite.getAllDOMImages()}else $(".cross-sell").hide()})},lockOrder:function(){$(".lock-order").on("click",function(t){t.stopImmediatePropagation(),$(".lock-order").prop("disabled",!0),fn.msite.showloader(),fn.ajaxForm({},"POST","/checkout_oos/order-lock").done(function(t){var a=JSON.parse(t);"success"==a.status&&"Stocks Locked"==a.message?(window.location.href="/customer/address",fbq("track","InitiateCheckout")):fn.msite.getOrderSummary(),fn.msite.hideloader()})})},getShipments:function(t){fn.ajaxForm({},"GET","/checkout_oos/get-shipments").done(function(a){a=JSON.parse(a);var s=[];$.map(a.shipments,function(t){s.push({id:t.id,delivery_type:t.delivery_type})}),localStorage.setItem("shipmentSlot",JSON.stringify([])),localStorage.setItem("shipmentInfo",JSON.stringify(s)),fn.msite.renderShipments(a,t)})},countProductShipment:function(t){var a={};return $.map(t.shipments,function(t){$.map(t.products,function(t){a[t.product_id]=a[t.product_id]?a[t.product_id]+parseInt(t.quantity):parseInt(t.quantity)})}),a},renderShipments:function(t,a){if("success"==t.status){1<t.shipments.length?$(".shipment-alert").css("display","block"):$(".shipment-alert").css("display","none");var s=JSON.parse(localStorage.getItem("shipmentSlot")),i=JSON.parse(localStorage.getItem("shipmentInfo")),o=fn.msite.countProductShipment(t),d=$(".whole-container"),r=t.shipments.length;d.html("");d.append("<div class=\"shipment-block1\"></div><div class=\"shipment-msg\">Tell us when you want these delivered !</div><div class=\"shipment-block2\"></div>"),$.map(t.shipments,function(t,a){var d=new Date(t.delivery_timestamp),n=d.getDate()+" "+fn.msite.months()[d.getMonth()],c=fn.msite.dayofDelivery(d),l="";l="EXPRESS"==t.delivery_type?"Delivered in <span class=\"text\">"+t.express_message:0==s.length?"<span class=\"text\">Select the delivery slot</span>":-1<s.indexOf(t.id)?c+" ("+n+")<span class=\"text\"> "+t.delivery_time:"<span class=\"text\">Select the delivery slot</span>";var p="",m=0;$.map(t.products,function(s){m+=parseInt(s.quantity);var i="    <div class=\"list\">        <img class=\"picture\" data-src=\"{{imageSRC}}\">        <div class=\"product_name\">            <span class=\"heading_font\">{{productName}}</span>            <div class=\"list_info {{bubble}}\">{{productWeight}}<span class=\"verticalLine\"></span>               <p class=\"size\">&#8377; {{Price}} </p><span class=\"verticalLine\"></span>Qty <span class = \"{{qtycolor}}\">{{shipmentQuantity}} <span class = \"msg\">{{ship_msg}}</span></span>                           </div>        </div><button class=\"item-remove\" data-prid={{pr_id}} data-name=\"{{productName}}\" data-price=\"{{Price}}\" data-qty=\"{{itemquantity}}\" data-shipmentid={{shipment_Id}}><span class=\"cross\" >&times;</span></button>    </div>";weight="",weight=s.pieces?s.pieces:s.net_wt,i=i.replace("{{imageSRC}}",s.image).replace("{{shipment_Id}}",t.id).replace("{{pr_id}}",s.product_id).replace("{{itemquantity}}",s.quantity).replace(/{{productName}}/g,s.product_name).replace("{{productWeight}}",weight).replace(/{{Price}}/g,s.base_price).replace("{{shipmentQuantity}}",s.shipment_quantity).replace("{{bubble}}",s.quantity<o[s.product_id]&&0==a?"bubble":"").replace("{{qtycolor}}",s.quantity<o[s.product_id]?"text-red":"").replace("{{ship_msg}}",s.shipment_info_message),p+=i});var u=" <div class=\"shipment-container\"> <div class=\"shipment\">      <div class=\"deliver\">          <p class=\"item\"><span class=\"text\">{{item}}</span> Items for <span class=\"text\">{{dayofDelivery}}</span> ({{deliveryDate}})</p>         <p class=\"part\"><span class=\"text\">{{containerNumber}} </span>of {{totalContainer}}</p>      </div>      <div class=\"total-shipment\">          <div class=\"deliver-time\" data-shipmentid = \"{{shipmentId}}\" data-length=\"{{totalContainer}}\">              <div class=\"inner-box slot{{shipId}}\" >                  <div class=\"time \">{{dropDownMessage}}</span></div>                  <div class=\"image unchecked\">                  </div>              </div>          </div>   {{items}}         <div class=\"wrap\">             <div class=\"list\">                 <p class=\"right\">Delivery Value: &#8377; {{deliveryValues}}</p>                 <p class=\"right\">Delivery Charge: &#8377; {{deliveyCharges}}</p>             </div>         </div>     </div> </div></div>";u=u.replace("{{item}}",m).replace("{{dropDownMessage}}",l).replace("{{containerNumber}}",a+1).replace(/{{totalContainer}}/g,r).replace("{{DeliveryDayDropdown}}",l).replace("{{Slot}}",t.delivery_time).replace("{{deliveryValues}}",parseFloat(t.shipment_total.total).toFixed(2)).replace("{{deliveyCharges}}",parseFloat(t.shipment_delivery_charge.total).toFixed(2)).replace("{{NumberOfItems}}",t.products.length).replace("{{dayofDelivery}}",c).replace("{{shipmentId}}",t.id).replace("{{shipId}}",t.id).replace("{{deliveryDate}}",n),u=u.replace(/{{items}}/,p),"EXPRESS"==i[a].delivery_type?($(".whole-container .shipment-block1").append(u),-1==s.indexOf(t.id)&&(s.push(t.id),localStorage.setItem("shipmentSlot",JSON.stringify(s)))):($(".shipment-msg").css("display","block"),$(".whole-container .shipment-block2").append(u)),s.length==i.length&&$(".whole-container .shipment-msg").hide()}),fn.msite.getAllDOMImages()}else a||fn.msite.showAlert("goto-cart",t.message);fn.msite.getShipmentSlots(),$(".whole-container .shipment-container .item-remove").on("click",function(t){t.stopImmediatePropagation(),elem=$(this),pr_delid=$(this).data("prid"),ship_id=$(this).data("shipmentid"),$(this).prop("disabled",!0),$(".screen-block").css("display","block"),fn.overflowY(),$(".pop-up .yes").on("click",function(t){t.stopImmediatePropagation(),fn.msite.showloader(),$(".pop-up .yes").prop("disabled",!0),$(".screen-block").css("display","none"),fn.bodyScroll(),fn.msite.deleteShipmentItem(pr_delid,ship_id).done(function(t){resp=JSON.parse(t),"success"==resp.status&&(fn.msite.hideloader(),fn.msite.home.GAEventOther("Cart","DeleteButtonClick",elem.data("name"),elem.data("price")*+elem.data("qty")),$(".whole-container .shipment-container .item-remove").prop("disabled",!1),!0==resp.empty?(fn.msite.showAlert("no_items",resp.empty_message||"No item in cart"),fn.msite.getShipments(resp.empty)):fn.msite.getShipments())}).always(function(){$(".whole-container .shipment-container .item-remove").prop("disabled",!1),$(".pop-up").find("yes").prop("disabled",!1),fn.bodyScroll()})}),$(".pop-up .no").on("click",function(){$(".screen-block").css("display","none"),fn.bodyScroll(),$(".whole-container .shipment-container .item-remove").prop("disabled",!1)})})},dayofDelivery:function(t){return t.getDate()==new Date().getDate()?"Today":t.getDate()==new Date().getDate()+1?"Tomorrow":t.getDate()==new Date().getDate()-1?"Yesterday":fn.msite.days()[t.getDay()]},getShipmentSlots:function(){$(".deliver-time").on("click",function(t){t.stopImmediatePropagation(),fn.msite.showloader();var a=$(this),s=a.data("length"),i=a.data("shipmentid");fn.ajaxForm({shipment_id:a.data("shipmentid")},"POST","/checkout_oos/get-slots").done(function(t){if(t=JSON.parse(t),t.status="success"){var o=a.data("shipmentid"),d="",r=$(".card.slot.slot-date ul"),n=$(".card.slot.slot-time ul"),c=$(".heading.active");r.html("");var l=0;$.map(t.slots,function(t,a){var i=new Date(t.timestamp),n=!0==t.selected?"selected":"";n&&(l=a,t.express_elligible&&(d=t.express_value));var c=" <li class = \"day "+n+"\" data-id = \""+o+"\" data-slots = \""+JSON.stringify(t.slots).replace(/"/g,"'")+"\"data-date = \""+t.date+"\"data-length = \""+s+"\" data-exp = \""+(!0==t.express_elligible?t.express_value:"")+"\" date-sel = \""+t.selected+"\">"+fn.msite.dayofDelivery(new Date(t.timestamp))+"<span>"+i.getDate()+" "+fn.msite.months()[i.getMonth()]+"</span></li>";r.append(c)}),fn.msite.renderSlots(t.slots[l].type,t.slots[l].slots,t.slots[l].date,o,s,d,t.slots[l].selected),fn.msite.slotClick(i),$(".slot-popup").show(),fn.overflowY(),fn.msite.hideloader()}else fn.msite.showAlert("no_items",t.message)})})},closeSlot:function(){$(".close-slot").on("click",function(){$(".slot-popup").hide(),fn.bodyScroll()})},renderSlots:function(t,a,s,i,o,d,r){var n=$(".card.slot.slot-time ul");$(".heading.active.popup").html("Slots for Delivery "+i+" of "+o),n.html(""),exprressSlot=r?"selected small":"small";0<d.trim().length&&(n.append(" <li class=\"{{class}}\" data-deltype=\"{{deltype}}\" data-id=\"{{id}}\" data-time=\"{{time}}\" data-date=\"{{date}}\" >{{slot}}</li>".replace("{{class}}",exprressSlot).replace("{{slot}}",d).replace("{{time}}",d).replace("{{date}}",s).replace("{{id}}",i).replace("{{deltype}}","EXPRESS")),$(".lock-slots").data("id",i),$(".lock-slots").data("date",s),$(".lock-slots").data("time",d),$(".lock-slots").data("deltype","EXPRESS")),$.map(a,function(a){var o=0==a.status?"n-a":"";a.selected&&(o+="selected",$(".slot-time li").removeClass("selected"),$(".lock-slots").data("deltype",t)),!0==a.selected&&($(".lock-slots").data("id",i),$(".lock-slots").data("date",s),$(".lock-slots").data("time",a.time)),n.append(" <li class=\"{{class}}\" data-deltype=\"{{deltype}}\" data-id=\"{{id}}\" data-time=\"{{time}}\" data-date=\"{{date}}\" >{{slot}}</li>".replace("{{class}}",o).replace("{{slot}}",a.time).replace("{{time}}",a.time).replace("{{date}}",s).replace("{{id}}",i).replace("{{deltype}}",t))}),fn.msite.selectShipmentSlot(),fn.msite.closeSlot()},slotClick:function(){$(".card.slot.slot-date ul li").on("click",function(t){t.stopImmediatePropagation();var a=$(this),s=a.find(".card.slot.slot-time ul");s.html("");var i=a.data("slots"),o=a.data("date"),d=a.data("id"),r=a.data("length"),n=a.data("exp"),c=a.data("exp-sel"),l=a.data("deltype");$(".card.slot.slot-date ul li").removeClass("selected"),a.addClass("selected"),i=i.replace(/'/g,"\""),i=JSON.parse(i),fn.msite.renderSlots(l,i,o,d,r,n,c)})},selectShipmentSlot:function(){$(".slot-time li").on("click",function(t){t.stopImmediatePropagation();var a=$(this),s=a.data("id");a.hasClass("n-a")||($(".lock-slots").data("old-id",$(".lock-slots").data("id")),$(".lock-slots").data("old-date",$(".lock-slots").data("date")),$(".lock-slots").data("old-time",$(".lock-slots").data("time")),$(".lock-slots").data("id",a.data("id")),$(".lock-slots").data("date",a.data("date")),$(".lock-slots").data("time",a.data("time")),$(".lock-slots").data("deltype",a.data("deltype")),$(".slot-time li").removeClass("selected"),a.addClass("selected"))})},lockSlots:function(){$(".lock-slots").on("click",function(){fn.msite.showloader();var t=$(this),a=t.data("id");fn.ajaxForm({shipment_id:t.data("id"),date:t.data("date"),time:t.data("time")},"POST","/checkout_oos/select-slot").done(function(s){var i=JSON.parse(localStorage.getItem("shipmentSlot")),o=JSON.parse(s);-1==i.indexOf(a)&&(i.push(a),localStorage.setItem("shipmentSlot",JSON.stringify(i)));var d=[],r=[];$.map(o.shipments,function(t){$.map(t.products,function(t){r.push(t.product_name),d.push(t.product_id)})}),fn.msite.renderShipments(o),$(".slot-popup").hide(),fn.bodyScroll(),fn.msite.hideloader(),clevertap.event.push("SlotSelection",{Date:t.data("date"),Time:t.data("time"),ShipmentId:t.data("id")})});var s=JSON.parse(localStorage.getItem("shipmentInfo"));shipmentSlot=JSON.parse(localStorage.getItem("shipmentSlot")),$.map(s,function(t){if(-1==shipmentSlot.indexOf(t.id)){var a=$(".inner-box.slot"+t.id);a.css("border","1px solid #de1e36"),a.find(".image").addClass("checked"),a.find(".image").removeClass("unchecked")}})})},logout:function(){$(".logout-profile").on("click",function(){fn.ajaxForm({},"POST","/customer/li-stock-release").done(function(t){JSON.parse(t);fn.ajaxForm({},"POST","/logout").done(function(t){var a=JSON.parse(t);"success"==a.status?(branch.logout(function(t,a){console.log(t,a)}),localStorage.setItem("user_onboard",!1),setTimeout(function(){window.location.href="/"},1500),localStorage.setItem("user_name",""),localStorage.setItem("user_contact",""),localStorage.setItem("user_email",""),localStorage.setItem("paytm_access_token",""),clevertap.logout()):window.location.reload()})}).fail(function(){fn.ajaxForm({},"POST","/logout").done(function(t){var a=JSON.parse(t);"success"==a.status?(localStorage.setItem("user_onboard",!1),window.location.href="/",localStorage.setItem("user_name",""),localStorage.setItem("paytm_access_token",""),clevertap.logout()):window.location.reload()})})})},lockShipments:function(){$(".lock-shipments").on("click",function(){var t=JSON.parse(localStorage.getItem("shipmentSlot")),a=JSON.parse(localStorage.getItem("shipmentInfo")),s=!1;s=!(t.length!=a.length),$(".delivery_slot").on("click",function(){$(".oos-alert").hide();var s=!1;$(".msite-whole-wrapper").removeClass("fix"),$.map(a,function(a){if(-1==t.indexOf(a.id)){!1==s&&(s=!0,slot=a.id);var i=$(".inner-box.slot"+a.id);i.css("border","1px solid #de1e36"),i.find(".image").addClass("checked"),i.find(".image").removeClass("unchecked")}!0==s&&$(window).scrollTop($(".slot"+slot).offset().top-90)})}),!0==s?(fn.msite.showloader(),fn.ajaxForm({},"POST","/checkout_oos/lock-shipment").done(function(t){var a=JSON.parse(t);"success"==a.status&&"Stocks Locked"==a.message?fn.ajaxForm({},"POST","/checkout_oos/get-user").done(function(t){fn.msite.hideloader();var a=JSON.parse(t);"success"==a.status&&(fn.msite.setFinalPayment(parseInt(100*a.data.cart.cart_subtotal)),localStorage.setItem("payable_wallet_amt",a.data.wallet.payable_wallet_amount),window.location.href="/delivery-summary")}):fn.msite.showAlert("goto-cart",a.message)})):fn.msite.showAlert("delivery_slot","Please select time-slots for the deliveries.")})},add_alert:function(t,a){var s=$(".add_message");s.html("<img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png\" alt=\"Info\">"+a+"<span>&times;</span>").show(),"hide"==t?setTimeout(function(){$(".add_message").hide()},3e3):"stay"==t?s.find("span").show():"remove"==t&&s.hide(),s.find("span").on("click",function(){s.hide()}),fn.msite.getAllDOMImages()},showAlert:function(t,a){var s=$(".oos-alert");switch(t){case"address":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert [Change in Delivery address]</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.change-addr").addClass("show"),s.find(".ctas button.review-cart").addClass("show"),s.find(".content .message").html(a||"We have detected a change in your Delivery address.The Above will affect the Product availability, pricing, offers and more..");break;case"no_items":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert [Cart Empty]</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.continue-shopping").addClass("show"),s.find(".content .message").html(a),$(".add_message").hide();break;case"wallet_notif":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert [Wallet Loaded]</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.continue-shopping").addClass("show"),s.find(".content .message").html(a.msg+"<p> Available balance is "+a.bal+"</p>");break;case"notif":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert [Change Product availability]</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.dismiss").addClass("show"),s.find(".content .message").html(a);break;case"review":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert [Change in Delivery address]</div>"),s.find(".content .message").html(a);break;case"pay_fail":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert [Error]</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.go-cart").addClass("show"),s.find(".content .message").html(a);break;break;case"goto-cart":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.go-cart").addClass("show"),s.find(".content .message").html(a);break;case"select-addr":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.dismiss").addClass("show"),s.find(".content .message").html(a||"Please select any of the addresses");break;case"generic_notif":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.continue-shopping").addClass("show"),s.find(".content .message").html("<p> Something  went wrong, Please Try Again... </p>");break;case"offer_modified":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Alert [Change Product availability]</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.view-cart").addClass("show"),s.find(".content .message").html(a);break;case"delivery_slot":s.find(".header").html("<div><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png\" alt = \"Alert!\"/></div><div>Forgot to select your delivery slots ?</div>"),s.find(".ctas button").removeClass("show"),s.find(".ctas button.delivery_slot").addClass("show"),s.find(".content .message").html(a);}fn.msite.getAllDOMImages(),s.show(),fn.msite.alertCtas(),fn.msite.reviewCart()},alertCtas:function(){$(".continue-shopping").on("click",function(){window.location.href.includes("pastorder")||window.location.href.includes("favourite")?window.location.reload():window.location.href="/"}),$(".ok").on("click",function(){window.location.href="/customer/cart-summary"}),$(".cancelbtn").on("click",function(){$(".checkout-oos-alert").hide()}),$(".load-money-failed").on("click",function(){$(".checkout-oos-alert").hide()}),$(".go-cart").on("click",function(){ga("send",{hitType:"event",eventCategory:"SL-Address Alert - Review Cart",eventAction:"Click",eventLabel:""}),window.location.href="/cart"}),$(".change-addr").on("click",function(){ga("send",{hitType:"event",eventCategory:"SL-Address Alert - Change Address",eventAction:"Click",eventLabel:""}),localStorage.setItem("default_addr_id",""),$(".address-wrapper").find(".list").removeClass("selected"),$(".edit-btn").attr("disabled",!0),$(".delete-btn").attr("disabled",!0),$(".oos-alert").hide(),$(".checkout-oos-alert").hide(),window.location.href="/customer/address"}),$(".dismiss").on("click",function(){$(".oos-alert").hide(),$(".checkout-oos-alert").hide()}),$(".view-cart").on("click",function(){$(".oos-alert").hide(),$(".checkout-oos-alert").hide()}),$(".ctas .viewcart").on("click",function(){window.location.href="/customer/cart"}),$("button.upi-stay").on("click",function(){$(".checkout-oos-alert").hide()}),$("button.reload-page").on("click",function(){$(".checkout-oos-alert").hide(),window.location.reload()})},reviewCart:function(){$(".review-cart").on("click",function(t){t.stopImmediatePropagation(),ga("send",{hitType:"event",eventCategory:"SL-Address Alert - Review Cart",eventAction:"Click",eventLabel:""}),fn.msite.updateCartLocation(localStorage.getItem("default_lat"),localStorage.getItem("default_lng")).done(function(t){var a=JSON.parse(t);"LOCATION_CHANGED"==a.status?fn.msite.updateHub(a.data).done(function(t){var a=JSON.parse(t);"success"==a.status&&(window.location.href="/customer/cart")}):alert(a.message)})})},continueCheckout:function(){$(".continue-checkout").on("click",function(){var t=localStorage.getItem("default_pincode"),a=localStorage.getItem("default_addr_id"),s=localStorage.getItem("default_lat"),i=localStorage.getItem("default_lng");a&&parseInt(a)?(fn.msite.showloader(),fn.msite.changeAddr(s,i).done(function(t){var a=JSON.parse(t);"LOCATION_CHANGED"==a.status?fn.msite.showAlert("address",a.message):"ERROR"==a.status?fn.msite.showAlert("no_items",a.message):"SERVICABLE"==a.status&&a.data?fn.msite.updateHub(a.data).done(function(){window.location.href="/deliveryinfo"}):window.location.href="/deliveryinfo",fn.msite.hideloader()})):fn.msite.showAlert("select-addr","Please add address or select any of addresses")})},rendershipmentSummery:function(t){$(".whole-container").html(""),$.map(t,function(t){var s=new Date(t.delivery_timestamp),a="",i="",a="<div class = \"shipment\"><div class=\"deliver\">Delivered <span class=\"text\">"+function(t){return t.getDate()==new Date().getDate()?"Today":t.getDate()==new Date().getDate()+1?"Tomorrow":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]}(s)+"</span> ("+function(){var t=s.getDate(),a=s.getMonth(),i=s.getFullYear();return t+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a]}(s)+")</div>",o="<span class=\"order-time\"><span class=\"text\">"+function(a){return""==a?t.delivery_time:"In "+t.express_message}(t.express_message)+"</span></span>";$.map(t.products,function(t){pr_weight=t.pieces?t.pieces:t.weight;var a="",s="";t.product_type&&"COMP"==t.product_type?(a="comp_product",s="<p class=\"size text-red\"> Free</p>"):s="<p class=\"size\">&#8377; "+t.base_price+"</p>";var o="<div class=\"list "+a+"\"><img class=\"picture\" data-src = \""+t.image+"\"><div class=\"product_name\"><span class=\"heading_font\">"+t.product_name+"</span><div class=\"list_info\">"+pr_weight+"<span class =\"verticalLine\"></span>"+s+"<span class=\"verticalLine\"></span><span class=\"alert\">Qty "+t.shipment_quantity+"</span></div></div></div>";t.product_type&&"COMP"==t.product_type?i=o+i:i+=o}),i+="<div class=\"wrap\"><div class=\"list\"><p class=\"right\">Delivery Value: &#8377;  "+parseFloat(t.shipment_total.total).toFixed(2)+"</p><p class=\"right\">Delivery Charge: &#8377; "+parseFloat(t.shipment_delivery_charge.total).toFixed(2)+"</p></div></div>",$(".whole-container").append("<div class=\"shipment-container\">"+a+"<div class=\"total-shipment\">"+o+i+"</div></div></div>"),fn.msite.getAllDOMImages()})},getShipmentsSummary:function(){fn.ajaxForm({},"GET","/checkout_oos/get-shipment-summary").done(function(t){var t=JSON.parse(t);if(t.status="success"){$(".whole-container").html(""),fn.msite.rendershipmentSummery(t.shipments);var a="<div class=\"wrapper sub-total\"><div class=\"field_name\">Subtotal</div><div class=\"amount\">&#8377; "+parseFloat(t.cart_summary.total.value).toFixed(2)+"</div></div><div class=\"wrapper delivery-charge\"><div class=\"field_name\">Delivery Charges</div><div class=\"amount\">&#8377; "+parseFloat(t.cart_summary.shipping.value).toFixed(2)+"</div></div><div class=\"wrapper discount\"><div class=\"field_name\">Discount</div><div class=\"amount \">&#8377; "+parseFloat(t.cart_summary.discount.value).toFixed(2)+"</div></div><hr class=\"underline\"></hr><div class=\"wrapper\"><div class=\"total_amount total-amt\"><div class=\"field_name\">Amount to Pay</div><div class=\"amount\">&#8377;"+parseFloat(t.cart_summary.subtotal.value).toFixed(2)+"</div></div></div><div class=\"Shipment-edit\"><div class = \"editadd\"><a class=\"nav-dark\" href=\"/deliveryinfo\"> Edit my Slots</a></div><div class = \"continue continue-pay\">Continue</div></div>";$(".detail").html(""),$(".detail").append(a),fn.msite.setFinalPayment(parseInt(100*t.cart_summary.subtotal.value)),fn.msite.continuePay();var s=[],i=[],o=[],d=[];$.map(t.shipments,function(t){o.push(t.delivery_type),"EXPRESS"==t.delivery_type?d.push(t.delivery_date+" & "+t.express_message):d.push(t.delivery_date+" & "+t.delivery_time),$.map(t.products,function(t){i.push(t.product_name),s.push(t.product_id)})}),localStorage.setItem("delivery_type",o),localStorage.setItem("delivery_slot",d)}else fn.msite.showAlert("generic_notif","")})},pushEEAddToCart:function(t){t=JSON.parse(t);var a={};try{if(t.product){var s=t.product,i=[],o=s.product_id,d=s.product_name,r=s.category_id,n=s.base_price,c=s.quantity;if(start_checkout_obj.product_id=s.product_id,start_checkout_obj.product_name=s.product_name,start_checkout_obj.quantity=c,start_checkout_obj["Category ID"]=fn.getCategoryId(),a={item_id:o,item_name:d,item_category:r,price:n,quantity:c,currency:"INR"},fn.msite.branchIO.addEvent("add_to_cart",a),i.push(a),window.dataLayer){var l=window.dataLayer;l.push({event:"add_to_cart",ecommerce:{currencyCode:"INR",add:{products:i}}})}}start_checkout_obj.cart_value=t.total,start_checkout_obj.city_name=fn.getCityFromLS(),start_checkout_obj.hub_id=fn.getHubFromLS(),start_checkout_obj.total_items=t.item_count,start_checkout_obj.from_module=fn.loyalty_list}catch(t){fn.msite.branchIO.branchLogErr(t,a,"add_to_cart - catch")}},checkForCombo:function(t,a){return $.map(t.combo,function(s){s.product_id==a&&(console.log("checkForCombo called"),t.product=s)}),console.log("checkForCombo",t),t},addToCart:function(t,a,s){return fn.ajaxForm({quantity:a,product_id:t,crosssell_id:s},"POST","/checkout_oos/cart-item-update").done(function(a){return a&&(resp=JSON.parse(a),a=resp.product?resp:fn.msite.checkForCombo(resp,t),a=JSON.stringify(resp),fn.msite.pushEEAddToCart(a)),a})},pushEERemoveToCart:function(t){t=JSON.parse(t);var a={};try{if(t.product){var s=t.product,i=[],o=s.product_id,d=s.product_name,r=s.category_id,n=s.base_price,c=s.quantity;if(a={item_id:o,item_name:d,item_category:r,price:n,quantity:c,currency:"INR"},fn.msite.branchIO.addEvent("remove_from_cart",a),i.push(a),window.dataLayer){var l=window.dataLayer;l.push({event:"remove_from_cart",ecommerce:{currencyCode:"INR",remove:{products:i}}})}}}catch(t){fn.msite.branchIO.branchLogErr(t,a,"remove_from_cart - catch")}},removeFromCart:function(t,a){return fn.ajaxForm({quantity:a,product_id:t},"POST","/checkout_oos/cart-item-update").done(function(t){return t&&fn.msite.pushEERemoveToCart(t),t})},deleteFromCart:function(t){return fn.ajaxForm({product_id:t},"POST","/checkout_oos/cart-item-delete").done(function(t){return t&&fn.msite.pushEERemoveToCart(t),t})},deleteShipmentItem:function(t,a){return fn.ajaxForm({product_id:t,shipment_id:a},"GET","/checkout_oos/delete-shipment-item")},updateSummary:function(t,a){$(".total-value").find(".total-amt span").html(a),$(".total-value").find(".items-count span").html(t)},toast:function t(a,s){var t=$(".toast");t.html(a).addClass("stay"),setTimeout(function(){t.removeClass("stay")},s)},addCart:function(){$(".add-one").on("click",function(){var t=$(this),a=t.data("prid"),s=t.data("stock"),i=t.parent().find(".item-count"),o=parseInt(i.data("count"));o+=1,o<=s?(fn.msite.showloader(),fn.msite.addToCart(a,o).done(function(t){t=JSON.parse(t),(t.status="success")?(i.html(o),i.data("count",o),""==t.message?fn.msite.add_alert("remove",t.message):fn.msite.add_alert("hide",t.message),fn.msite.updateCartQuantity(t.item_count),fn.msite.home.updateCart(t,"add"),fn.msite.setFinalPayment(parseInt(100*t.grand_total)),fn.msite.hideloader()):fn.msite.add_alert("hide","Only "+t.stock+" units are available")})):fn.msite.add_alert("hide","Only "+s+" units are available")}),$(".add-to-cart-btn").on("click",function(){var t=$(this),a=t.next().find(".add-one"),s=a.data("prid"),i=t.parent().find(".add-one").data("stock"),o=t.next().find(".item-count"),d=1;d<=i?(fn.msite.showloader(),fn.msite.addToCart(s,d).done(function(a){a=JSON.parse(a),(a.status="success")?(o.html(d),o.data("count",d),""==a.message?fn.msite.add_alert("remove",a.message):fn.msite.add_alert("hide",a.message),t.parent().addClass("slide"),fn.msite.updateCartQuantity(a.item_count),fn.msite.home.updateCart(a,"add"),fn.msite.setFinalPayment(parseInt(100*a.grand_total)),fn.msite.hideloader()):fn.msite.add_alert("hide","Only "+i+" units are available")})):fn.msite.add_alert("hide","Only "+i+" units are available")})},removeCart:function(){$(".remove-one").on("click",function(){var t=$(this),a=t.data("prid"),s=t.parent().find(".item-count"),i=s.data("count");i-=1,1<=i?($(".pdpcart").show(),fn.msite.showloader(),fn.msite.removeFromCart(a,i).done(function(t){t=JSON.parse(t),"success"==t.status?(s.html(i),s.data("count",i),""==t.message?fn.msite.add_alert("remove",t.message):fn.msite.add_alert("hide",t.message),fn.msite.updateCartQuantity(t.item_count),fn.msite.home.updateCart(t,"remove"),fn.msite.setFinalPayment(parseInt(100*t.grand_total)),fn.msite.hideloader(),clevertap.event.push("Product Removed from Cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,Price:t.product.base_price})):fn.msite.showAlert("generic_notif","")})):fn.msite.deleteFromCart(a).done(function(a){$(".pdpcart").hide(),a=JSON.parse(a),"success"==a.status?(t.parent().parent().removeClass("slide"),""!=a.message&&fn.msite.add_alert("hide",a.message),fn.msite.updateCartQuantity(a.items_count),fn.msite.home.updateCart(a,"remove"),fn.msite.setFinalPayment(parseInt(100*a.cart.subtotal)),fn.msite.hideloader(),clevertap.event.push("Product Removed from Cart",{"Product ID":a.product.product_id,"Product Name":a.product.product_name,Price:a.product.base_price})):fn.msite.showAlert("generic_notif","")})})},addCartCheckout:function(){$(".add-one").on("click",function(){var t=$(this),a=t.data("prid"),s=t.data("stock"),i=t.parent().find(".total-count"),o=parseInt(i.data("count"));if(o+=1,o<=s)fn.msite.showloader(),t.css("pointer-events","none"),fn.msite.addToCart(a,o).done(function(a){if(a=JSON.parse(a),a.status="success"){i.html(o),i.data("count",o),""==a.message?(fn.msite.add_alert("remove",a.message),$(".lock-order").prop("disabled",!1)):fn.msite.add_alert("hide",a.message),$(".items-count").find("span").html(a.item_count);var s=" &#8377; "+a.total.toFixed(2);$(".total-amt").find("span").html(s),fn.msite.setFinalPayment(parseInt(100*a.grand_total)),fn.msite.home.updateCart(a,"add"),clevertap.event.push("Add - Item",{Source:"CartView","Product Name":a.product.product_name,Discount:a.product.discount,"Offer Name":a.product.offer_type,"New Cart Value":+a.total,"Delivery Charge":+a.shipping_charge,"Saved Amount":"","is discounted item":a.product.offer_discount,"City Name":fn.cityName,"Hub ID":fn.hubId});var d={"Product Name":a.product.product_name,Discount:a.product.discount,"Offer Name":a.product.offer_type,"New Cart Value":+a.total,"Delivery Charge":+a.shipping_charge,"Saved Amount":"","is discounted item":a.product.offer_discount,"City Name":fn.cityName,"Hub ID":fn.hubId};ga("send",{hitType:"event",eventCategory:"CartView",eventAction:"Cart_Add",eventLabel:JSON.stringify(d)}),fbq("track","AddToCart",{content_type:"product",content_ids:[a.product.product_id],content_name:a.product.product_name,content_category:a.product.category_name,value:a.product.base_price,currency:"INR"});t.data("index");li_fn.checkout.getCartData().then(function(){})["finally"](function(){t.css("pointer-events","all"),fn.msite.hideloader()})}else fn.msite.hideloader(),fn.msite.showAlert("generic_notif","")});else{var d={Source:"CartView","Product Name":t.data("prname"),Discount:t.data("discount"),"New Cart Value":localStorage.getItem("cart_withoutshipping"),Quantity:o,"is discounted item":t.data("offer_discount"),"City Name":fn.cityName,"Hub ID":fn.hubId};ga("send",{hitType:"event",eventCategory:"CartView",eventAction:"Cart_Add_OOS",eventLabel:JSON.stringify(d)}),clevertap.event.push("Cart - Add Out of stock",d),fn.msite.add_alert("hide","Only "+s+" units are available")}})},removeCartCheckoutSuccess:function(t,a,s,i,o){s.addClass("clicked");var d=s.parent().find(".total-count"),r=d.data("count"),n="none"!=$(".overdue-popup").css("display");r-=1,1<=r?(fn.msite.showloader(),s.css("pointer-events","none"),fn.msite.removeFromCart(i,r).done(function(t){if(t=JSON.parse(t),"success"==t.status){d.html(r),d.data("count",r);s.data("index");$(".items-count").find("span").html(t.item_count);var a=" &#8377; "+t.total.toFixed(2);$(".total-amt").find("span").html(a),fn.msite.setFinalPayment(parseInt(100*t.grand_total)),fn.msite.home.updateCart(t,"remove"),s.removeClass("clicked");var i={Source:"CartView","Product Name":t.product.product_name,Discount:t.product.discount,"Offer Name":t.product.offer_type,"New Cart Value":+t.total,"Delivery Charge":+t.shipping_charge,"Saved Amount":"","is discounted item":t.product.offer_discount,"City Name":fn.cityName,"Hub ID":fn.hubId,is_combo:+o};clevertap.event.push("Remove - Item",i);var c={"Product Name":t.product.product_name,Discount:t.product.discount,"Offer Name":t.product.offer_type,"New Cart Value":+t.total,"Delivery Charge":+t.shipping_charge,"Saved Amount":"","is discounted item":t.product.offer_discount,"City Name":fn.cityName,"Hub ID":fn.hubId};ga("send",{hitType:"event",eventCategory:"CartView",eventAction:"Cart_Remove",eventLabel:JSON.stringify(c)}),li_fn.checkout.getCartData().then(function(){0<+o&&(n?($(".combo-removal-msg").show(),$(".overdue-popup").hide(),setTimeout(function(){$(".combo-removal-msg").hide(),$(".overdue-popup").show()},5e3)):($(".combo-removal-msg").show(),setTimeout(function(){$(".combo-removal-msg").hide()},5e3)))})["finally"](function(){s.css("pointer-events","all"),fn.msite.hideloader()})}else fn.msite.hideloader(),fn.msite.showAlert("generic_notif","")}).always(function(){})):(fn.msite.showloader(),fn.msite.deleteFromCart(i).done(function(t){if(t=JSON.parse(t),t.status="success"){s.parent().parent().removeClass("slide"),$(".cross-sell-wrap").find(".parentid_"+i).remove(),1>$(".cross-sell-wrap").children(".block").length&&$(".cross-sell").hide(),t.show_popup&&fn.msite.showAlert("offer_modified",t.web_popup_message);s.data("index");1>t.quantity&&$(".order-items").find("[data-prid=\""+i+"\"]").remove(),$(".items-count").find("span").html(t.items_count);var a=" &#8377; "+t.cart.total.toFixed(2);$(".total-amt").find("span").html(a),fn.msite.setFinalPayment(parseInt(100*t.cart.subtotal)),fn.msite.home.updateCart(t,"remove"),s.removeClass("clicked");var d={Source:"CartView","Product Name":t.product.product_name,Discount:+t.cart.discount,"New Cart Value":+t.cart.total,"Delivery Charge":+t.cart.shipping,"Saved Amount":"","is discounted item":t.product.offer_discount,"City Name":fn.cityName,"Hub ID":fn.hubId,is_combo:+o};clevertap.event.push("Remove - Item",d);var r={"Product Name":t.product.product_name,Discount:+t.cart.discount,"New Cart Value":+t.cart.total,"Delivery Charge":+t.cart.shipping,"Saved Amount":"","is discounted item":t.product.offer_discount,"City Name":fn.cityName,"Hub ID":fn.hubId};ga("send",{hitType:"event",eventCategory:"CartView",eventAction:"Cart_Remove",eventLabel:JSON.stringify(r)}),li_fn.checkout.getCartData(),0<+o&&(n?($(".combo-removal-msg").show(),$(".overdue-popup").hide(),setTimeout(function(){$(".combo-removal-msg").hide(),$(".overdue-popup").show()},5e3)):($(".combo-removal-msg").show(),setTimeout(function(){$(".combo-removal-msg").hide()},5e3)))}else fn.msite.showAlert("generic_notif","")}).always(function(){fn.msite.hideloader()}))},removeCartCheckout:function(t,a,s){$(".remove-one").on("click",function(){if(!$(this).hasClass("clicked")){var i=$(this),o=i.data("prid"),d=$(this).data("is_combo_child"),r=$(this).data("title"),n=$(this).data("description"),c=$(this).data("alert_message");if(d){var l=fn.lsFindProduct(o);$(".combo-popup-header").html(r),$(".combo-popup-text").html(n),$(".action-yes").html("Remove"),$(".action-no").html("Don't remove"),$(".combo-popup").addClass("show"),$(".action-yes").unbind("click"),$(".action-yes").click(function(){$(".combo-popup").removeClass("show"),$(".combo-removal-msg").html(c),fn.msite.removeCartCheckoutSuccess(t,a,i,o,"1")}),$(".action-no").click(function(){if(!!s){var t={Source:"CartView","Product Name":l.product_name,Discount:+s.data.discount,"New Cart Value":+s.data.cart_total,"Delivery Charge":+s.data.shipping,"Saved Amount":"","is discounted item":l.offer_discount,"City Name":fn.cityName,"Hub ID":fn.hubId};clevertap.event.push("Cart_ComboModal_DontRemove",t)}$(".combo-popup").removeClass("show")}),$(".cross").click(function(){if(!!s){var t={Source:"CartView","Product Name":l.product_name,Discount:+s.data.discount,"New Cart Value":+s.data.cart_total,"Delivery Charge":+s.data.shipping,"Saved Amount":"","is discounted item":l.offer_discount,"City Name":fn.cityName,"Hub ID":fn.hubId};clevertap.event.push("Cart_ComboModal_DontRemove",t)}$(".combo-popup").removeClass("show")})}else fn.msite.removeCartCheckoutSuccess(t,a,i,o,"0")}})},continuePay:function(){$(".continue-pay").on("click",function(){fn.msite.showloader(),fn.ajaxForm({},"POST","/checkout_oos/lock-shipment").done(function(t){var a=JSON.parse(t);"success"==a.status&&"Stocks Locked"==a.message?(fn.msite.showloader(),fn.ajaxForm({},"POST","/checkout_oos/get-user").done(function(t){var a=JSON.parse(t);"success"==a.status&&(fn.msite.setFinalPayment(parseInt(100*a.data.cart.cart_subtotal)),localStorage.setItem("payable_wallet_amt",a.data.wallet.payable_wallet_amount),localStorage.setItem("licious_cash",a.data.wallet.licious_cash),fn.msite.hideloader(),window.location.href="/payments")})):fn.msite.showAlert("goto-cart",a.message)})})},resend_Otp:function(t){fn.ajaxForm({phone:t},"POST","/checkout_oos/otp-signup").done(function(t){var a=JSON.parse(t);"success"==a.status?($("#otp").val(""),$(".otp_sent").addClass("show"),setTimeout(function(){$(".otp_sent").removeClass("show")},4e3)):($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html(a.message),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3))})},social_resend_Otp:function(t,a){fn.ajaxForm({phone:$(".socialMobilenumber").val(),customer_key:a},"POST","/checkout_oos/otp-sent-social").done(function(t){var a=JSON.parse(t);"success"==a.status?($(".mob_otp").val(""),$(".otp_sent").addClass("show"),setTimeout(function(){$(".otp_sent").removeClass("show")},4e3)):($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html(a.message),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3))})},userIdentify:function(t){$(".proceed-login").on("click",function(a){a.stopImmediatePropagation(),$(".edit_mobile").addClass("show"),$(".edit_mobile").attr("data-mobile",$(".mobile-number").val()),$(".edit_social_mobile").attr("data-mobile",$(".socialMobilenumber").val()),$(".mobile-number").attr("disabled",!0),fn.msite.showloader(),fn.ajaxForm({phone:$(".mobile-number").val()},"POST","/checkout_oos/otp-signup").done(function(a){var s=JSON.parse(a);if("success"==s.status){$(".otp_sent").addClass("show"),setTimeout(function(){$(".otp_sent").removeClass("show")},4e3),$(".login-type").addClass("show"),$(".loginwith-otp").addClass("show"),$(".proceed-login").addClass("hide");var i=s.data.new_customer;localStorage.setItem("customer_type",s.data.new_customer),localStorage.setItem("newcustomer",i),i?$(".loginwith-otp .confirm-login").html("Sign Up"):$(".loginwith-otp .confirm-login").html("Login"),$(".otp_login").on("click",function(){$(".loginwith-otp").addClass("show"),$(".loginwith-password").removeClass("show"),$(".otp_login").addClass("active"),$(".pass_login").removeClass("active"),$(".new-user").removeClass("show"),i?$(".loginwith-otp .confirm-login").html("Sign Up"):$(".loginwith-otp .confirm-login").html("Login")}),$(".pass_login").on("click",function(){$(".loginwith-otp").removeClass("show"),$(".pass_login").addClass("active"),$(".otp_login").removeClass("active"),$(".loginwith-password").addClass("show"),i?($(".loginwith-password .new-user").addClass("show"),$(".loginwith-password .existing-user").removeClass("show"),$(".loginwith-password .confirm-login").html("Sign Up")):($(".loginwith-password .existing-user").addClass("show"),$(".loginwith-password .confirm-login").html("Login"),$(".loginwith-password .new-user").removeClass("show"))});var o,d;$(".confirm-login.otp").on("click",function(t){t.stopImmediatePropagation(),d=$("#otp").val(),""==d||null==d?($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Please Enter Your otp"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3)):fn.msite.verifyUser($(".mobile-number").val(),d)}),$(".confirm-login.password").on("click",function(a){a.stopImmediatePropagation(),d=$("#newuser_otp").val();var s=localStorage.getItem("newcustomer");if("true"==s){var i=$("#new_password").val(),r=$("#confirm_pass").val(),n=$("#confirm_pass").val();""==i||""==r||""==n?($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Please Enter All Fields"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3)):6>i.length||6>r.length?($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Please Enter Minimum 6 Characters"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3)):i==r?(o=$("#confirm_pass").val(),""!=o&&fn.msite.verifyUser($(".mobile-number").val(),d,o)):($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Passwords Don't Match"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3))}else{var c=$(".exist_password").val();if(!1==forgot&&(""==c?($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Please Enter Your Password"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show"),$(".login-error-msg").addClass("hide")},4e3)):fn.msite.existingVerifyPassword(t,c)),!0==forgot){var i=$("#new_password").val(),r=$("#confirm_pass").val(),n=$("#newuser_otp").val();""==i||""==r||""==n?($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Please Enter all Fields"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3)):6>i.length||6>r.length?($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Please Enter Minimum 6 Characters"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3)):i==r?(o=$("#confirm_pass").val(),""!=o&&fn.msite.verifyUser($(".mobile-number").val(),n,o)):($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Passwords Don't Match"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3))}}}),$(".text-wrap .resend_otp_exist").on("click",function(){})}else $(".login-error-msg").removeClass("hide"),$(".login-error-msg").html(s.message),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show"),$(".login-error-msg").addClass("hide")},4e3);fn.msite.hideloader()})}),$(".text-wrap .resend_otp_new").on("click",function(a){a.stopImmediatePropagation(),"true"==localStorage.getItem("newcustomer")?ga("send",{hitType:"event",eventCategory:"Sign Up",eventAction:"Click",eventLabel:"Resend OTP"}):ga("send",{hitType:"event",eventCategory:"Log In",eventAction:"Click",eventLabel:"Resend OTP"}),fn.msite.resend_Otp(t)}),$(".text-wrap .resend_otp_exist").on("click",function(a){a.stopImmediatePropagation(),"true"==localStorage.getItem("newcustomer")?ga("send",{hitType:"event",eventCategory:"Sign Up",eventAction:"Click",eventLabel:"Resend OTP"}):ga("send",{hitType:"event",eventCategory:"Log In",eventAction:"Click",eventLabel:"Resend OTP"}),fn.msite.resend_Otp(t)}),$(".text-wrap .forgot_password").on("click",function(a){a.stopImmediatePropagation(),fn.msite.resend_Otp(t),forgot=!0,$(".loginwith-password .new-user").addClass("show"),$(".loginwith-password .existing-user").removeClass("show"),$(".confirm-login.password").html("Reset Password"),ga("send",{hitType:"event",eventCategory:"Log In",eventAction:"Click",eventLabel:"Forgot Password"})})},socialLogin:function(t){var a=$(".social-proceed-login").prop("data-custkey");$(".social-proceed-login").on("click",function(t){t.stopImmediatePropagation(),fn.msite.showloader(),fn.ajaxForm({phone:$(".socialMobilenumber").val(),customer_key:a},"POST","/checkout_oos/otp-sent-social").done(function(t){var a=JSON.parse(t);"success"==a.status?($(".verify-login").addClass("show"),$(".social-otp").addClass("show"),$(".social-proceed-login").removeClass("show"),$(".social-proceed-login").removeClass("enable"),$(".edit_social_mobile").addClass("show"),$(".socialMobilenumber").attr("disabled",!0),$(".otp_sent").addClass("show"),setTimeout(function(){$(".otp_sent").removeClass("show")},4e3),localStorage.setItem("social_newcustomer",a.data.new_customer),!1==a.data.new_customer&&"Existing User"==a.message&&($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html(a.message),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3))):($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html(a.message),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3),ga("send",{hitType:"event",eventCategory:"Sign Up",eventAction:"Error",eventLabel:"Mobile number already exists"})),fn.msite.hideloader()})}),$(".social-resend").on("click",function(s){s.stopImmediatePropagation(),fn.msite.social_resend_Otp(t,a),ga("send",{hitType:"event",eventCategory:"Sign Up",eventAction:"Click",eventLabel:"Resend OTP"})}),$(".verify-login").on("click",function(s){s.stopImmediatePropagation(),mob_otp=$(".mob_otp").val(),""==mob_otp?($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Please Enter otp"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3)):fn.msite.verifySocialUser(t,mob_otp,a)})},resetLogin:function(){$(".login-type").removeClass("show"),$(".loginwith-otp").removeClass("show"),$(".loginwith-password").removeClass("show"),$(".new-user").removeClass("show"),$(".existing-user").removeClass("show"),$(".proceed-login").removeClass("enable"),$(".proceed-login").removeClass("hide"),$(".pass_login").removeClass("active"),$(".otp_login").addClass("active"),$(".mobile-number").val(""),$("#newuser_otp").val(""),$("#new_password").val(""),$("#confirm_pass").val(""),$("#otp").val(""),$(".exist_password").val(""),$(".exist_password").val(""),$(".edit_mobile").removeClass("show"),$(".verify-login").removeClass("show"),$(".edit_social_mobile").removeClass("show"),$(".mobile-number").removeAttr("disabled"),$(".socialMobilenumber").removeAttr("disabled"),$(".verify-social").removeClass("show"),$(".social-otp").removeClass("show"),$(".mob_otp").val(""),$("#social-mobile").val(""),$(".whole-wrapper").addClass("show"),$(".confirm-login.password").html("Login"),forgot=!1},validateNumber:function(t,a){console.log(a),document.querySelector("."+t).addEventListener("keyup",function(t){t.stopImmediatePropagation();var s=t.target.value;$(".proceed-login").attr("disabled",!0),$(".social-proceed-login").attr("disabled",!0),9<s.length?/^[6789]\d{9}$/.test(s)?("social"==a?($(".social-proceed-login").removeAttr("disabled"),$(".social-proceed-login").addClass("enable"),fn.msite.socialLogin(s)):"notify"===a?$(".proceed-notify").addClass("enable"):($(".proceed-login").removeAttr("disabled"),$(".proceed-login").addClass("enable"),fn.msite.userIdentify(s)),t.preventDefault(),$(".mobile-number").removeAttr("disabled"),$(".socialMobilenumber").removeAttr("disabled")):($(".proceed-notify").removeClass("enable"),$(".social-proceed-login").removeClass("enable"),$(".proceed-login").removeClass("enable"),$(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Invalid Mobile Number"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show"),$(".login-error-msg").addClass("hide")},4e3)):($(".proceed-login").removeClass("enable"),$(".social-proceed-login").removeClass("enable"))})},loginRedirect:function(){var t=localStorage.getItem("utm_page");null!==localStorage.getItem("loyalty_direct_pay")&&"false"!==localStorage.getItem("loyalty_direct_pay")?fn.ajaxForm({},"GET","/loyalty/get-user-loyalty-details").done(function(t){var a=JSON.parse(t);if(localStorage.setItem("loyalty_direct_pay",!1),a.data.is_subscribed)window.location.href="/loyalty/licious-meatopia";else{var s=localStorage.getItem("loyalty_sub_plan");window.location.href=null!==s&&""!==s?"/customer/payments?planId=".concat(s):"/",localStorage.setItem("loyalty_sub_plan","")}}):""===t||null===t||"undefined"==typeof t||"null"===t||0===t.length?window.location.href="/customer/cart":(localStorage.removeItem("utm_page"),window.location.href=t)},verifyUser:function(t,a,s){fn.msite.showloader();var i;branch.getBrowserFingerprintId(function(t,a){i=a}),fn.ajaxForm({phone:t,otp:a,password:s,browserFingerPrint:i,screen_width:screen.width,screen_height:screen.height},"POST","/checkout_oos/verify-user").done(function(t){var a=JSON.parse(t);if("success"==a.status){sessionStorage.setItem("user_type",a.data.customer_type),branch.setIdentity(a.data.customer_key,function(t,a){console.log(t,a)});var s=fn.getMemberDataForUserProfile().member_status,i=fn.getMemberDataForUserProfile().start_date,o=fn.getMemberDataForUserProfile().end_date;if(localStorage.setItem("user_name",a.data.name),localStorage.setItem("user_email",a.data.email),localStorage.setItem("user_contact",a.data.phone),localStorage.setItem("user_type",a.data.customer_type),"true"==localStorage.getItem("newcustomer")){ga("send",{hitType:"event",eventCategory:"Sign Up",eventAction:"Click",eventLabel:"Sign Up"});var d={description:"New User created an account",registration_id:a.data.customer_key,platform:"msite"},r={customer_key:a.data.customer_key};branch.logEvent("COMPLETE_REGISTRATION",d,r,"New User created an account",function(t){console.log(t)})}else ga("send",{hitType:"event",eventCategory:"Log In",eventAction:"Click",eventLabel:"Log In"});if(window.dataLayer.push({user_logged_in:!0,user_type:a.data.customer_type,user_first_order_date:a.data.first_order_date,user_last_order_date:a.data.last_order_date,user_total_orders:a.data.total_orders,member_status:s,plan_start_date:i,plan_end_date:o}),clevertap.onUserLogin.push({Site:{Name:a.data.name,Email:a.data.email,Phone:"+91"+a.data.phone,Identity:a.data.customer_key,member_status:s,plan_start_date:i,plan_end_date:o}}),clevertap.profile.push({Site:{Name:a.data.name,Email:a.data.email,Phone:"+91"+a.data.phone,Identity:a.data.customer_key,member_status:s}}),navigator.userAgent.includes("phonepe-webview")){var n=window.location.href,c=n.split("/"),l=jQuery.inArray("order-status",c);-1==l?fn.msite.loginRedirect():window.location.href=window.location.href}else fn.msite.loginRedirect()}else $(".login-error-msg").removeClass("hide"),$(".login-error-msg").html(a.message),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show"),$(".login-error-msg").addClass("hide")},4e3),"true"==localStorage.getItem("newcustomer")?ga("send",{hitType:"event",eventCategory:"Sign Up",eventAction:"Error",eventLabel:"Invalid OTP"}):ga("send",{hitType:"event",eventCategory:"Log In",eventAction:"Error",eventLabel:"Invalid OTP"});fn.msite.hideloader()})},verifySocialUser:function(t,a,s){fn.msite.showloader(),fn.ajaxForm({phone:$(".socialMobilenumber").val(),otp:a,customer_key:s},"POST","/checkout_oos/verify-social-otp").done(function(t){var a=JSON.parse(t);"success"==a.status?(localStorage.setItem("user_name",a.data.name),localStorage.setItem("user_email",a.data.email),localStorage.setItem("user_contact",a.data.phone),localStorage.setItem("newUser","1"),"true"==localStorage.getItem("social_newcustomer")&&ga("send",{hitType:"event",eventCategory:"Sign Up",eventAction:"Click",eventLabel:"Sign Up"}),clevertap.onUserLogin.push({Site:{Name:a.data.name,Email:a.data.email,Phone:"+91"+a.data.phone,Identity:a.data.customer_key}}),clevertap.profile.push({Site:{Name:a.data.name,Email:a.data.email,Phone:"+91"+a.data.phone,Identity:a.data.customer_key}}),window.dataLayer.push({user_logged_in:!0,user_type:a.data.customer_type,user_first_order_date:a.data.first_order_date,user_last_order_date:a.data.last_order_date,user_total_orders:a.data.total_orders}),navigator.userAgent.includes("phonepe-webview")?window.location.href=window.location.href:fn.msite.loginRedirect()):($(".login-error-msg").removeClass("hide"),$(".login-error-msg").html(a.message),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show"),$(".login-error-msg").addClass("hide")},4e3),"true"==localStorage.getItem("social_newcustomer")&&ga("send",{hitType:"event",eventCategory:"Sign Up",eventAction:"Error",eventLabel:"Invalid OTP"})),fn.msite.hideloader()})},existingVerifyPassword:function(t,a){fn.msite.showloader();var s;branch.getBrowserFingerprintId(function(t,a){s=a}),fn.ajaxForm({phone:$(".mobile-number").val(),password:a,browserFingerPrint:s,screen_width:screen.width,screen_height:screen.height},"POST","/checkout_oos/existing-verify-password").done(function(t){var a=JSON.parse(t);if("success"==a.status){sessionStorage.setItem("user_type",a.data.customer_type),branch.setIdentity(a.data.customer_key,function(t,a){console.log(t,a)});var s=fn.getMemberDataForUserProfile().member_status,i=fn.getMemberDataForUserProfile().start_date,o=fn.getMemberDataForUserProfile().end_date;if(localStorage.setItem("user_name",a.data.name),localStorage.setItem("user_email",a.data.email),localStorage.setItem("user_contact",a.data.phone),window.dataLayer.push({user_logged_in:!0,user_type:a.data.customer_type,user_first_order_date:a.data.first_order_date,user_last_order_date:a.data.last_order_date,user_total_orders:a.data.total_orders,member_status:s,plan_start_date:i,plan_end_date:o}),clevertap.onUserLogin.push({Site:{Name:a.data.name,Email:a.data.email,Phone:"+91"+a.data.phone,Identity:a.data.customer_key,member_status:s,plan_start_date:i,plan_end_date:o}}),clevertap.profile.push({Site:{Name:a.data.name,Email:a.data.email,Phone:"+91"+a.data.phone,Identity:a.data.customer_key,member_status:s}}),ga("send",{hitType:"event",eventCategory:"Log In",eventAction:"Click",eventLabel:"Log In"}),navigator.userAgent.includes("phonepe-webview")){var d=window.location.href,r=d.split("/"),n=jQuery.inArray("order-status",r);-1==n?fn.msite.loginRedirect():window.location.href=window.location.href}else fn.msite.loginRedirect()}else $(".login-error-msg").removeClass("hide"),$(".login-error-msg").html("Invalid Password"),$(".login-error-msg").addClass("show"),setTimeout(function(){$(".login-error-msg").removeClass("show")},4e3),ga("send",{hitType:"event",eventCategory:"Log In",eventAction:"Error",eventLabel:"Invalid Password"});fn.msite.hideloader()})},createCustomer:function(t,a){fn.ajaxForm({customer_key:t,mode:a},"POST","/home/create-customer").done(function(t){if("success"==t.status){localStorage.setItem("user_onboard",!0);var a=fn.getMemberDataForUserProfile().member_status,s=fn.getMemberDataForUserProfile().start_date,i=fn.getMemberDataForUserProfile().end_date;Object.assign(eventObject,{Platform:"Mobile site",Mode:localStorage.getItem("social_mode")}),ga("send",{hitType:"event",eventCategory:"Log In",eventAction:"Click",eventLabel:"Log In"}),clevertap.profile.push({Site:{Name:eventObject.Name,Email:eventObject.Email,Phone:"+91"+eventObject.Phone,Identity:eventObject.Identity,member_status:a}})}})},verifySocial:function(t){$(".whole-wrapper").css("display","none"),$(".verify-social").addClass("show"),$(".social-proceed-login").addClass("show"),$(".verify-login").prop("data-id",t),$(".social-proceed-login").prop("data-custkey",t),localStorage.setItem("user_onboard",!0),fn.msite.validateNumber("socialMobilenumber","social")},verifyOTP:function(){$(".confirm-otp").on("click",function(){var t=$(".enter-otp-input").val();""==t?alert("Please enter OTP number to continue"):5>t.length?alert("OTP number should be of 5 digits"):($(".confirm-otp").prop("disabled",!0),fn.msite.showloader(),fn.ajaxForm({phone:$(".temp-mobile").val(),otp:t},"POST","/checkout_oos/verify-otp").done(function(t){var a=fn.getMemberDataForUserProfile().member_status,s=fn.getMemberDataForUserProfile().start_date,i=fn.getMemberDataForUserProfile().end_date,o=JSON.parse(t);if("success"==o.status){localStorage.setItem("user_name",o.data.name),localStorage.setItem("user_email",o.data.email),localStorage.setItem("user_contact",o.data.phone),branch.setIdentity(o.data.cart.customer_key,function(t,a){console.log(t,a)});$(".customer_key_value").val();o.data.addresses?(clevertap.onUserLogin.push({Site:{Name:o.data.name,Email:o.data.email,Phone:"+91"+o.data.phone,Identity:o.data.customer_key,member_status:a,plan_start_date:s,plan_end_date:i}}),clevertap.profile.push({Site:{Name:o.data.name,Email:o.data.email,Phone:"+91"+o.data.phone,IDentitiy:o.data.cart.customer_key,member_status:a}})):localStorage.setItem("newUser","1"),window.location.href="/customer-info"}else $(".confirm-otp").prop("disabled",!1),alert(o.message);fn.msite.hideloader()}))})},getUser:function(t,a){fn.msite.showloader(),fn.ajaxForm({},"POST","/checkout_oos/get-user").done(function(s){try{var i=JSON.parse(s),o=fn.getMemberDataForUserProfile().member_status,d=fn.getMemberDataForUserProfile().start_date,r=fn.getMemberDataForUserProfile().end_date;if("success"==i.status){fn.msite.isFreshChatEnabled()&&fn.msite.setFDUserAttrs();({full_name:i.data.name,email:i.data.email,contact:i.data.phone,completed_profile:i.data.completed_profile,customer_key:i.data.customer_key});clevertap.profile.push({Site:{Name:i.data.name,Email:i.data.email,Phone:"+91"+i.data.phone,Identity:i.data.customer_key,member_status:o}}),branch.setIdentity(i.data.customer_key,function(t,a){console.log(t,a)});var n=i.data.completed_profile,c={};0==n?Object.assign(c,{status:"false",name:i.data.name,email:i.data.email}):Object.assign(c,{status:"true",name:i.data.name,email:i.data.email}),localStorage.setItem("profile_complete",JSON.stringify(c)),localStorage.setItem("user_name",i.data.name),localStorage.setItem("payable_wallet_amt",i.data.wallet.payable_wallet_amount),localStorage.setItem("coupon_used",i.data.cart.coupon),localStorage.setItem("coupon",""),localStorage.setItem("discount",i.data.cart.discount),localStorage.setItem("customer_name",i.data.name),localStorage.setItem("customer_email",i.data.email),localStorage.setItem("user_email",i.data.email),localStorage.setItem("user_contact",i.data.phone),localStorage.setItem("licious_cash",i.data.wallet.transactional_balance),localStorage.setItem("licious_cashp",i.data.wallet.promotional_balance),localStorage.setItem("payable_wallet_amt",i.data.wallet.payable_wallet_amount),localStorage.setItem("trans_bal",i.data.wallet.transactional_balance),localStorage.setItem("promo_bal",i.data.wallet.promotional_balance),localStorage.setItem("saved_cards",i.data.saved_cards),fn.msite.renderUserProfile(i,t,a),fn.msite.setFinalPayment(parseInt(100*i.data.cart.cart_subtotal)),$(".cust-login.login-field").hide(),$(".loggedin-info").removeClass("hide");var l=i.data.pic||"https://d2407na1z3fc0t.cloudfront.net/Banner/dummy_profile.png",p="Hello <span class=\"red-text\">"+i.data.name+"</span><img data-src=\""+l+"\" alt=\""+i.data.name+"\">";$(".user-title").html(p);var m={};m.normal=i.data.cart.products,m.exotic=i.data.cart.exotic,localStorage.setItem("products",JSON.stringify(m)),localStorage.setItem("cart_subtotal",JSON.stringify(i.data.cart.cart_subtotal)),"1"==localStorage.getItem("newUser")&&(clevertap.profile.push({Site:{Name:i.data.name,Email:i.data.email,Phone:"+91"+i.data.phone,Identity:i.data.cart.customer_key,member_status:o}}),localStorage.removeItem("newUser")),fn.msite.getAllDOMImages()}}catch(t){fn.msite.hideloader()}}).always(function(){fn.msite.hideloader()}),fn.msite.saveAddr(),fn.msite.cityStatemap()},renderUserProfile:function(t,a,s){var i="",o="";a&&!0!=s&&null!=s&&(i="<div class=\"meaty-badge\"><img data-src=\"/images/licious-meatopia-badge.png\" /> </div>",o="<div class=\"meatopia-button\"><span>MY MEATOPIA PLAN</span></div>");var d=t.data.pic||"https://d2407na1z3fc0t.cloudfront.net/Banner/dummy_profile.png",r="<div class=\"profile-dp\">    <img data-src=\""+d+"\" alt=\""+t.data.name+"\"></div>"+i+"<h3>"+t.data.name+"</h3><div class=\"contact-details\">    <p>"+t.data.email+"</p>    <p class=\"cell-prefix\">"+t.data.phone+"</p></div>"+o+"<div class=\"hogbucks\"><div class=\"l_wallet_amount\"><div class=\"l_cash\">Licious cash :<span class=\" text-red\">"+t.data.wallet.transactional_balance+"</span></div><div class=\"l_cashp\">Licious cash+ :<span class=\" text-red\">"+t.data.wallet.promotional_balance+"</span></div></div></div>";$(".profile-info").html(r),a&&!0!=s&&null!=s?($(".profile-dp img").css("border","solid 5px #ffdc93"),$(".profile-info").css("background","white url(/images/meat-bg.svg)"),$(".profile-dp").css({"background-image":"url(\"/images/confetti.svg\")","background-repeat":"no-repeat","background-position":"center","background-size":"65%"})):($(".profile-dp img").css("border","none"),$(".profile-info").css("background-color","white")),$(".meatopia-button").on("click",function(){window.location.href="/loyalty/licious-meatopia"});var n=$(".change-address.select-new ul");n.html(""),$.map(t.data.addresses,function(a){var s=null==a.landmark?s="":s=","+a.landmark,i="<li>    <label for=\""+a.address_id+"\">        <input type=\"radio\" id = \""+a.address_id+"\" name=\"address\">        <div class=\"address-select\">            <h4>"+t.data.name+"</h4>            <p>"+a.line1+"</p>            <p>"+a.line2+s+"</p>            <p>"+a.city+"</p>            <p class=\"cell-no\">Mobile- "+a.contact+"</p>            <p class=\"email\">Email- "+t.data.email+"</p><p class=\"addr-cta\">            <img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/edit.png\" alt=\"Edit Addr\" class = \"edit-addr\" data-username = \""+t.data.name+"\" data-addrid=\""+a.address_id+"\" data-latitude = \""+a.lat+"\"  data-longitude = \""+a.lng+"\" data-editClick = \"profile\">            <img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/delete-icon2.png\" alt=\"Delete Addr\" class = \"delete-addr\" data-addrid=\""+a.address_id+"\"></p>        </div>    </label></li>";n.append(i)}),fn.msite.getAllDOMImages(),fn.msite.editAddr(),fn.msite.deleteAddr()},selectAddr:function(){$(".cust-address").on("click",function(t){t.stopImmediatePropagation(),fn.msite.showloader();var a=$(this);$(".address-container").find(".cust-address").removeClass("selected"),a.addClass("selected"),localStorage.setItem("default_addr_id",a.data("addrid")),localStorage.setItem("default_lat",a.data("lat")),localStorage.setItem("default_lng",a.data("lng")),fn.msite.changeAddr(a.data("lat"),a.data("lng")).done(function(t){var a=JSON.parse(t);"LOCATION_CHANGED"==a.status?fn.msite.showAlert("address",a.message):"ERROR"==a.status?fn.msite.showAlert("no_items",a.message):"SERVICABLE"==a.status&&a.data&&fn.msite.updateHub(a.data),fn.msite.hideloader()})})},renderProfile:function(){fn.ajaxForm({},"GET","checkout_oos/get-addr").done(function(t){var a=JSON.parse(t);if("success"==a.status){var s=localStorage.getItem("default_addr_id")||"",o=localStorage.getItem("hub"),d=!0;null==a.address?fn.msite.showAddrPop("add",!0):($(".address-container").html(""),$.map(a.address,function(t,a){var i="";d&&(s==t.address_id&&t.hub_id==o?(i="selected",d=!1,localStorage.setItem("default_addr_id",t.address_id),localStorage.setItem("default_address",fn.msite.getFormattedAddress(t)),localStorage.setItem("default_lat",t.lat),localStorage.setItem("default_lng",t.lng)):!s&&0==a&&t.hub_id==o&&(i="selected",d=!1,localStorage.setItem("default_addr_id",t.address_id),localStorage.setItem("default_address",fn.msite.getFormattedAddress(t)),localStorage.setItem("default_lat",t.lat),localStorage.setItem("default_lng",t.lng)));var r=null==t.landmark?"":","+t.landmark,n="<div class=\"cust-address "+i+"\" data-pincode = \""+t.pincode+"\"  data-lat = \""+t.lat+"\"  data-lng = \""+t.lng+"\"  data-addrid=\""+t.address_id+"\"><div class=\"select-btn\"></div><div class=\"address\"><h4>"+localStorage.getItem("user_name")+"</h4><p><p>"+t.line1+"</p><p>"+t.line2+r+"</p><p>"+t.city+"</p><p class=\"cell-no\">Mobile- "+t.contact+"</p></p><p class=\"addr-cta\"><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/edit.png\" alt=\"Edit Addr\" class = \"edit-addr\" data-latitude=\""+t.lat+"\"data-longitude=\""+t.lng+"\" data-addrid=\""+t.address_id+"\" data-editClick = \"Cart\"><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/delete-icon2.png\" alt=\"Delete Addr\" class = \"delete-addr\" data-addrid=\""+t.address_id+"\"></p></div></div>";$(".address-container").append(n)})),fn.msite.editAddr(),fn.msite.saveAddr(),fn.msite.deleteAddr(),fn.msite.selectAddr()}fn.msite.getAllDOMImages()})},editAddr:function(){$(".edit-addr").on("click",function(t){t.stopImmediatePropagation();var a=$(".customer_info").val(),s=$(this),i=s.data("latitude"),o=s.data("longitude"),d=s.data("addrid");if(!s.hasClass("clicked")){s.addClass("clicked");var d=$(this).data("addrid"),r=$(this).data("username");fn.msite.showloader();var n=$(this).data("editclick");ga("send",{hitType:"event",eventCategory:n+" - EditAddress",eventAction:"Click",eventLabel:""}),window.location.href="profile"==a?"/profile/setaddress?lat="+i+"&lng="+o+"&addrid="+d:"/setaddress?lat="+i+"&lng="+o+"&addrid="+d}})},deleteAddr:function(){$(".delete-addr").on("click",function(t){t.stopPropagation();var a=$(this).data("addrid"),s=$(this);s.hasClass("clicked")||(s.addClass("clicked"),fn.ajaxForm({addr_id:a},"POST","/checkout_oos/delete-addr").done(function(t){var i=JSON.parse(t);"success"==i.status&&($(".address-container").find("[data-addrid=\""+a+"\"]").remove(),localStorage.setItem("default_addr_id",""),localStorage.setItem("default_pincode",""),fn.msite.getUser()),s.removeClass("clicked")}))})},updateAddr:function(){$(".address-form .update").on("click",function(t){alert("updae"),t.stopImmediatePropagation();var a=$(this);a.hasClass("clicked")||(a.addClass("clicked"),fn.msite.validateAddr(function(t){if(t){var s=$(".address-form"),i=s.attr("data-addrid"),o=s.find(".name").val(),d=s.find(".email").val(),r=s.find(".mobile").val(),n=s.find(".line1").val(),c=s.find(".line2").val(),l=s.find(".city").val();fn.ajaxForm({full_name:o,email:d,line1:n,line2:c,city:l,state:state,pincode:pincode,contact:r,addr_id:i},"POST","/checkout_oos/update-addr").done(function(t){var s=JSON.parse(t);"success"==s.status||alert(s.message),a.removeClass("clicked")})}else a.removeClass("clicked")}))})},resetForm:function(){$(".address-form").find("input:not(.state)").val("").removeAttr("checked").removeAttr("selected").css({borderColor:"#727077"}),$(".val_elem").remove(),$(".city").val(""),$(".state").val(""),$(".address-form").find(".val_elem").remove(),$(".address-form").scrollTop(0)},cityStatemap:function(){var t={1:"Karnataka",2:"Telangana",3:"Delhi"};$(".city").on("change",function(){var a=t[this.value];$(".state").val(a)})},saveAddr:function(){$(".address-form .btn-dark").on("click",function(t){t.stopImmediatePropagation();var a=$(this);if(!a.hasClass("clicked")){a.addClass("clicked");var s=$(".address-form"),i=s.data("addrid"),o=s.find(".name").val(),d=s.find(".email").val(),r=s.find(".mobile").val(),n=s.find(".line1").val(),c=s.find(".line2").val(),l=s.find(".city").val(),p=s.find(".landmark").val(),m=s.find(".line1").data("lat"),u=s.find(".line1").data("lng"),_=s.find(".line1").data("state"),g=s.find(".line1").data("pincode");if(fn.msite.validateAddr()){var h={line1:n,line2:c,city:l,lat:m,lng:u,address_id:i,contact:r,landmark:p,state:_,pincode:g},v=JSON.parse(localStorage.getItem("profile_complete"));fn.localStorageCheck(v)&&("false"!=v.status&&v.status?Object.assign(h,{full_name:v.name,email:v.email}):Object.assign(h,{full_name:o,email:d})),fn.ajaxForm(h,"POST","/checkout_oos/save-addr").done(function(t){var s=JSON.parse(t);if("success"==s.status){localStorage.setItem("default_addr_id",""),localStorage.setItem("user_name",h.full_name);var i={};Object.assign(i,{status:"true",name:"",email:""}),localStorage.setItem("profile_complete",JSON.stringify(i)),window.location.href="profile"==$(".pagehead").val()?"/profile":"/customer-info"}else alert(s.message);a.removeClass("clicked")})}else a.removeClass("clicked")}})},showAddrPop:function(){fn.noScroll();var t=$(".address-form");t.find(".add-new").show(),t.show()},validatePincode:function(t,a){return fn.ajaxForm({},"POST","/checkout_oos/pincode-validate/"+t+"/"+a)},validateAddr:function(){function t(t){return"<span class='val_elem'>"+t+"</span>"}var a=$(".address-form"),s=a.attr("data-addrid"),i=a.find(".name").val(),o=a.find(".email").val(),d=a.find(".mobile").val(),r=a.find(".line1").val(),n=a.find(".line2").val(),c=a.find(".city").val(),l=a.find(".city").attr("data-id"),p=!0;$(".val_elem").remove;var m="none"!=$(".name").css("display");return $.map({addr_2:{val:r},addr_1:{val:n},city:{val:c},name:{val:i},email:{val:o},mobile:{val:d}},function(s,o){return""==s.val?(a.find("[data-elem=\""+o+"\"]").css({borderColor:"red"}),a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove(),a.find("[data-elem=\""+o+"\"]").parent().append(t("Required field")),p=!1,p):void(a.find("[data-elem=\""+o+"\"]").css({borderColor:"grey"}),a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove(),"name"===o?!/^([a-zA-Z ]{3,30})$/.test(s.val)&&m?(a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove(),a.find("[data-elem=\""+o+"\"]").parent().append(t("Name can contain only Alphabets")),p=!1):a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove():"email"===o?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(s.val)?a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove():(a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove(),a.find("[data-elem=\""+o+"\"]").parent().append(t("Email can be of type <i>person@domain.com</i>")),p=!1):"mobile"===o?/^\d{10}$/.test(s.val)?10>s.val.length?(a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove(),a.find("[data-elem=\""+o+"\"]").parent().append(t("Mobile number should be of 10 digits")),p=!1):5>=s.val.charAt(0)?(a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove(),a.find("[data-elem=\""+o+"\"]").parent().append(t("Mobile number should  start with 6/7/8/9")),p=!1):a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove():(a.find("[data-elem=\""+o+"\"]").parent().find(".val_elem").remove(),a.find("[data-elem=\""+o+"\"]").parent().append(t("Mobile Number can be of digits 0-9")),p=!1):void 0)}),p},changeAddr:function(t,a){return fn.ajaxForm({lat:t,lng:a},"POST","/checkout_oos/change-addr")},updateCartLocation:function(t,a){return fn.ajaxForm({lat:t,lng:a},"POST","/checkout_oos/update-cart-location")},updateHub:function(t){localStorage.getItem("default_address");return localStorage.setItem("default_lat",t.lat),localStorage.setItem("default_lng",t.lng),localStorage.setItem("hub",t.hub_id),localStorage.setItem("default_address",t.address),localStorage.setItem("city",li_fn.city_name),$(".header-logo")&&$(".header-logo").find(".address-city").html(li_fn.city_name),$(".header-logo")&&$(".header-logo").find(".address-area").html(t.address),fn.ajaxForm({hub_id:t.hub_id,located_name:t.address,located_lat:t.lat,located_lng:t.lng},"POST","/checkout_oos/update-hub")},applyCoupon:function(){$(".apply_btn").on("click",function(t){t.stopImmediatePropagation();var a=$(".c_code").val(),s=$(this);if(""==a)return s.parent().find(".val_elem").remove(),s.parent().append("<span class='val_elem cpn'>Please enter your coupon</span>"),!1;s.parent().find(".val_elem").remove();fn.msite.showloader(),fn.ajaxForm({coupon:a},"POST","/checkout_oos/apply-coupon").done(function(t){var i=JSON.parse(t);if($(".coupon_message").html("<span class=\"cpn_msg\">"+i.message+"</span>"),""!=i.message&&($(".coupon_message").addClass("show"),setTimeout(function(){$(".coupon_message").removeClass("show")},4e3)),"success"==i.status){localStorage.setItem("discount",""),localStorage.setItem("coupon_used",a),localStorage.setItem("coupon","yes"),s.hide(),s.parent().find(".remove_btn").show(),$(".remove_btn").attr("data-discount",i.cart.discount);var o=$(".detail");o.find(".sub-total .amount").html(parseFloat(i.cart.total).toFixed(2)),o.find(".delivery-charge .amount").html(parseFloat(i.cart.shipping).toFixed(2)),o.find(".discount .amount").html(parseFloat(i.cart.discount).toFixed(2)),o.find(".total-amt .amount").html(parseFloat(i.cart.subtotal).toFixed(2)),fn.msite.setFinalPayment(100*i.cart.subtotal),clevertap.event.push("Coupon Applied",{"Coupon Code":i.cart.coupon,"Total Amount":i.cart.total,Discount:i.cart.discount,"Payable Amount":i.cart.subtotal}),fn.msite.rendershipmentSummery(i.cart.shipments),localStorage.setItem("Coupon Code",i.cart.coupon)}else;fn.msite.hideloader(),fn.msite.removeCoupon()})})},removeCoupon:function(){$(".remove_btn").on("click",function(t){t.stopImmediatePropagation(),discountprice=$(this).attr("data-discount");var a=$(".c_code").val(),s=$(this);localStorage.setItem("Coupon Code",""),fn.msite.showloader(),fn.ajaxForm({},"POST","/checkout_oos/remove-coupon").done(function(t){var a=JSON.parse(t);if($(".coupon_message").html("<span class=\"cpn_msg\">"+a.message+"</span>"),""!=a.message&&($(".coupon_message").addClass("show"),setTimeout(function(){$(".coupon_message").removeClass("show")},4e3)),"success"==a.status){s.hide(),s.parent().find(".apply_btn").show(),$(".val_elem.cpn").remove(),$(".c_code").val("");var i=$(".detail");i.find(".sub-total .amount").html(parseFloat(a.data.cart.total).toFixed(2)),i.find(".delivery-charge .amount").html(parseFloat(a.data.cart.shipping).toFixed(2)),i.find(".discount .amount").html(parseFloat(a.data.cart.discount).toFixed(2)),i.find(".total-amt .amount").html(parseFloat(a.data.cart.subtotal).toFixed(2)),fn.msite.setFinalPayment(100*a.data.cart.subtotal),localStorage.setItem("coupon_used",""),localStorage.setItem("discount",""),localStorage.setItem("coupon","No"),fn.msite.rendershipmentSummery(a.data.cart.shipments)}fn.msite.hideloader()})})},setFinalPayment:function(t){localStorage.setItem("final_amt",t),localStorage.setItem("wallet_used",0),$(".init-payment span").html(parseFloat(t/100).toFixed(2))},getOrderHistory:function(){fn.msite.showloader(),fn.ajaxForm({},"GET","/checkout_oos/get-order-history").done(function(t){if(t=JSON.parse(t),"success"==t.status){var s=$(".order-list");s.html(""),$.map(t.orders,function(t){var i=t.created_at.split(/[^0-9]/),a=new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5]),o="";o="In Progress"==t.status?"processing":"Completed"==t.status?"delivered":"cancelled";var t="<li>    <div class=\"order-card\">        <div class=\"order-desc\">            <h4>"+fn.msite.days()[a.getDay()]+" "+a.getDate()+" "+fn.msite.months()[a.getMonth()]+" "+a.getFullYear()+".</h4>            <p>Time: <span class=\"text-red\">"+(a.getHours()%12?a.getHours()%12:"12")+":"+("0"+a.getMinutes()).slice(-2)+" "+(0<a.getHours()/12?"PM":"AM")+"</span></p>            <p>Items "+t.items+" | Status: <span class=\"text-red\">"+t.status+"</span></p>        </div>        <div class=\"status-img "+o+"\"></div>        <div class=\"view-details\" >            <a href=\"/customer/order-status/"+t.order_id+"\">                View Details            </a>        </div>    </div></li>";s.append(t)})}else fn.msite.showAlert("generic_notif","");fn.msite.hideloader()}).fail(function(){fn.msite.hideloader()})},countProduct:function(t){var a={};return $.map(t.orders,function(t){$.map(t.items,function(t){a[t.product_id]=a[t.product_id]?a[t.product_id]+parseInt(t.quantity):parseInt(t.quantity)})}),a},getOrderShipments:function(t){fn.ajaxForm({},"GET","/checkout_oos/get-order-shipments/"+t).done(function(t){if(t=JSON.parse(t),"success"==t.status){var s=$(".shipment-container");s.html("");var a=fn.msite.countProduct(t),i="";$.map(t.orders,function(t){var o="";i=t.payment_type,$.map(t.items,function(t){textClass="",a[t.product_id]!=t.quantity&&(textClass="text-red");var t="<div class=\"list\">     <img class=\"picture\" data-src=\""+t.pr_image+"\">     <div class=\"product_name\">          <span class=\"heading_font\">"+t.pr_name+"</span>             <div class=\"list_info\">"+(""==t.pieces?t.pieces:t.pr_weight)+"<span class=\"verticalLine\"></span>                 <p class=\"size\">&#8377; "+(parseInt(t.price)+parseInt(t.discount))/t.quantity+" </p><span class=\"verticalLine\"></span>Qty <span class=\""+textClass+"\">"+t.quantity+" of "+a[t.product_id]+"</span>             </div>      </div>  </div>";o+=t}),date1="1"==t.express?t.order_processing_date.replace(" ","T"):t.order_processing_date.replace(" ","T");var d=date1.split(/[^0-9]/);date=new Date(d[0],d[1]-1,d[2],d[3],d[4],d[5]);var r="";r="Rejected"==t.status?"text-red":"Delivered"==t.status?"text-green":"text-gray";var n="  <div class=\"shipment-container\">  <div class=\"shipment\">     <div class=\"deliver\">         Delivered <span class=\"text\">"+date.getDate()+" "+fn.msite.months()[date.getMonth()]+" ( "+(1==t.express?"In "+t.express_message:t.sheduled_time)+" )</span>     </div>     <div class=\"total-shipment\">        <span class=\"order-time\"><span class=\"text-gray\">Order ID: </span><span class=\"text\">"+t.order_id+"</span></span><span class=\"go-right "+r+"\">"+t.status+"</span>"+o+"         <div class=\"wrap\">             <div class=\"list\">                 <p class=\"right\">Delivery Value: &#8377; "+parseFloat(t.subtotal_with_key.value).toFixed(2)+"</p>                 <p class=\"right\">Delivery Charge: &#8377; "+parseFloat(t.shipping_charges).toFixed(2)+"</p>             </div>             <hr class=\"underline\"></hr>             <p class=\"track-order\"><a href=\"/customer/order-status/"+(t.parent_order_id+"#"+t.order_id)+"\" class=\"text-red\">Track Your Order</a></p>     </div>   </div> </div>";s.append(n)}),$(".wrapper.sub-total").append("<div class=\"amount rupee\">"+parseFloat(t.order_summary.total.value).toFixed(2)+"</div>"),$(".wrapper.delivery-charge").append("<div class=\"amount rupee\">"+parseFloat(t.order_summary.shipping.value).toFixed(2)+"</div>"),$(".wrapper.discount").append("<div class=\"amount rupee\">"+parseFloat(t.order_summary.discount.value).toFixed(2)+"</div>"),$(".wrapper.gst").append("<div class=\"amount rupee\">"+parseFloat(t.order_summary.vat.value).toFixed(2)+"</div>"),$(".wrapper.pay_mthd").append("razorpay"==i?"<div class=\"amount\"> Online</div>":"<div class=\"amount\">"+i+"</div></div>"),$(".total_amount.total-amt").append("<div class=\"amount rupee\">"+parseFloat(t.order_summary.grand_total.value).toFixed(2)+"</div>")}else fn.msite.showAlert("generic_notif","")})},trackOrder:function(t){fn.ajaxForm({},"GET","/checkout_oos/track-order/"+t).done(function(a){var s=JSON.parse(a);if($(".order-desc").html("<h4>Order Number: "+t+"</h4>"),"success"==s.status){$(".status-img").addClass(s.data.order_status.toLowerCase());var i=$(".order-status");switch(i.find("li").removeClass("active"),s.data.order_status){case"Processing":i.find(".order-selected").addClass("active");break;case"Accepted":i.find(".order-selected").addClass("active"),i.find(".order-processing").addClass("active");break;case"Billed":i.find(".order-selected").addClass("active"),i.find(".order-processing").addClass("active");break;case"Dispatched":i.find(".order-selected").addClass("active"),i.find(".order-processing").addClass("active"),i.find(".order-delivery").addClass("active");break;case"Delivered":i.find(".order-selected").addClass("active"),i.find(".order-processing").addClass("active"),i.find(".order-delivery").addClass("active"),i.find(".order-delivered").addClass("active");}}})},clearCart:function(){$(".clear-cart-items").on("click",function(t){$(".clear-cart-items").prop("disabled",!0),t.stopPropagation(),fn.ajaxForm({},"POST","/checkout_oos/clear-cart").done(function(t){var a=JSON.parse(t);"success"==a.status&&($(".cart-card").hide(),$(".cross-sell").hide(),fn.noScroll(),fn.msite.getOrderSummary(),fn.msite.showAlert("no_items","Your Cart is Empty"))}).always(function(){$(".clear-cart-items").prop("disabled",!1)})})},clearCartApi:function(){return new Promise(function(t,a){fn.ajaxForm({},"POST","/checkout_oos/clear-cart").done(function(a){var s=JSON.parse(a);"success"==s.status&&t(s)}).fail(function(){a("failed")}).always(function(){})})},mergeShipmentApi:function(){return new Promise(function(t,a){fn.ajaxForm({},"GET","/customer/li-lock-shipment").done(function(a){var s=JSON.parse(a);"success"==s.status&&t(s)}).fail(function(){a("failed")}).always(function(){})})},getShipmentApi:function(){return new Promise(function(t,a){fn.ajaxForm({order_type:"reorder"},"GET","/customer/li-shipment-slot").done(function(a){try{var s=JSON.parse(a);"success"==s.statusMessage?t(s):(fn.msite.hideloader(),202==s.statusCode&&"empty_cart"==s.data.errorMessage?window.location.reload():202==s.statusCode&&"oos_error"==s.data.errorMessage?t(s):li_fn.checkout.checkoutAlert("offer_modified",s.data.message))}catch(t){fn.msite.hideloader(),li_fn.checkout.checkoutAlert("api_fail","Something went wrong. Please retry")}}).fail(function(){a("failed")}).always(function(){})})},showloader:function(){$(".loader").show()},hideloader:function(){$(".loader").hide()},playvideo:function(t){$(".youtube-video").show(),$(".cross-mark").on("click",function(t){t.preventDefault(),fn.msite.hidevideo()}),player.loadVideoByUrl({mediaContentUrl:t,startSeconds:0})},hidevideo:function(){stopVideo(),$(".youtube-video").hide()},sendAnalyticsData:function(t,a){var s={city:localStorage.getItem("city"),hub_id:localStorage.getItem("hub"),user_type:null===localStorage.getItem("user_type")?"":localStorage.getItem("user_type"),logged_in:"true",total_orders:null===localStorage.getItem("total_orders")?"":localStorage.getItem("total_orders")},i={};a.source||(a.source="msite"),loyalty_landing_analytics_data={name:"",city:"",hub_id:"",total_plans:"",list:"",member_status:"",recommended_plan:"",user_type:"",logged_in:"",total_orders:""};var o={banner_url:"",city:localStorage.getItem("city"),hub_id:localStorage.getItem("hub"),position:"",banner_type:"",list:"",user_type:null===localStorage.getItem("user_type")?"":localStorage.getItem("user_type"),logged_in:"",total_orders:null===localStorage.getItem("total_orders")?"":localStorage.getItem("total_orders"),member_status:"",pr_totalsavedvalue:"",pr_totalorders:""};switch(t){case"BRANCH_CHARGED_EVENT":case"BRANCH_ERR":i=Object.assign({},a);case"auto_renew_coupon_popup":i=Object.assign({},a);case"favorite_items_visited":i=Object.assign({},a);break;case"past_order_visited":i=Object.assign({},a);break;case"search_clicked":case"search_result_clicked":case"search_triggered":i=Object.assign({},a);break;case"start_checkout":i=Object.assign({},a);break;case"notify_productOOS":i=Object.assign({},a);break;case"renewplan_loyalty":i=Object.assign({},a);break;case"selectplan_loyaltycart":i=Object.assign({},a);break;case"changeplan_loyaltycart":i=Object.assign({},a);break;case"modifyplan_loyaltycart":i=Object.assign({},a);break;case"view_loyaltyhome":i=Object.assign(fn.loyalty_landing_obj,a);break;case"confirmrenew_loyalty":i=Object.assign({},a);break;case"selectplan_loyaltyhome":i=Object.assign(fn.loyalty_landing_obj,a);break;case"readfaq_loyaltyhome":i=Object.assign(fn.loyalty_landing_obj,a);break;case"readtnc_loyaltyhome":i=Object.assign(fn.loyalty_landing_obj,a);break;case"get_loyalty":i=Object.assign(fn.loyalty_landing_obj,a);break;case"purchase_loyalty":i=Object.assign({},a);break;case"retrypurchase_loyalty":i=Object.assign({},a);break;case"member_activatedcart":case"member_activated":i=Object.assign({},a);break;case"cartBanner_click":i=Object.assign({},a);break;case"modifyplan_loyalty":i=Object.assign(fn.loyalty_landing_obj,a);break;case"changeplan_loyalty":i=Object.assign(fn.loyalty_landing_obj,a);break;case"removeplan_loyaltyslot":i=Object.assign({},a);break;case"removeplan_loyaltycart":i=Object.assign({},a);break;case"cartBanner_impression":i=Object.assign({},a);break;case"Banner_impression":i=Object.assign(s,a);break;case"Banner_click":i=Object.assign(s,a);break;case"".concat(fn.page_list_constants.home,"_Loyalty_Banner_click"):i=Object.assign(o,a);break;case"refer_knowmore":i=Object.assign(s,a);break;case"refer_sharewhatsapp":i=Object.assign(s,a);break;case"refer_shareothers":i=Object.assign(s,a);break;case"refer_knowmore":i=Object.assign(s,a);break;case"refer_copycode":i=Object.assign(s,a);case"".concat(fn.page_list_constants.home,"_Loyalty_Banner_impression"):i=Object.assign(o,a);break;default:i=Object.assign({},a);}fn.analytics_impression.includes(t)||fn.analytics_click.includes(t)?(clevertap.event.push("banner",i),ga("send",{hitType:"event",eventCategory:a.source,eventAction:"banner",eventLabel:JSON.stringify(i)})):"cartBanner_impression"===t||"cartBanner_click"===t?(clevertap.event.push("Loyalty_Banner",i),ga("send",{hitType:"event",eventCategory:a.source,eventAction:"cartbanner",eventLabel:JSON.stringify(i)})):"BRANCH_CHARGED_EVENT"===t?ga("send",{hitType:"event",eventCategory:a.source,eventAction:t,eventLabel:JSON.stringify(i)}):(clevertap.event.push(t,i),ga("send",{hitType:"event",eventCategory:a.source,eventAction:t,eventLabel:JSON.stringify(i)}))},getOrderDetails:function(t){fn.ajaxForm({},"GET","/checkout_oos/get-order-shipments/"+t).done(function(a){var s=JSON.parse(a);if("success"==s.status){var i={};for(var o in $.map(s.orders,function(t){$.map(t.items,function(t){i.hasOwnProperty(t.product_id)?(i[t.product_id].price+=parseFloat(t.price),i[t.product_id].quantity+=parseInt(t.quantity)):i[t.product_id]={sku:t.product_id,name:t.pr_name,category:t.category_name,price:parseFloat(t.price)/parseInt(t.quantity),quantity:parseInt(t.quantity)}})}),gaArray=[],i)gaArray.push(i[o]);var d="";d="COD"==s.orders[0].payment_type?"postpaid":"prepaid",dataLayer.push({event:"ecomm_event",transactionId:s.orders[0].txt_id,transactionAffiliation:"",transactionTotal:parseFloat(s.order_summary.total.value),transactionTax:parseFloat(s.order_summary.vat.value),transactionShipping:parseFloat(s.order_summary.shipping.value),"Order id":t,"Payment Type":d,"Order Value":parseFloat(s.order_summary.grand_total.value),transactionProducts:gaArray})}else fn.msite.showAlert("generic_notif","")})},home:{getConfig:function(){return new Promise(function(t){fn.ajaxForm({},"GET","/home/get-config").done(function(a){var s=JSON.parse(a);if("success"===s.status.toLowerCase()){t(s);var i="<a href=\"/refer\"><div class=\"referrContainer\"><div class=\"referImage\"><img data-src="+s.data.referral.referral_image_app+"></div><div class=\"referText\">"+s.data.referral.referral_label_app+"</div><div class=\"referArrow\"><img data-src=\"/images/play-symbol copy 2.png\"></div></div></a>";if(localStorage.setItem("ref-ban-url",s.data.referral.referral_link_msite),localStorage.setItem("ref-ban-pos",s.data.referral.referral_position),localStorage.setItem("total_orders",s.data.referral.referral_total_orders),localStorage.setItem("user_type",s.data.referral.referral_user_type),s.data.hasOwnProperty("custom_attrs")){var o=s.data.custom_attrs,d=o.profile_mobile_icon,r=o.cart_mobile_icon,n=$(".header-logo");d&&r&&null!=d&&null!=r&&(n.find(".profile-icon .profile").attr("src",d),n.find(".cart-icon-image").attr("src",r),localStorage.setItem("cart_icon",r),localStorage.setItem("profile_icon",d))}sessionStorage.setItem("user_type",s.data.customer_type);var c={source:"Click",banner_url:s.data.referral.referral_link_msite,banner_type:"Referral",position:s.data.referral.referral_position,list:"Home"};"top"===s.data.referral.referral_position.toLowerCase()?$(".referral-placeholder-top").length&&$(".referral-placeholder-top").append(i):$(".referral-placeholder-bottom").length&&$(".referral-placeholder-bottom").append(i);var l;s.data.paypal&&!navigator.userAgent.includes("phonepe-webview")&&(localStorage.setItem("is_ba_present",s.data.paypal.isBAPresent),localStorage.setItem("paypalObj",JSON.stringify(s.data.paypal)),l="<li class=\"liciousWallet\"><a href=\"/paypal-autolink\"><img data-src=\"/images/order-new.png\" class=\"home-images\"><span class=\"catlog-text\">"+s.data.paypal.display_title+"</span><span style=\"border: 1px solid red;float: right;color: red;/* padding: 1px; */padding-left: 3px;padding-right: 4px;border-radius: 3px;\">"+(s.data.paypal.isBAPresent?"Unlink":"Link")+"</span><span style=\"display: block;font-size: 70%;\">"+s.data.paypal.offer_text+"</span></a></li>",$(".paypal-sidemenu").html(l)),$(document).on("click",".referrContainer",function(){fn.msite.sendAnalyticsData("Banner_click",c)})}})})},bodyScroll:function(){console.log("dummy checkin"),$(".msite-whole-wrapper").removeClass("fix"),$("body").css("overflow","auto")},noScroll:function(){$(".msite-whole-wrapper").addClass("fix"),$("body").css("overflow","hidden")},showdDesc:function(){},getOperationalTicker:function(){fn.ajaxForm({},"GET","/home/get-operational-ticker").done(function(t){t=JSON.parse(t),"success"==t.statusMessage&&!0==t.data.status&&t.data.text.length&&($(".operational-ticker").css("display","block"),$(".operational-ticker").text(t.data.text))})},getBanners:function(){fn.ajaxForm({},"POST","/home/get-banners").done(function(t){t=JSON.parse(t),$.map(t.data.banners,function(t,a){var s="<img data-src=\""+t.msite_banner+"\" alt=\"Licious\" class=\"img-responsive imgbanner swiper-slide\" data-msitebanner=\""+t.msite_banner+"\" data-url = \""+t.mobile_url+"\" data-index = \""+a+"\" data-name = \""+t.mobile_url.split("?")[1]+"\" data-title = \""+t.title+"\">";$(".main-banner").append(s)}),$(".imgbanner").on("click",function(){var t=$(this).data("url"),a=new URL(t),s=a.searchParams.get("video"),i={Banner_name:$(this).attr("data-title"),Position_of_Banner:isNaN($(this).data("index"))?"":$(this).data("index")+1};if(cleverTap_events.bannerClickEvent(i),fn.msite.home.GAEventClick($(".main-banner"),$(this).data("index"),$(this).data("name")),!0==s||"true"==s){$("#promovid").css("display","block"),$(".bannerVideo")[0].contentWindow.postMessage("{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}","*");$("#promovideo")[0];fn.msite.home.hoverBanner(null,!1),fn.noScroll()}else window.location.href=t});var a=$(".interlaced-banner-wrapper");0<t.data.interlaced.length&&null!=t.data.interlaced.length?(a.find(".interlace-img").attr("src",t.data.interlaced[0].msite_image_url),a.find(".interlaced-image-container").attr("href",t.data.interlaced[0].msite_url),a.show()):a.hide(),$(".banners").swiper({mode:"horizontal",autoplay:6e3,loop:!0,autoplayDisableOnInteraction:!1,pagination:".swiper-pagination",autoHeight:!0,onInit:function(t){$(document).on("scroll",function(){$(document).scrollTop()<$(".banners").offset().top-50?t.startAutoplay():t.stopAutoplay()}),$(".loc-pop-cont").hasClass("show")?fn.msite.home.hoverBanner(t,!1):fn.msite.home.hoverBanner(t,!0)},onSlideChangeEnd:function(t){$(document).scrollTop()<$(".banners").offset().top-20||t.stopAutoplay(),ga("send",{hitType:"event",eventCategory:"ScreenHome - OfferBanner",eventAction:"Impression",eventLabel:$(".main-banner.swiper-wrapper img").eq(t.activeIndex).data("name")+" - Pos:"+(t.realIndex+1)})}}),fn.msite.getAllDOMImages()}).fail(function(){$(".main-banner").hide(),$(".main-banner").html("")})},getDeals:function(){var t=$(".todays-deal");fn.ajaxForm({},"POST","/home/get-deals").done(function(a){if(a=JSON.parse(a),"success"==a.status){var s="";$.map(a.data.product_details,function(i,o){try{var d="",r=fn.msite.discount(i.product_details.product_pricing),n=r==i.product_details.product_pricing.base_price?"MRP: ":"",c=i.product_details.product_merchantdising.merchandise_name,l="";l=80<c.length?"<div class=\"item-discription long-text\" data-itemname = \"".concat(c,"\">").concat(c.substring(0,77)," ... <img src=\"/images/ellipses@2x.png\" class=\"ellipses\"></div>"):"<div class=\"item-discription\" data-itemname = \"".concat(c,"\">").concat(c,"</div>"),d=i.product_details.product_master.pieces?"<span class=\"item\">"+i.product_details.product_master.pieces+" Pieces </span>":-1===i.product_details.product_master.gross.search(/gm/i)&&-1===i.product_details.product_master.gross.search(/kg/i)?"<span class=\"item-pieces\">Pieces: "+i.product_details.product_master.gross+"</span><span class=\"item-weight\">Net: "+i.product_details.product_master.pr_weight+"</span><span class=\"item-status\">"+(i.product_details.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item-pieces\">Gross: "+i.product_details.product_master.gross+"</span><span class=\"item-weight\">Net: "+i.product_details.product_master.pr_weight+"</span><span class=\"item-status\">"+(i.product_details.product_merchantdising.wt_msg||"")+"</span>",1==i.product_details.product_merchantdising.is_combo&&(d="");var p="";1>i.product_details.product_inventory.stock_units?fn.validateCookieForProduct(i.product_details.product_master.product_id)?cart_button="<div class= \"notify-btn-container\"><button class=\"notify-btn notify-border-red\" data-pr_id = \""+i.product_details.product_master.product_id+"\"><span><image class=\"image_notified\" data-src=\"/images/red-tick.svg\">NOTIFY ME</span></button></div>":p="<div class= \"notify-btn-container\"><button class=\"notify-btn notify_"+i.product_details.product_master.product_id+"\" data_name = \""+i.product_details.product_merchantdising.merchandise_name+"\" data_cat = \""+cat_name?cat_name:"\" data_img = \""+i.product_details.product_merchantdising.pr_image+"\" data_discount = \""+i.product_details.product_pricing.base_discount+"\"  data_price = \""+i.product_details.product_pricing.base_price+"\" data-pr_id = \""+i.product_details.product_master.product_id+"\"><span><image class=\"image\"src=\"/images/notify-icon2.png\">NOTIFY ME</span></button></div>":2==i.product_details.product_inventory.slot_available?(fn.refreshCookie(i.product_details.product_master.product_id),p="<div class=\"cart-button\" data-module = \""+a.data.block_details.block_title+"\"><div><button class=\"addcartbtn addcartbtndisabled\" disabled>ADD TO CART</button></div></div>     <div class=\"item-count\" data-pr_id = \""+i.product_details.product_master.product_id+"\" data-stock = \""+i.product_details.product_inventory.stock_units+"\" data-pr_id = \""+i.product_details.product_master.product_id+"\" data-count = \"0\" data-index = \""+o+"\"><span class=\"icon icon-minus-disabled\" data-module = \""+a.data.block_details.block_title+"\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus-disabled\"></span></div>"):(fn.refreshCookie(i.product_details.product_master.product_id),p="<div class=\"cart-button\" data-module = \""+a.data.block_details.block_title+"\"><button class=\"addcartbtn\">ADD TO CART</button></div>     <div class=\"item-count\" data-pr_id = \""+i.product_details.product_master.product_id+"\" data-stock = \""+i.product_details.product_inventory.stock_units+"\" data-pr_id = \""+i.product_details.product_master.product_id+"\" data-count = \"0\" data-index = \""+o+"\"><span class=\"icon icon-minus\" data-module = \""+a.data.block_details.block_title+"\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus\"></span></div>"),$(".icon-minus-disabled").on("click",function(t){t.preventDefault()}),$(".icon-plus-disabled").on("click",function(t){t.preventDefault()}),s=s+"<li class = \""+i.product_details.product_master.product_id+" swiper-slide\" data-name = \""+i.product_details.product_merchantdising.merchandise_name+"\" data-index = \""+o+"\"><a href=\"/"+i.product_details.category_details.slug+"/"+i.product_details.product_master.slug+"\">  <div class=\"image-holder\"><img class=\"deal-images\" data-src=\""+i.product_details.product_merchantdising.pr_image+"\"  alt=\""+i.product_merchantdising.product_shortname+"\" title=\""+i.product_merchantdising.product_shortname+"\">  </div>  <div class=\"itemDetail\">"+l+"<div class=\"short-description\">"+i.product_details.product_merchantdising.usp_desc+"</div>   <p class=\"item-quantity\">"+d+"   </p>   <div class=\"item-value\">    <div class=\"item-price\"><span class=\"real-price\"><span style=\"font-size: 14px;\">"+n+"</span>&#8377; "+r+"</span>"+(r==i.product_details.product_pricing.base_price?"":"<span class=\"deduct-price\" style=\"text-decoration: none;\">MRP: </span><span class=\"deduct-price\" style=\"margin: 0;\"> &#8377;"+i.product_details.product_pricing.base_price+"</span><span class=\"discount-bottom\">"+(i.product_details.product_pricing.rounded_base_discount||Math.floor(i.product_details.product_pricing.base_discount))+"% Off </span>")+"</div>"+p+"   </div>   </div>  </a>"+fn.productDetails.getStockText(i.product_details.product_inventory,i.product_details.product_master.product_id)+"</li> ",$(".item-discription").on("click",function(a){t=$(this),t.hasClass("long-text")&&(a.preventDefault(),a.stopImmediatePropagation(),t.removeClass("long-text"),t.html(""),t.html(t.data("itemname")))})}catch(t){}});var i="      <div class=\"today-items\">         <span class=\"today-deal\">"+a.data.block_details.block_title+"</span><span class=\" time\"><span class=\"text-end\">Ends in </span><span class=\"timer\"> --:--:--</span></span>      </div>      <div class=\"list-item swiper-container\"><ul class=\"item-total-list swiper-wrapper\" data-name=\""+a.data.block_details.block_title+"\">"+s+"      </ul></div>";t.attr("data-name",a.data.block_details.block_title),s?(t.html(i),t.data("ct",0),t.data("len",a.data.product_details.length),fn.msite.home.updateProductcount(),fn.msite.home.addToCart(t,"Home"),fn.msite.home.removeCart(t,"Home"),fn.msite.home.showdDesc(t),fn.msite.home.swiper(t),fn.msite.home.GAEventForFirstCard(t)):(t.hide(),t.html("")),fn.msite.getAllDOMImages()}else t.hide(),t.html(""),fn.Queue.youmaylike||($(".youmaylike").addClass("show"),fn.msite.home.getRecommendation(),fn.msite.home.GAEventForFirstCard($(".youmaylike")))}).always(function(t){t=JSON.parse(t);var a={category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""};$(".notify-btn").on("click",function(t){t.preventDefault();var s=$(this),i=s.parent().parent().parent().parent().parent(),o="true"!==$(".contact-form-pop-up").attr("logged_in"),d=s.attr("data-pr_id");localStorage.setItem("loyalty_pr_id",d),console.log({hi:"hi"}),a.price=s.attr("data_price"),a.product_id=d,a.product_name=s.attr("data_name"),a.product_image_url=s.attr("data_img"),a.category_name=s.attr("data_cat"),a.discount=s.attr("data_discount"),a.product_url=window.location.href,fn.populateNotifyMeData(a),"true"===$(".contact-form-pop-up").attr("logged_in")?fn.getNotified(o,s,i):($(".contact-form-pop-up").addClass("show"),fn.noScroll())}),"success"==t.status&&fn.msite.home.reverseTimer(t.data.block_details.end_time)}).fail(function(){t.hide(),t.html(""),fn.Queue.youmaylike||(fn.msite.getRecommendation(),$(".youmaylike").addClass("show"),fn.msite.home.GAEventForFirstCard($(".youmaylike")))})},pushEEProductImpressionHomePage:function(t){var a=t.product_details;if(a&&Array.isArray(a)&&(a=a.reduce(function(t,a,s){var i=a.product_name,o=a.product_id,d=a.product_details.product_pricing.base_price,r=a.product_details.category_details.id;return t.push({name:i,id:o,price:d,category:r,list:"recommendation-home-page",position:s}),t},[])),window.dataLayer){var s=window.dataLayer;s.push({event:"productImpression",ecommerce:{currencyCode:"INR",impressions:a}})}},pushEEProductionImpressionCategory:function(t){if(t&&Array.isArray(t)&&(t=t.reduce(function(t,a,s){var i=a.product_master.pr_name,o=a.product_master.product_id,d=a.product_pricing.base_price,r=a.product_inventory.cat_id;return t.push({name:i,id:o,price:d,category:r,list:"recomandation-category-page",position:s}),t},[])),window.dataLayer){var a=window.dataLayer;a.push({event:"productImpression",ecommerce:{currencyCode:"INR",impressions:t}})}},getRecommendation:function(){var t=$(".todays-deal"),a=$(".youmaylike");fn.ajaxForm({},"POST","/home/get-recommendation").done(function(s){s=JSON.parse(s);var i={category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""};if("success"==s.status){var o="";$.map(s.data.product_details,function(a,i){try{if(0==t.find("."+a.product_details.product_master.product_id).length){var d="",r=fn.msite.discount(a.product_details.product_pricing),n=r==a.product_details.product_pricing.base_price?"MRP: ":"",c=a.product_details.product_merchantdising.merchandise_name,l="";l=80<c.length?"<div class=\"item-discription long-text\" data-itemname = \"".concat(c,"\">").concat(c.substring(0,77)," ... <img src=\"/images/ellipses@2x.png\" class=\"ellipses\"></div>"):"<div class=\"item-discription\" data-itemname = \"".concat(c,"\">").concat(c,"</div>"),d=""==a.product_details.product_master.pieces?-1===a.product_details.product_master.gross.search(/gm/i)&&-1===a.product_details.product_master.gross.search(/kg/i)?"<span class=\"item-pieces\">Pieces: "+a.product_details.product_master.gross+"</span><span class=\"item-weight\">Net: "+a.product_details.product_master.pr_weight+"</span><span class=\"item-status\">"+(a.product_details.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item-pieces\">Gross: "+a.product_details.product_master.gross+"</span><span class=\"item-weight\">Net: "+a.product_details.product_master.pr_weight+"</span><span class=\"item-status\">"+(a.product_details.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item\">"+a.product_details.product_master.pieces+" Pieces </span>",1==a.product_details.product_merchantdising.is_combo&&(d="");var p="";1>a.product_details.product_inventory.stock_units?fn.validateCookieForProduct(a.product_details.product_master.product_id)?p="<div class= \"notify-btn-container\"><button class=\"notify-btn notify-border-red\" data-pr_id = \""+a.product_details.product_master.product_id+"\"><span><image class=\"image_notified\" data-src=\"/images/red-tick.svg\">NOTIFY ME</span></button></div>":p="<div class= \"notify-btn-container\"><button class=\"notify-btn notify_"+a.product_details.product_master.product_id+"\" data_name = \""+a.product_details.product_master.merchandise_name+"\" data_cat = \""+cat_name+"\" data_img = \""+a.product_details.product_master.pr_image+"\" data_discount = \""+a.product_details.product_pricing.base_discount+"\"  data_price = \""+a.product_details.product_pricing.base_price+"\" data-pr_id = \""+a.product_details.product_master.product_id+"\"><span><image class=\"image\"src=\"/images/notify-icon2.png\">NOTIFY ME</span></button></div>":2==a.product_details.product_inventory.slot_available?(fn.refreshCookie(a.product_details.product_master.product_id),p="<div class=\"cart-button\" data-module = \""+s.data.block_details.block_title+"\"><div><button class=\"addcartbtn addcartbtndisabled\" disabled >ADD TO CART</button></div></div>     <div class=\"item-count\" data-pr_id = \""+a.product_details.product_master.product_id+"\" data-stock = \""+a.product_details.product_inventory.stock_units+"\" data-pr_id = \""+a.product_details.product_master.product_id+"\" data-count = \"0\" data-index = \""+i+"\"><span class=\"icon icon-minus-disabled\" data-module = \""+s.data.block_details.block_title+"\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus-disabled\"></span></div>   </div>"):(fn.refreshCookie(a.product_details.product_master.product_id),p="<div class=\"cart-button\" data-module = \""+s.data.block_details.block_title+"\"><button class=\"addcartbtn\">ADD TO CART</button></div>     <div class=\"item-count\" data-pr_id = \""+a.product_details.product_master.product_id+"\" data-stock = \""+a.product_details.product_inventory.stock_units+"\" data-pr_id = \""+a.product_details.product_master.product_id+"\" data-count = \"0\" data-index = \""+i+"\"><span class=\"icon icon-minus\" data-module = \""+s.data.block_details.block_title+"\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus\"></span></div>   </div>"),$(".icon-minus-disabled").on("click",function(t){t.preventDefault()}),$(".icon-plus-disabled").on("click",function(t){t.preventDefault()}),o=o+"<li class = \""+a.product_details.product_master.product_id+" swiper-slide\" data-name = \""+a.product_details.product_merchantdising.merchandise_name+"\" data-index = \""+i+"\"><a href=\"/"+a.product_details.category_details.slug+"/"+a.product_details.product_master.slug+"\">  <div class=\"image-holder\"><img class=\"deal-images\" data-src=\""+a.product_details.product_merchantdising.pr_image+"\" alt=\""+a.product_details.product_merchantdising.product_shortname+"\" title=\""+a.product_details.product_merchantdising.product_shortname+"\">  </div>  <div class=\"itemDetail\">"+l+"<div class=\"short-description\">"+a.product_details.product_merchantdising.usp_desc+"</div>   <p class=\"item-quantity\">"+d+"   </p>   <div class=\"item-value\">    <div class=\"item-price\"><span class=\"real-price\"><span style=\"font-size: 14px;\">"+n+"</span>&#8377; "+r+"</span>"+(r==a.product_details.product_pricing.base_price?"":"<span class=\"deduct-price\" style=\"text-decoration: none;\">MRP: </span><span class=\"deduct-price\" style=\"margin: 0;\"> &#8377;"+a.product_details.product_pricing.base_price+"</span><span class=\"discount-bottom\">"+(a.product_details.product_pricing.rounded_base_discount||Math.floor(a.product_details.product_pricing.base_discount))+"% Off </span>")+"</div>"+p+"  </div></a>"+fn.productDetails.getStockText(a.product_details.product_inventory,a.product_details.product_master.product_id)+"</li>"}}catch(t){}});var d="         <div class=\"today-items\">         <span class=\"today-deal\">"+s.data.block_details.block_title+"</span>      </div>      <div class=\"list-item swiper-container \"><ul class=\"item-total-list swiper-wrapper\" data-name=\""+s.data.block_details.block_title+"\">"+o+"    </ul></div>";a.attr("data-name",s.data.block_details.block_title),o?(a.html(d),a.data("ct",0),a.data("len",s.data.product_details.length),fn.msite.home.updateProductcount(),fn.msite.home.addToCart(a,"Home"),fn.msite.home.removeCart(a,"Home"),fn.msite.home.showdDesc(a),fn.msite.home.swiper(a),fn.msite.home.GAEventForFirstCard(a)):(a.hide(),a.html("")),s.data&&fn.msite.home.pushEEProductImpressionHomePage(s.data),fn.msite.getAllDOMImages()}else a.hide(),a.html(""),fn.Queue.explore||($(".explore").addClass("show"),fn.msite.home.exploreCategories(),fn.msite.home.GAEventForFirstCard($(".explore"),!0));$(".item-discription").on("click",function(t){a=$(this),a.hasClass("long-text")&&(t.preventDefault(),t.stopImmediatePropagation(),a.removeClass("long-text"),a.html(""),a.html(a.data("itemname")))}),$(".notify-btn").on("click",function(t){t.preventDefault();var a=$(this),s=a.parent().parent().parent().parent().parent(),o="true"!==$(".contact-form-pop-up").attr("logged_in"),d=a.attr("data-pr_id");i.price=a.attr("data_price"),i.product_id=d,i.product_name=a.attr("data_name"),i.product_image_url=a.attr("data_img"),i.category_name=a.attr("data_cat"),i.discount=a.attr("data_discount"),i.product_url=window.location.href,fn.populateNotifyMeData(i),localStorage.setItem("loyalty_pr_id",d),"true"===$(".contact-form-pop-up").attr("logged_in")?fn.getNotified(o,a,s):($(".contact-form-pop-up").addClass("show"),fn.noScroll())})}).fail(function(){a.hide(),a.html("")})},exploreCategories:function(t){if(!("Header"==t&&fn.Queue.explore)){var a=$(".explore"),s=$(".search-explore");fn.ajaxForm({},"POST","/home/explore-categories").done(function(t){if(t=JSON.parse(t),"success"==t.status){var i="",o="";unrelatedContentList="",$.map(t.data,function(t,a){i=i+"<li> <a href=\"/"+t.slug+"\" data-name=\""+t.cat_name+"\" data-index = \""+a+"\">      <div class=\"catalog-image\"><img data-src=\""+t.cat_tile_img+"\" alt=\"licious\" class=\"catlog-picture\"></div>    <div class=\"item-name\">"+t.cat_name+"</div> </a></li>",o=o+"<li><a href=\"/"+t.slug+"\">      <div class=\"category-picture\"><img data-src=\""+t.mobile_icon+"\" alt=\"licious\" class=\"category-display\"></div>      <div class=\"category-title\">"+t.cat_name+"</div></a></li>",unrelatedContentList+="<li class=\"single-item\">\n                                            <a href = '/".concat(t.slug,"'>\n                                              <img class=\"cat_img\" src=\"").concat(t.mobile_icon,"\" /><br/>\n                                              <span class=\"cat_name\">").concat(t.cat_name,"</span>\n                                            </a>\n                                          </li>")});var d="<div class=\"today-items\">    <span class=\"today-deal\">"+t.title+"</span></div><div class=\"list\">    <ul>"+i+"    </ul>  </div>",r="<div class=\"explore-by\">"+t.title+"</div><div class=\"category-list\"><ul>"+o+"</ul></div>";unrelatedContentList="<div class=\"explore-by-list\">\n                                        <div class=\"explore-by-title\">".concat(t.title,"</div>\n                                        <ul class=\"explore-by-items\">").concat(unrelatedContentList,"</ul>\n                                     </div>"),s.html(r),a.attr("data-name",t.title),d?(a.html(d),fn.msite.home.GAEventForFirstCard(a,!0),$(a).find("ul li a").on("click",function(t){t.preventDefault();var s={Category_Name:$(this).data("name")};cleverTap_events.catSectionClickEvent(s),fn.msite.home.GAEventClick(a,$(this).data("index"),$(this).data("name")),window.location=$(this).attr("href")})):(a.hide(),a.html(""),s.hide(),s.html(""))}else a.hide(),a.html(""),s.hide(),s.html("");fn.msite.getAllDOMImages()}).fail(function(){a.hide(),a.html(""),s.hide(),s.html("")})}},getUSPBanner:function(){var t=$(".banner");fn.ajaxForm({},"POST","/home/get-usp-banner").done(function(a){a=JSON.parse(a),"success"==a.status?(t.html("<img data-src=\""+a.data.msite_url+"\" class=\"banner-size\">"),t.show(),t.attr("data-name","USPBanner"),fn.msite.home.GAEventForFirstCard($(".banner"),!0)):(t.hide(),t.html(""))}).fail(function(){t.hide(),t.html("")})},getBestSellers:function(){var t=$(".best-sellers");fn.ajaxForm({},"POST","/home/best-sellers").done(function(a){if(a=JSON.parse(a),"success"==a.status){var s="",i={category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""};$.map(a.data.product_details,function(t,i){try{var o="",d=fn.msite.discount(t.product_details.product_pricing),r=d==t.product_details.product_pricing.base_price?"MRP: ":"",n=t.product_details.product_merchantdising.merchandise_name,c="";c=80<n.length?"<div class=\"item-discription long-text\" data-itemname = \"".concat(n,"\">").concat(n.substring(0,77)," ... <img src=\"/images/ellipses@2x.png\" class=\"ellipses\"></div>"):"<div class=\"item-discription\" data-itemname = \"".concat(n,"\">").concat(n,"</div>"),o=""==t.product_details.product_master.pieces?-1===t.product_details.product_master.gross.search(/gm/i)&&-1===t.product_details.product_master.gross.search(/kg/i)?"<span class=\"item-pieces\">Pieces: "+t.product_details.product_master.gross+"</span><span class=\"item-weight\">Net: "+t.product_details.product_master.pr_weight+"</span><span class=\"item-status\">"+(t.product_details.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item-pieces\">Gross: "+t.product_details.product_master.gross+"</span><span class=\"item-weight\">Net: "+t.product_details.product_master.pr_weight+"</span><span class=\"item-status\">"+(t.product_details.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item\">"+t.product_details.product_master.pieces+" Pieces </span>",1==t.product_details.product_merchantdising.is_combo&&(o="");var l="";1>t.product_details.product_inventory.stock_units?fn.validateCookieForProduct(t.product_details.product_master.product_id)?l="<div class= \"notify-btn-container\"><button class=\"notify-btn notify-border-red\" data-pr_id = \""+t.product_details.product_master.product_id+"\"><span><image class=\"image_notified\" data-src=\"/images/red-tick.svg\">NOTIFY ME</span></button></div>":l="<div class= \"notify-btn-container\"><button class=\"notify-btn notify_"+t.product_details.product_master.product_id+"\" data_name = \""+t.product_details.product_merchantdising.merchandise_name+"\" data_cat = \""+cat_name?cat_name:"\" data_img = \""+t.product_details.product_merchantdising.pr_image+"\" data_discount = \""+t.product_details.product_pricing.base_discount+"\"  data_price = \""+t.product_details.product_pricing.base_price+"\" data-pr_id = \""+t.product_details.product_master.product_id+"\"><span><image class=\"image\"src=\"/images/notify-icon2.png\">NOTIFY ME</span></button></div>":2==t.product_details.product_inventory.slot_available?(fn.refreshCookie(t.product_details.product_master.product_id),l="<div class=\"cart-button\" data-module = \""+a.data.block_details.block_title+"\"><div><button class=\"addcartbtn addcartbtndisabled\" disabled>ADD TO CART</button></div></div>     <div class=\"item-count\" data-pr_id = \""+t.product_details.product_master.product_id+"\" data-stock = \""+t.product_details.product_inventory.stock_units+"\" data-pr_id = \""+t.product_details.product_master.product_id+"\" data-count = \"0\" data-index = \""+i+"\"><span class=\"icon icon-minus-disabled\" data-module = \""+a.data.block_details.block_title+"\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus-disabled\"></span></div>"):(fn.refreshCookie(t.product_details.product_master.product_id),l="<div class=\"cart-button\" data-module = \""+a.data.block_details.block_title+"\"><button class=\"addcartbtn\">ADD TO CART</button></div>     <div class=\"item-count\" data-pr_id = \""+t.product_details.product_master.product_id+"\" data-stock = \""+t.product_details.product_inventory.stock_units+"\" data-pr_id = \""+t.product_details.product_master.product_id+"\" data-count = \"0\" data-index = \""+i+"\"><span class=\"icon icon-minus\" data-module = \""+a.data.block_details.block_title+"\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus\"></span></div>"),$(".icon-minus-disabled").on("click",function(t){t.preventDefault()}),$(".icon-plus-disabled").on("click",function(t){t.preventDefault()}),s=s+"<li class = \""+t.product_details.product_master.product_id+" swiper-slide\" data-name = \""+t.product_details.product_merchantdising.merchandise_name+"\" data-index = \""+i+"\"><a href=\"/"+t.product_details.category_details.slug+"/"+t.product_details.product_master.slug+"\">  <div class=\"image-holder\"><img class=\"deal-images\" data-src=\""+t.product_details.product_merchantdising.pr_image+"\"  alt=\""+t.product_details.product_merchantdising.product_shortname+"\" title=\""+t.product_details.product_merchantdising.product_shortname+"\">  </div>  <div class=\"itemDetail\">"+c+"<div class=\"short-description\">"+t.product_details.product_merchantdising.usp_desc+"</div>   <p class=\"item-quantity\">"+o+"   </p>   <div class=\"item-value\">    <div class=\"item-price\"><span class=\"real-price\"><span style=\"font-size: 14px;\">"+r+"</span>&#8377; "+d+"</span>"+(d==t.product_details.product_pricing.base_price?"":"<span class=\"deduct-price\" style=\"text-decoration: none;\">MRP: </span><span class=\"deduct-price\" style=\"margin: 0;\"> &#8377;"+t.product_details.product_pricing.base_price+"</span><span class=\"discount-bottom\">"+(t.product_details.product_pricing.rounded_base_discount||Math.floor(t.product_details.product_pricing.base_discount))+"% Off </span>")+"</div>"+l+"   </div>  </div></a> "+fn.productDetails.getStockText(t.product_details.product_inventory,t.product_details.product_master.product_id)+"</li>"}catch(t){console.log({err:t})}});var o="      <div class=\"today-items\">         <span class=\"today-deal\">"+a.data.block_details.block_title+"</span>      </div>      <div class=\"list-item swiper-container\"><ul class=\"item-total-list swiper-wrapper\" data-name=\""+a.data.block_details.block_title+"\">"+s+"      </ul></div>";t.attr("data-name",a.data.block_details.block_title),""==s?(t.hide(),t.html("")):(t.html(o),t.data("ct",0),t.data("len",a.data.product_details.length),fn.msite.home.updateProductcount(),fn.msite.home.addToCart(t,"Home"),fn.msite.home.removeCart(t,"Home"),fn.msite.home.showdDesc(t),fn.msite.home.swiper(t),fn.msite.home.GAEventForFirstCard(t)),$(".item-discription").on("click",function(a){t=$(this),t.hasClass("long-text")&&(a.preventDefault(),a.stopImmediatePropagation(),t.removeClass("long-text"),t.html(""),t.html(t.data("itemname")))}),$(".notify-btn").on("click",function(t){t.preventDefault();var a=$(this),s=a.parent().parent().parent().parent().parent(),o="true"!==$(".contact-form-pop-up").attr("logged_in"),d=a.attr("data-pr_id");localStorage.setItem("loyalty_pr_id",d),i.price=a.attr("data_price"),i.product_id=d,i.product_name=a.attr("data_name"),i.product_image_url=a.attr("data_img"),i.category_name=a.attr("data_cat"),i.discount=a.attr("data_discount"),i.product_url=window.location.href,fn.populateNotifyMeData(i),console.log({hi:"hi"}),"true"===$(".contact-form-pop-up").attr("logged_in")?fn.getNotified(o,a,s):($(".contact-form-pop-up").addClass("show"),fn.noScroll())})}else t.hide(),t.html("")}).fail(function(){t.hide(),t.html("")})},getBlogs:function(){var t=$(".blogs");fn.ajaxForm({},"POST","/home/get-blogs").done(function(a){if(a=JSON.parse(a),"success"==a.status){var s="";$.map(a.data,function(t,a){var i=navigator.userAgent.includes("phonepe-webview")?"#":t.url;s=s+"  <li class = \"swiper-slide\" data-name = \""+t.title+"\" data-index = \""+a+"\">   <a href =\""+i+"\" target = \"_blank\" data-name=\""+t.title+"\" data-index=\""+a+"\">     <div class=\"image-holder\"><img class=\"deal-images\" data-src=\""+t.image+"\" alt=\""+t.title+"\" title=\""+t.title+"\"></div>     <div class=\"itemDetail\">        <p class=\"blog-name\">"+t.title+"</p>     </div> </a>  </li>"});var i="       <div class=\"today-items\">         <span class=\"today-deal\">"+a.title+"</span>      </div>      <div class=\"list-item swiper-container\"><ul class=\"item-total-list swiper-wrapper\" data-name=\""+a.title+"\" >"+s+"      </ul></div>";t.attr("data-name",a.title),""==s?(t.hide(),t.html("")):(t.html(i),fn.msite.home.swiper(t),fn.msite.home.GAEventForFirstCard(t),fn.msite.home.GAWrapperForTilesClick(t,"new")),t.data("len",a.data.length),fn.msite.getAllDOMImages()}else t.hide(),t.html("");t.data("ct",0),fn.msite.getAllDOMImages()}).fail(function(){t.hide(),t.html("")})},getTestimonials:function(t){var a=$(".testimonials"),s=$(".about-licious");fn.ajaxForm({},"POST","/home/get-testimonials").done(function(i){if(i=JSON.parse(i),"success"==i.status){var o="";$.map(i.data.testimonials,function(t,a){o=o+"<li class = \"swiper-slide\" data-name = \""+t.title+"\" data-user = \""+t.username+"\" data-index = \""+a+"\">   <div class=\"image-holder\"><img class=\"deal-images\" data-src=\""+t.display_image+"\" alt=\""+t.title+"\" title=\""+t.title+"\"></div>   <div class=\"item-enquiry\">      <div class=\"instagram-block\">         <div class=\"oval-block\"><img data-src=\""+t.profile_image+"\" class=\"oval-images\"><span><span class=\"oval-name\">"+t.username+"</span></div>         <a href=\""+t.social_url+"\" target = \"_blank\" data-name=\""+t.social_platform+" "+t.title+"\" data-index=\""+a+"\" class=\"instagram_block\">"+(navigator.userAgent.includes("phonepe-webview")?"":"            <div class=\"insta-block\"><img data-src=\""+t.social_logo+"\" class=\"instagram-images\"><span class=\"instagram-text\">"+t.social_platform+"</span></div>")+"         </a>      </div>      <div class=\"dummy-text\">"+t.description+"</div>      <a href=\""+t.web_url+"\" class=\"testimonials_block\" data-name=\""+t.title+"\" ><div class=\"cutlarge-block\"><span class=\"chicken-cut\"><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/chicken-leg2.png\" class=\"chicken-image\"></span><span class=\"cutlarge-text\">"+t.title+"</span>      </div></a>   </div></li>"});var d="<img data-src=\""+i.data.block_details.img_url+"\" class=\"cooking-image\"><p class=\"licious-heading\">"+i.data.block_details.block_title+"</p><div class=\"licious-thought\">"+i.data.block_details.block_description+"</div><div class=\"participate\">   <a href=\""+i.data.block_details.msite_url+"\" data-name=\""+i.data.block_details.button_text+"\"><span class=\"participate-text\">"+i.data.block_details.button_text+"<img data-src=\"/images/arrow.png\" class=\"participate-arrow\"></span></a></div>",r="<div class=\"list-item swiper-container\"><ul class = \"swiper-wrapper\" data-name=\""+i.data.block_details.block_title+"\""+("PDP"==t?"data-title = \"ProductDetailPage - Testimonial\"":"")+" >"+o+"</ul></div>";if(a.attr("data-name",i.data.block_details.block_title),""!=o){if("PDP"==t){var n=0;a.attr("data-title","ProductDetailPage - Testimonial"),$(window).on("scroll",function(){var t=a.position().top;$(window).scrollTop()+$(window).height()-200>t&&0==n&&(fn.msite.home.GAEventForFirstCard(a),n=1)})}a.html(r),$(".about-licious").html(d),fn.msite.home.swiper(a,"pdptest"),fn.msite.home.GAEventForFirstCard(a),fn.msite.home.GAWrapperForTilesClick(a,"new"),$(".participate a").on("click",function(t){t.preventDefault(),fn.msite.home.GAEventClick($(".testimonials"),"a",$(this).data("name")),window.open($(this).attr("href"),"_blank")}),$(".licious-heading").on("click",function(){fn.msite.home.GAEventClick(a,"a",i.data.block_details.block_title)})}else a.hide(),s.hide(),a.html(""),s.html("");fn.msite.getAllDOMImages()}else a.hide(),s.hide(),a.html(""),s.html("")}).fail(function(){a.hide(),a.html(""),s.hide(),s.html("")})},getNews:function(){var t=$(".inthenews");fn.ajaxForm({},"POST","/home/get-news").done(function(a){if(a=JSON.parse(a),"success"==a.status){var s="";$.map(a.data,function(t,a){s=s+"<li class = \"swiper-slide \" data-name = \""+t.description+"\" data-index = \""+a+"\">   <div class=\"news\">      <a href = \""+t.url+"\" target = \"_blank\" data-name = \""+t.description+"\" data-index = \""+a+"\"><p class=\"meat-matters\">"+t.description+"</p>      <div class=\"chronical-block\"><img data-src=\""+t.image_url+"\" class=\"chronical-image\"></div></a>   </div></li>"});var i=" <div class=\"today-items\"><span class=\"today-deal\">"+a.title+"</span>  </div><div class=\"list-item swiper-container \"><ul class = \"swiper-wrapper\" data-name=\""+a.title+"\">"+s+" </ul> </div>";t.attr("data-name",a.title),""==s?(t.hide(),t.html("")):(t.html(i),fn.msite.home.swiper(t),fn.msite.home.GAEventForFirstCard(t),fn.msite.home.GAWrapperForTilesClick(t,"new")),fn.msite.getAllDOMImages()}else t.hide(),t.html("")}).fail(function(){t.hide(),t.html("")})},getCategories:function(){var t=$(".cat"),a=$(".total_item");a.attr("data-name","TopMenu"),fn.ajaxForm({},"POST","/home/get-categories").done(function(s){if(s=JSON.parse(s),"success"==s.status&&s.data&&s.data.length){var i="",o="",d=$(".cat_name").attr("value"),r="";$.map(s.data,function(t,a){t.slug==d?(r=t.id,"selected"):"";i+="<span class=\"total-item-pipe\"><a class = \"clicked".concat(t.slug==d?" selected":"","\" href=\"/").concat(t.slug,"\" data-index = \"").concat(a,"\" data-name = \"").concat(t.cat_name,"\" data-slug = \"").concat(t.slug,"\" data-catid = \"").concat(t.id,"\"><img data-src = \"").concat(t.slug==d?t.mobile_icon_active:t.mobile_icon,"\"/><br/>").concat(t.cat_name,"</a></span>"),o=o+"<li><a href=\"/"+t.slug+"\" data-index = \""+a+"\" data-name = \""+t.cat_name+"\" data-catid = \""+t.id+"\"><img data-src=\""+t.cat_img+"\" class=\"home-images\"><span class=\"catlog-text\">"+t.cat_name+"</span></a></li>",fn.catList.insert(t.slug,t.id)}),t.html(o),a.html(i),$(".cat_id").val(r).trigger("change"),$(".total-item-pipe a").on("click",function(t){t.preventDefault();var s=$(this),i={Category_Name:s.data("name"),page:cleverTap_page_source};cleverTap_events.catHeaderClickEvent(i),fn.msite.home.GAEventClick(a,s.data("index"),s.data("name")),fn.ajaxForm({key:"cat_id",value:s.attr("data-catid")},"POST","/add-key-to-session").done(function(){window.location=s.attr("href")})}),$(".category-display li a").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var a=$(this);fn.msite.home.GAEventClick($(".whole-side"),a.data("index"),a.data("name")),fn.ajaxForm({key:"cat_id",value:a.attr("data-catid")},"POST","/add-key-to-session").done(function(){window.location=a.attr("href")})}),0<$(".selected").length&&a.scrollTo($(".selected").offset().left-($(window).width()/2-20)),$(".slim-banner").css("margin-top","86px")}else t.hide(),a.hide();fn.msite.getAllDOMImages()})},getPopularSearches:function(){fn.ajaxForm({},"POST","/home/popular-search").done(function(t){if(t=JSON.parse(t),"success"==t.status){var a="";$.map(t.data,function(t){a=a+"<a href=\""+t.msite_category_url+"\"><span class=\"cation-name\">"+t.category_name+"</span></a><p class=\"catelog-detail\">",$.map(t.products,function(t){a=a+"<span class = \"popular-list\"><a href=\""+t.msite_product_url+"\">"+t.product_name+"</a></span>"}),a+="</p>"}),a?$(".catalog-name").html(a):($(".catalog-name").hide(),$(".footerpopular-search").hide())}else $(".catalog-name").hide(),$(".footerpopular-search").hide()})},getSEO:function(){fn.ajaxForm({},"POST","/home/get-seo").done(function(t){t=JSON.parse(t);var a="";"success"==t.status?($.map(t.data,function(t){a=a+"<div class=\"why-licious\"><span class=\"why-licioushead\">"+t.title+"</span><p class=\"whylicious-text\">"+t.description+"</p></div>"}),$(".SEO").html(a)):$(".SEO").hide()})},addToCart:function(t,a){t.find(".cart-button").on("click",function(s){s.stopImmediatePropagation(),s.preventDefault(),"search"!==a&&$(".pdpcart").show();var i=$(this);if(!i.hasClass("disabled")){var o=i.parent().find(".item-count"),d=parseInt(o.data("stock")),r=1,n=o.data("pr_id"),c=i.data("module"),l=fn.productDetails.getSingleProductTile(i.parent().parent().parent().parent().find(".stock_content"),n);r<=d?(fn.msite.showloader(),console.log("line no 7129",n,r),fn.msite.addToCart(n,r).done(function(s){if(resp=JSON.parse(s),s=resp.product?resp:fn.msite.checkForCombo(resp,n),console.log("add to cart butoon 7263",resp),fn.updateLsProducts(resp.product),"success"==s.status){""==s.message?fn.msite.add_alert("remove",s.message):fn.msite.add_alert("hide",s.message),fn.productDetails.getUpdatedStockText(l,s.product),fn.msite.home.updateCart(s,"add"),fn.msite.home.updateQuantity(s),fn.msite.home.updateComboChildProductsCount(s);var i={Checkout_Flow:"old_checkout",incoming_source:fn.getSourcePage(),"Product ID":s.product.product_id,"Category ID":s.product.category_id?s.product.category_id:"","Product Name":s.product.product_name,Price:s.product.base_price,Quantity:s.quantity,hub_id:fn.getterLS("hub")};clevertap.event.push("Added to Cart",i),clevertap.event.push("Product added to cart",i),fbq("track","AddToCart",{content_type:"product",content_ids:[s.product.product_id],content_name:s.product.product_name,content_category:s.product.category_name,value:s.product.base_price,currency:"INR"});var d=parseInt(o.data("index"));"Home"==a&&fn.msite.home.GAEventCart(t,d,"ProductAddedToCart",s.product.base_price),"ProductList"==a&&fn.msite.home.GAEventOther("Cart",s.product.category_name+"CategoryPageProductAddedToCart",t.find("ul li").eq(d).data("name"),s.product.base_price),"PDP"==a&&fn.msite.home.GAEventOther("Cart",s.product.category_name+"CategoryPDPProductAddedToCart",s.product.product_name,s.product.base_price)}else fn.msite.showAlert("notif",s.message)}).always(function(){fn.msite.hideloader()})):fn.msite.add_alert("hide","Only "+d+" units are available")}}),t.find(".icon-plus").on("click",function(s){s.stopImmediatePropagation(),s.preventDefault();var i=$(this);if(!i.hasClass("disabled")){var o=parseInt(i.parent().data("stock")),d=parseInt(i.parent().data("count")),r=i.parent().data("pr_id"),n=fn.productDetails.getSingleProductTile(i.parent().parent().parent().parent().parent().find(".stock_content"),r);++d,d<=o?(fn.msite.showloader(),fn.msite.addToCart(r,d).done(function(s){if(resp=JSON.parse(s),s=resp.product?resp:fn.msite.checkForCombo(resp,r),fn.msite.home.updateComboChildProductsCount(s),fn.updateLsProducts(s.product),"success"==s.status){""==s.message?fn.msite.add_alert("remove",s.message):fn.msite.add_alert("hide",s.message),fn.productDetails.getUpdatedStockText(n,s.product),fn.msite.home.updateCart(s,"add"),fn.msite.home.updateQuantity(s);var o={Checkout_Flow:"old_checkout",incoming_source:fn.getSourcePage(),"Product ID":s.product.product_id,"Category ID":s.product.category_id?s.product.category_id:"","Product Name":s.product.product_name,Price:s.product.base_price,Quantity:s.quantity,hub_id:fn.getterLS("hub")};clevertap.event.push("Added to Cart",o),clevertap.event.push("Product added to cart",o),fbq("track","AddToCart",{content_type:"product",content_ids:[s.product.product_id],content_name:s.product.product_name,content_category:s.product.category_name,value:s.product.base_price,currency:"INR"});var d=parseInt(i.parent().data("index"));"Home"==a&&fn.msite.home.GAEventCart(t,d,"ProductAddedToCart",s.product.base_price),"ProductList"==a&&fn.msite.home.GAEventOther("Cart",s.product.category_name+"CategoryPageProductAddedToCart",t.find("ul li").eq(d).data("name"),s.product.base_price),"PDP"==a&&fn.msite.home.GAEventOther("Cart",s.product.category_name+"CategoryPDPProductAddedToCart",s.product.product_name,s.product.base_price)}else fn.msite.showAlert("notif",s.message)}).always(function(){fn.msite.hideloader()})):fn.msite.add_alert("hide","Only "+o+" units are available")}})},updateComboChildProductsCount:function(t){t.combo_products&&(console.log("add to cart",t),$.map(t.combo_products,function(t){var a=$(document).find("."+t.product_id),s=parseInt(t.quantity);1<=s&&(a.find(".cart-button").hide(),a.find(".item-count").show()),0==s&&(a.find(".cart-button").show(),a.find(".item-count").hide()),a.find(".item-number").html(s),a.find(".item-count").data("count",s),a.parent().find(".stock_details").length||a.parent().append(fn.productDetails.getStockText(t,t.product_id));var i=a.find(".stock_content");i.length&&fn.productDetails.getUpdatedStockText(i,t)}))},removeCart:function(t,a){t.find(".icon-minus").on("click",function(s){s.stopImmediatePropagation(),s.preventDefault();var i=$(this),o=parseInt(i.parent().data("stock")),d=parseInt(i.parent().data("count")),r=i.parent().data("pr_id"),n=fn.productDetails.getSingleProductTile(i.parent().parent().parent().parent().parent().find(".stock_content"),r);module=i.data("module"),--d,$(".pdpcart").hide(),1<=d?($(".pdpcart").show(),fn.msite.showloader(),fn.msite.removeFromCart(r,d).done(function(s){if(resp=JSON.parse(s),s=resp.product?resp:fn.msite.checkForCombo(resp,r),console.log("remove from cart",s),fn.msite.home.updateComboChildProductsCount(s),fn.msite.home.updateComboCount(s.combo),"success"==s.status){""==s.message?fn.msite.add_alert("remove",s.message):fn.msite.add_alert("hide",s.message),fn.msite.home.updateCart(s,"remove"),fn.productDetails.getUpdatedStockText(n,s.product),fn.msite.home.updateQuantity(s),clevertap.event.push("Product Removed from Cart",{"Product ID":s.product.product_id,"Product Name":s.product.product_name,Price:s.product.base_price});var o=parseInt(i.parent().data("index"));"Home"==a&&fn.msite.home.GAEventCart(t,o,"ProductRemovedFromCart",s.product.base_price),"ProductList"==a&&fn.msite.home.GAEventOther("Cart",s.product.category_name+"CategoryPageProductRemovedFromCart",t.find("ul li").eq(o).data("name"),s.product.base_price),"PDP"==a&&fn.msite.home.GAEventOther("Cart",s.product.category_name+"CategoryPDPProductRemovedFromCart",s.product.product_name,s.product.base_price),fn.updateLsProducts(s.product)}else alert("something went wrong")}).always(function(){fn.msite.hideloader()})):(fn.msite.showloader(),fn.msite.deleteFromCart(r).done(function(s){if(s=JSON.parse(s),fn.msite.home.updateComboChildProductsCount(s),fn.msite.home.updateComboCount(s.combo),"success"==s.status){$(".pdpcart").hide(),fn.msite.home.updateCart(s,"remove"),fn.productDetails.getUpdatedStockText(n,s.product),fn.msite.home.updateQuantity(s),""==s.message?fn.msite.add_alert("remove",s.message):fn.msite.add_alert("hide",s.message),clevertap.event.push("Product Removed from Cart",{"Product ID":s.product.product_id,"Product Name":s.product.product_name,Price:s.product.base_price});var o=parseInt(i.parent().data("index"));"Home"==a&&fn.msite.home.GAEventCart(t,o,"ProductRemovedFromCart",s.product.base_price),"ProductList"==a&&fn.msite.home.GAEventOther("Cart",s.product.category_name+"CategoryPageProductRemovedFromCart",t.find("ul li").eq(o).data("name"),s.product.base_price),"PDP"==a&&fn.msite.home.GAEventOther("Cart",s.product.category_name+"CategoryPDPProductRemovedFromCart",s.product.product_name,s.product.base_price),fn.updateProductLsRemove(s.product)}else alert("something went wrong")}).always(function(){fn.msite.hideloader()}))})},reverseTimer:function(t){var s=Math.floor;t=t.replace(" ","T");var i=t.split(/[^0-9]/);countDownDate=new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5]).getTime();var a=setInterval(function(){currtime=new Date;var t=new Date().getTime(),i=(countDownDate-t)/1e3;countDownDate<t&&($(".todays-deal").hide(),$(".timer").hide(),clearInterval(a));var o=s(i/86400),d=s(i%86400/3600)+24*o,r=s(i%3600/60),n=s(i%60);$(".timer").html(("0"+d).slice(-2)+":"+("0"+r).slice(-2)+":"+("0"+n).slice(-2))},1e3)},updateCart:function(t){0>=t.items_count?($(".cart-item-bar").removeClass("show"),$(".cart-icon").removeClass("loaded"),$(".numbers-item").data("ct",0),$(".numbers-item").hide(),$(".cart-count-top").data("ct",0).hide(),fn.msite.home.getMobileOperatingSystem()):($(".cart-item-bar").addClass("show"),$(".cart-icon").addClass("loaded"),$(".Apple-playstore").hide(),$(".google-playstore").hide(),$(".numbers-item").data("ct",t.items_count||t.item_count),$(".numbers-item").html(t.items_count||t.item_count),$(".numbers-item").show(),$(".cart-count-top").data("ct",t.items_count||t.item_count).html(t.items_count||t.item_count).show())},updateComboCount:function(t){$.map(t,function(t){var a=$(document).find("."+t.product_id),s=parseInt(t.quantity);1<=s&&(a.find(".cart-button").hide(),a.find(".item-count").show()),0==s&&(a.find(".cart-button").show(),a.find(".item-count").hide()),a.find(".item-number").html(s),$(".item-count").attr("data-qty",s),a.find(".item-count").data("count",s),a.parent().find(".stock_details").length||a.parent().append(fn.productDetails.getStockText(t,t.product_id));var i=a.find(".stock_content");i.length&&fn.productDetails.getUpdatedStockText(i,t)})},updateQuantity:function(t){var a=$(document).find("."+t.product_id),s=t.quantity;1<=s&&(a.find(".cart-button").hide(),a.find(".cart-button-disabled").hide(),a.find(".item-count").show()),0==s&&(a.find(".cart-button").show(),a.find(".item-count").hide()),a.find(".item-number").html(s),a.find(".item-number").data("count",s),a.find(".item-count").data("count",t.quantity),fn.msite.home.updateCart(t,"qty"),fn.msite.setFinalPayment(parseInt(100*(t.grand_total||t.cart.subtotal))),fn.msite.hideloader()},updateProductcount:function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:void 0,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:void 0;fn.msite.getPrCount().done(function(s){try{s=JSON.parse(s),fn.setLsProducts(s.products);var i=!1;if($.map(s.products,function(t){i=t.product_id==a;var s=$(document).find("."+t.product_id),o=parseInt(t.quantity);1<=o&&(s.find(".cart-button").hide(),s.find(".cart-button-disabled").hide(),s.find(".item-count").show()),0==o&&(s.find(".cart-button").show(),s.find(".item-count").hide()),s.find(".item-number").html(o),$(".item-count").attr("data-qty",o),s.find(".item-count").data("count",o),s.parent().find(".stock_details").length||s.parent().append(fn.productDetails.getStockText(t,t.product_id));var d=s.find(".stock_content");d.length&&fn.productDetails.getUpdatedStockText(d,t)}),fn.msite.home.updateComboCount(s.combo),(void 0===s.products||0==s.products.length||!i)&&void 0!==t&&void 0!==a){var o=$(document).find("."+a);o.parent().find(".stock_details").length||o.parent().append(fn.productDetails.getStockText(t,a))}fn.msite.home.updateCart(s,"qty"),fn.msite.setFinalPayment(parseInt(100*s.grand_total)),fn.msite.hideloader()}catch(t){}})},getMobileOperatingSystem:function(){var t=navigator.userAgent||navigator.vendor||window.opera;/windows phone/i.test(t)||(/android/i.test(t)&&(!navigator.userAgent.includes("phonepe-webview")&&$(".google-playstore").show(),$(".location-text").on("focus",function(){}),$(".location-text").on("blur",function(){$(".location-popup").hasClass("fit")||console.log("hii2"),$(".loc-pop-cont-inner").removeClass("hide")})),/iPad|iPhone|iPod/.test(t)&&!window.MSStream&&!navigator.userAgent.includes("phonepe-webview")&&$(".Apple-playstore").show())},lazyLoad:function(){var t=$(".todays-deal"),a=$(".youmaylike"),s=$(".explore"),i=$(".uspbanner"),o=$(".best-sellers"),d=$(".blogs"),r=$(".testimonials"),n=$(".inthenews"),c=!1,l=!1,p=!1,m=!1,u=!1,_=!1,g=!1,h=!1,v=!1,y=!1;t.addClass("show"),fn.msite.home.GAEventForFirstCard(t),window.addEventListener("scroll",function(){t.position().top<$(document).scrollTop()+$(window).height()-150&&!c&&(!fn.Queue.youmaylike&&(fn.msite.home.getRecommendation(),v=!0),c=!0),a.position().top<$(document).scrollTop()+$(window).height()-150&&!l&&(a.addClass("show"),!fn.Queue.explore&&(fn.msite.home.exploreCategories(),y=!0),v&&fn.msite.home.GAEventForFirstCard(a),l=!0),s.position().top<$(document).scrollTop()+$(window).height()-150&&!p&&(s.addClass("show"),fn.msite.home.getUSPBanner(),y&&fn.msite.home.GAEventForFirstCard(s,!0),p=!0),i.position().top<$(document).scrollTop()+$(window).height()-150&&!m&&(i.addClass("show"),fn.msite.home.getBestSellers(),fn.msite.home.GAEventForFirstCard(i,!0),m=!0),o.position().top<$(document).scrollTop()+$(window).height()-150&&!u&&(o.addClass("show"),fn.msite.home.getBlogs(),fn.msite.home.GAEventForFirstCard(o),u=!0),d.position().top<$(document).scrollTop()+$(window).height()-150&&!_&&(d.addClass("show"),fn.msite.home.getTestimonials(),fn.msite.home.GAEventForFirstCard(d),_=!0),r.position().top<$(document).scrollTop()+$(window).height()-150&&!g&&(r.addClass("show"),fn.msite.home.getNews(),fn.msite.home.GAEventForFirstCard(r),g=!0),n.position().top<$(document).scrollTop()+$(window).height()-150&&!h&&(n.addClass("show"),fn.msite.home.GAEventForFirstCard(n),h=!0)})},swiper:function(t,a){t.find(".list-item").swiper({mode:"horizontal",spaceBetween:10,slidesPerView:1.1,slidesOffsetBefore:10,slidesOffsetAfter:30,slideElement:"li",loop:!1,freeModeFluid:!0,onSlideChangeEnd:function(s){var i;i="pdptest"==a?t.find("ul li").eq(s.activeIndex).data("user")+" - "+t.find("ul li").eq(s.activeIndex).data("name")+" - Pos:"+(s.activeIndex+1):t.find("ul li").eq(s.activeIndex).data("name")+" - Pos:"+(s.activeIndex+1),ga("send",{hitType:"event",eventCategory:t.data("title")||"ScreenHome - "+t.data("name"),eventAction:"Impression",eventLabel:i})}})},GAEventForFirstCard:function(t,a){if(t&&t[0])if(1==fn.Queue[t[0].classList[1]]&&t.data("name")){fn.Queue[t[0].classList[1]]=parseInt(fn.Queue[t[0].classList[1]])+1;var s={};s.hitType="event",s.eventCategory=t.data("title")||"ScreenHome - "+t.data("name"),s.eventAction="Impression",a||(s.eventLabel=(t.find("ul li").eq(0).data("user")?t.find("ul li").eq(0).data("user")+" - ":"")+t.find("ul li").eq(0).data("name")+" - Pos:"+1),ga("send",s)}else fn.Queue[t[0].classList[1]]=1<=fn.Queue[t[0].classList[1]]?parseInt(fn.Queue[t[0].classList[1]])+1:1},GAEventCart:function(t,a,s,i){var o={};o.hitType="event",o.eventCategory="Cart",o.eventAction=(t.data("title")||"HomePage"+t.data("name"))+s,o.eventLabel=t.find("ul li").eq(a).data("name")+" - Pos:"+(a+1),i&&(o.eventValue=i),ga("send",o)},GAEventClick:function(t,a,s){if(s){var i={};i.hitType="event",i.eventCategory=t.data("title")||"ScreenHome - "+t.data("name"),i.eventAction="Click",i.eventLabel=s+(isNaN(a)?"":" - Pos:"+parseInt(a+1)),i.transport="beacon",ga("send",i)}else;},GAEventImpression:function(t){if(t.data("name")){var a={};a.hitType="event",a.eventCategory="ScreenHome - "+t.data("name"),a.eventAction="Impression",ga("send",a)}},GAEventOther:function(t,a,s,i){if(t&&a){var o={};o.hitType="event",o.eventCategory=t,o.eventAction=a,o.eventLabel=s,i&&(o.eventValue=i),ga("send",o)}},GAWrapperForTilesClick:function(t,a){t.find("ul li a").on("click",function(s){s.preventDefault(),fn.msite.home.GAEventClick(t,$(this).data("index"),$(this).data("name")),"new"==a?window.open($(this).attr("href"),"_blank"):window.open($(this).attr("href"))})},hoverBanner:function(t,a){t&&(fn.msite.home.homeBannerSwiper=t),fn.msite.home.homeBannerSwiper&&(a?fn.msite.home.homeBannerSwiper.startAutoplay():fn.msite.home.homeBannerSwiper.stopAutoplay())},getCookie:function(t){for(var a=t+"=",s=document.cookie.split(";"),o=0,d;o<s.length;o++){for(d=s[o];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""},setCookie:function(t,a,s){new Date;document.cookie=t+"="+a+";"+s+";path=/"},getReviewRating:function(t,a){if("Home page"===t)var s="/home/get-reviewrating",i="",o="GET";else{var s="/get-reviewratingbyid",i={shipment_id:a},o="POST";$(".review-rating-container").css("position","sticky"),$(".review-rating-container").css("position","-webkit-sticky"),$(".review-rating-container").css("bottom","0px")}fn.ajaxForm(i,o,s).done(function(a){try{var s=JSON.parse(a),i=!0;if(200===s.statusCode){var i="Home page"!==t||fn.msite.home.getCookie("reviewrating")!==s.data.shipment_id;if(i){var o=s.data.basic_info,d="Home page"===t?"<div class=\"review-cross\"></div>":"",r="<div class=\"rr-wrap\"><div class=\"review-top\"><div class=\"review-img-wrap\"><div class=\"review-prod-image\"><a href=\"/review-ratings/"+s.data.shipment_id+"\"><img data-src=\""+o.item_images[0]+"\"></a></div></div><div class=\"review-wrapper\">"+d+"<a href=\"/review-ratings/"+s.data.shipment_id+"\"><div class=\"review-head\">"+o.rating_title+"<img data-src=\"/images/arrow.png\" /></div><div class=\"review-title1\">"+o.items_message+" </div><div class=\"review-title2\"><span>Shipment ID: "+s.data.shipment_id+"</span> | <span>"+o.delivery_date+"</span></div></a></div></div><div class=\"review-bottom\"><a href=\"tel:"+o.phone+"\" class=\"rating-clicktocall\"><div class=\"review-call-title\">"+o.call_customer_care_text+"<img class=\"call-icon\" data-src=\"/images/callback.svg\" /></div></a></div></div>";$(".orderstatus-pay-later").hasClass("show")&&($(".review-rating-wrapper").css("margin-bottom","70px"),$(".review-rating-container").css("bottom","65px")),$(".review-rating-wrapper").html(r);var n={},c=s.data.event_info;n.from_module=t,n.shipment_id=s.data.shipment_id,n.shipment_type=c.shipment_type,n.split=c.split.toString(),n.city=c.city,n.hub=o.hub,n.user_type=c.customer_type,n.item_count=o.item_list.length,n.item_list=o.item_list.map(function(t){return t.pr_name}).join(),n.category_list=c.category_list,n.amount=c.amount.toString(),n.discount=c.discount.toString();var l=new Date(c.delivered_date.split("T")[0]);n.delivered_date=l.toLocaleDateString().replace(/\//g,"-");var p=new Date(c.order_date.split("T")[0]);n.order_date=p.toLocaleDateString().replace(/\//g,"-"),clevertap.event.push("rate",Object.assign({Source:"rate_order"},n)),ga("send",{hitType:"event",eventCategory:"rate_order",eventAction:"rate",eventLabel:JSON.stringify(n)}),$(".rating-clicktocall").click(function(){var t=new Date;n.submit_date=t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear(),n.Source="rate_order",clevertap.event.push("rate_mdbin",n),ga("send",{hitType:"event",eventCategory:"rate_order",eventAction:"rate_mdbin",eventLabel:JSON.stringify(n)})}),$(".review-cross").click(function(){$(".review-rating-wrapper").addClass("hide"),console.log("rate_close - "+JSON.stringify(n)),clevertap.event.push("rate_order",n),ga("send",{hitType:"event",eventCategory:"rate_order",eventAction:"rate_close",eventLabel:JSON.stringify(n)}),fn.ajaxForm({shipment_id:s.data.shipment_id},"GET","/home/ignore-reviewrating").done(function(){})})}}}catch(t){console.log(t)}})}},getAddress:function(){var t=$(".loc-addr-pop");t.hide(),$(".location-popup-text").addClass("hide"),fn.ajaxForm({},"GET","/checkout_oos/get-addr").done(function(a){var s=JSON.parse(a);if("success"==s.status){var i=localStorage.getItem("default_addr_id"),o=$(".address-area").html().trim(),d=localStorage.getItem("hub"),r="";$.map(s.address,function(t,a){try{r=r+"<span class = \"addr "+(t.address_id==i&&t.hub_id==d?"selected":"")+"\" data-id = \""+t.address_id+"\" data-index= \""+a+"\" data-lat = \""+t.lat+"\" data-lng = \""+t.lng+"\" data-city =\""+t.city+"\" data-loc=\""+fn.msite.getFormattedAddress(t)+"\">"+fn.msite.getFormattedAddress(t)+"</span>"}catch(t){}}),t.find(".addr-container").html(r),$(".addr").on("click",function(){var t=$(".subloc").val(),a=$(this),s=a.data("index");if(!a.hasClass("selected")){var i=$(this).data("city");fn.msite.getLocation(a.data("lat"),a.data("lng"),a.data("loc"),i,function(i,o){i||"success"!=o.result||(localStorage.setItem("default_addr_id",a.data("id")),t!=null&&ga("send",{hitType:"event",eventCategory:"SL-"+t+" - SavedAddress",eventAction:"Click",eventLabel:s+1}),window.location.reload())})}}),t.show(),$(".location-popup-text").removeClass("hide"),$(".location-popup").removeClass("fit"),$(".location-popup").hide()}else;}).fail(function(){})},discount:function(t){return Math.round(t.base_price-t.base_price*t.base_discount/100)},getCODEligibility:function(t){return fn.ajaxForm({},"GET","/COD-eligibility/"+t)},getcities:function(){fn.msite.showloader(),fn.ajaxForm({},"GET","/get-cities").done(function(t){t=JSON.parse(t),$(".cityandstate .city").val(t.data.city_name),$(".cityandstate .state").val(t.data.state),$(".cityandstate .city").attr("data-id",t.data.city_id),$(".text.location_text").html("Locality / Area"),0===t.data.sub_location?($(".ui.dropdow n").hide(),$(".line2Box").show()):($(".ui.dropdown").show(),$(".line2Box").hide(),fn.msite.getSublocation(t.data.city_id))}).always(function(){fn.msite.hideloader()})},getCitiesDetails:function(){fn.msite.showloader();var t=!0;fn.ajaxForm({},"GET","/cities-detail").done(function(a){a=JSON.parse(a);var s=$(".cityandstate .city").val().toLowerCase();$(".ui.dropdown").hide(),$(".line2Box").show();var i=!0;$.map(a.data,function(a){i&&0<=a.city_tags.toLowerCase().search(s)&&(i=!1,$(".address-form .cityandstate .city").attr("data-id",a.id),1==a.sub_location&&($(".ui.dropdown").show(),$(".line2Box").hide(),t=!1,fn.msite.getSublocation(a.id)))})}).always(function(){t&&fn.msite.hideloader()})},getSublocation:function(t){fn.msite.showloader(),fn.ajaxForm({city_id:t},"POST","/get-sublocation").done(function(t){t=JSON.parse(t);var a="";$(".dropdown .menu").html(""),$.map(t.data,function(t){a="<div class=\"item\" data-value=\""+t.sublocation+"\" data-id = \""+t.id+"\">"+t.sublocation+"</div>",$(".dropdown .menu").append(a)})}).always(function(){fn.msite.hideloader()})},renderRecentSearches:function(){var t=JSON.parse(localStorage.getItem("recentSearches")||!1)||[],a=$(".searches");a.html("");var s=0;t.map(function(t){3>s&&(s++,a.append("<div class=\"search-item\" data-lat = \""+t.lat+"\" data-lng = \""+t.lng+"\" data-loc = \""+t.location+"\" data-city=\""+t.city+"\"><span class=\"marker\"></span><span class =\"search-string\">"+t.location+"</span></div>"))}),s&&a.append("<div class=\"default-text\">Your recent searches</span></div>"),$(".search-item").on("click",function(t){t.stopImmediatePropagation();var a=$(this),s=$(this).data("city");fn.msite.getLocation(a.data("lat"),a.data("lng"),a.data("loc"),s,function(t,a){t||"success"!=a.result?$(".thanku-box").show():(fn.msite.hideloader(),localStorage.setItem("default_addr_id",""),window.location.reload())})})},getLocation:function(t,a,s,i,o){fn.msite.showloader(),fn.ajaxForm({lat:t,lng:a,location:s},"POST","/checkout_oos/get-location").done(function(d){var r=$(".subloc").val();if("success"==d.result){clevertap.event.push("Location Changed",{lat:t,lon:a,location:s});var n="",c=JSON.parse(localStorage.getItem("recentSearches")||!1)||[],l=JSON.parse(d.hub);n=0==c.length?"Indiranagar, Bengaluru, Karnataka, India":c[0].location,r!=null&&ga("send",{hitType:"event",eventCategory:"SL-"+r+" - Change Address",eventAction:"Click",eventLabel:"Loc: "+s+" Lat: "+t+" Lon: "+a});var l=JSON.parse(d.hub);localStorage.setItem("default_lat",t),localStorage.setItem("default_lng",a),localStorage.setItem("city",i),$(".hub-id").val(l.hub),localStorage.setItem("hub",l.hub),fn.msite.storeAddresses(t,a,s,i);var p=l.hub,m=l.city_name;localStorage.setItem("city",m);var u=$(".user_logged_in").val();"true"==u?window.dataLayer.push({user_logged_in:!0,user_current_hub:p,user_current_location:t+", "+a,user_current_city:m}):window.dataLayer.push({user_logged_in:!1,user_current_hub:p,user_current_location:t+", "+a,user_current_city:m}),-1==window.location.href.indexOf("/customer/address")&&window.location.reload()}else fn.msite.hideloader(),fn.msite.home.GAEventOther("LocationError","Error","Loc: "+s+" Lat: "+t+" Lon: "+a);o(!1,d)}).fail(function(t){fn.msite.hideloader(),o(!0,t)})},getGPSLocation:function(t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var s={lat:a.coords.latitude,lng:a.coords.longitude};fn.msite.showloader(),fn.ajaxForm({lat:s.lat,lng:s.lng},"GET","/map/get-reverse-geo-code").done(function(a){resp=JSON.parse(a);var i=localStorage.getItem("city");fn.msite.getLocation(s.lat,s.lng,resp.data[0].formatted_address,i,t)})},function(){alert("Unable to get your Location")}):alert("Your browser does not support this feature")},storeAddresses:function(t,a,s,o){for(var d=JSON.parse(localStorage.getItem("recentSearches")||!1)||[],r=0;r<d.length;r++)(d[r].lat==t&&d[r].lng==a||d[r].loc==s)&&(d.splice(r,1),r--);d.unshift({lat:t,lng:a,location:s,city:o}),d=d.splice(0,3),localStorage.setItem("recentSearches",JSON.stringify(d))},getFormattedAddress:function(t){return t.line1+", "+t.line2+", "+t.city+", "+t.state+", "+t.pincode},locationValidate:function(t){fn.ajaxForm({lat:t.lat,lng:t.lng},"POST","/locationValidate").done(function(t){$(".address_error").html(""),t=JSON.parse(t),"success"==t.status?($(".address_error").hide(),document.getElementById("lock-button").disabled=!1):"error"==t.status&&($(".address_error").show(),$(".address_error").html(t.message),$(".confirm-location-wrap .confirm-address_error").show(),$(".confirm-location-wrap .confirm-address_error").html(t.message),document.getElementById("lock-button").disabled=!0)})},getSavedAddress:function(t){fn.msite.showloader(),fn.msite.showAddrPop(),fn.ajaxForm({},"GET","/checkout_oos/get-addr").done(function(a){resp=JSON.parse(a);var s=$(".address-form"),i=s.find(".line1"),o=localStorage.getItem("user_name"),d=localStorage.getItem("user_email");fn.msite.resetForm(),$(".add-new").html("Update"),$(".email").hide(),$.map(resp.address,function(a){return t==a.address_id?(s.attr("data-addrid",a.address_id),i.attr("data-lat",a.lat),i.attr("data-lng",a.lng),s.find(".name").val(o),s.find(".mobile").val(a.contact),s.find(".line1").val(a.line1),s.find(".line2").val(a.line2),s.find(".landmark").val(a.landmark),s.find(".city").val(a.city),s.find(".email").val(d),$("#address-text").attr("data-state",a.state),$("#address-text").attr("data-pincode",a.pincode),fn.msite.hideloader(),void fn.msite.showAddrPop()):void 0})})},getActiveOrder:function(){return new Promise(function(t){fn.ajaxForm({},"GET","/home/get-active-order").done(function(a){var s=JSON.parse(a);if(t(a),"success"==s.statusMessage){var i=function(t){return"discount"==t.key.toLowerCase()},o=s.data.shipments[0],d="",r=o.shipment_items.map(function(t){return t.product_name}).join(),n=o.shipment_items.map(function(t){return t.category_list}).join(),c={from_module:"Home page",state:"",substate:"",shipment_id:o.order_id,cta:"",shipment_type:"0"==o.express?"Scheduled":"Express",split:o.is_split?o.is_split.toString():"false",city:localStorage.getItem("city"),hub:localStorage.getItem("hub"),user_type:s.data.customer_type,item_count:o.shipment_items.length.toString(),item_list:r,category_list:n,amount:o.amount.total.toString(),discount:o.amount.split[o.amount.split.findIndex(i)].value.toString()};5==o.order_id?(c.state="Rejected",c.substate="Rejected"):(c.state=o.shipment_stages[o.state_id-1].status_message,c.substate=o.shipment_stages[o.state_id-1].message),$(".active-order-wrapper").html(""),$(".payment-charges").html(""),$(".active-order-wrapper").addClass("show");var l=s.data.payment_info,p=l.payment_status,m="CREATED_WITH_FAILURE"===p?"<div class=\"payment-failed\"><div class=\"container\"><div class=\"payment-failed-image\"><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/alert-pay.png\"></div><div class=\"payment-failed-text-container\"><div class=\"payment-failed-title\">Payment Unsuccessfull !!</div></div></div></div>":"CREATED_WITH_UNKNOWN"===p?"<div class=\"not-confirmed\"><div class=\"container\"><div class=\"not-confirmed-image\"><img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/not-confirm-icon.png\" /></div><div class=\"not-confirmed-text-container\"><div class=\"not-confirmed-title\">Payment not confirmed!</div></div></div></div>":"<span>"+o.homepage_date.label+"</span>",u="CREATED_WITH_FAILURE"===p?"Retry":"View",_=s.data.overdue,g="CREATED_WITH_FAILURE"===p||"CREATED_WITH_UNKNOWN"===p?"<div class=\"track-bottom\"/>":"<div class=\"track-bottom\"><div class=\"qty\">"+(o.shipment_items.length+" Items")+"".concat(_?"<div class=\"overdue-text\" id=\"overdue\">".concat(_.overdue_text,"</div>"):"")+"</div></div>",h="",v="";4>=o.state_id?(h=o.shipment_stages[o.state_id-1].status_message,v=o.shipment_stages[o.state_id-1].message):(h=o.shipment_messages.status_message,v=o.shipment_messages.message);var y="<div class=\"active-order-wrap\"><div class=\"img-wrapper\"><div class=\"shipment-image\"><img data-src=\""+o.shipment_messages.image+"\"></div></div><div class=\"track-wrapper\"><div class=\"status-head\">"+h+"</div><div class=\"order-status-title\">"+v+"</div>"+g+"</div></div>";$(".active-order-wrapper").append(y),$(".amount-section .pay-amt").html("Pay: &#8377; "+o.amount.total),null!=o.track_link&&($(".locus-link").attr("src",""),$(".locus-link").attr("src",o.track_link)),!0==o.amount.is_payble&&3==o.state_id?(d="trackpay",$(".locus-screen .footer").addClass("show"),$(".locus-screen iframe").css("height","82%"),$(".track-bottom").append("<button class=\"track-pay-btn\">Track & Pay</button>")):!0==o.amount.is_payble&&3<o.state_id?(d="pay",$(".track-bottom").append("<button class=\"pay-btn\">Pay</button>")):3==o.state_id?(d="track",$(".track-bottom").append("<button class=\"track-btn\">Track</button>")):(d="view",$(".track-bottom").append("<button class=\"view-btn\">"+u+"</button>")),c.cta=u,$.map(o.amount.split,function(t){var a="wallet"==t.key.toLowerCase()||"liciouswallet"==t.key.toLowerCase()?"L_wallet":"",s=void 0===t.message?"":"<span class=\"message\">"+t.message+"</span>",i="<li class=\"pay_list \"><div class=\"key\"><span>"+t.attribute+"</span>"+s+"</div><div class=\"value\">"+(("wallet"==t.key.toLowerCase()||"liciouswallet"==t.key.toLowerCase())&&0<t.value||"discount"==t.key.toLowerCase()&&0<t.value?"-":"")+t.value+"</div></li>";$(".payment-charges").append(i)});var f=Object.assign({Source:"post_order",Screen:"Home page"},c);$(".active-order-wrap").on("click",function(){if(clevertap.event.push("track_order",f),ga("send",{hitType:"event",eventCategory:"post_order",eventAction:"track_order",eventLabel:JSON.stringify(c)}),"trackpay"==d&&(fn.msite.trackReload(),setTimeout(function(){window.location.href="/customer/order-status/"+o.parent_order_id+"#"+o.order_id},300)),"pay"==d){localStorage.setItem("Pay_later",!0),localStorage.setItem("payable-amount",o.amount.total);var t={shipment_amt:o.amount.total,shipment_id:o.order_id,parent_order_id:o.parent_order_id,order_charges:o.amount.split};localStorage.setItem("pay_later_data",JSON.stringify(t)),setTimeout(function(){window.location.href="/customer/order-status/"+o.parent_order_id+"#"+o.order_id},300)}"track"==d&&(fn.msite.trackReload(),setTimeout(function(){window.location.href="/customer/order-status/"+o.parent_order_id+"#"+o.order_id},300)),"view"==d&&setTimeout(function(){window.location.href="/customer/order-status/"+o.parent_order_id+"#"+o.order_id},300)}),$(".footer .pay-section").on("click",function(){localStorage.setItem("Pay_later",!0),localStorage.setItem("payable-amount",o.amount.total);var t={shipment_amt:o.amount.total,shipment_id:o.order_id,parent_order_id:o.parent_order_id,order_charges:o.amount.split};localStorage.setItem("pay_later_data",JSON.stringify(t)),clevertap.event.push("Track_Pay_Order",{Source:"Track",Screen:"Home"}),ga("send",{hitType:"event",eventCategory:"Track",eventAction:"Track_Pay_Order",eventLabel:""}),setTimeout(function(){window.location.href="/customer/payments"},300)}),null!=s.data&&setTimeout(function(){fn.msite.getActiveOrder()},1e3*o.track_refresh_interval)}else $(".active-order-wrapper").removeClass("show"),fn.msite.home.getReviewRating("Home page");fn.msite.getAllDOMImages()})})}},productDetails:{getStockText:function(t,a){var s=1>t.stock_units,i="";t.hasOwnProperty("next_available_by")&&null!==t.next_available_by&&""!==t.next_available_by&&(i=t.next_available_by),msg_text=s?fn.validateCookieForProduct(a)?"<div class=\"stock_text stock_text_green\">When product is available, you will be notified</div>":"<div class=\"stock_text stock_text_red\">"+i+"</div>":t.slot_available&&2==t.slot_available&&""!==t.slot_custom_message?"<div class=\"stock_text stock_text_red\">"+t.slot_custom_message+"</div>":"<img class = \"scooter_img\" src = \"/images/Scooter_express.png\"><div class=\"stock_text\">"+i+"</div>";var o="";return o+="<div class = \"stock_details\"><div class= \"stock_content\">"+msg_text+"</div></div>",""===i?"":o},getUpdatedStockText:function(t,a){a.hasOwnProperty("next_available_by")&&null!==a.next_available_by&&""!==a.next_available_by&&t.find(".stock_text").html(a.next_available_by)},getSingleProductTile:function(t,a){return 1==t.length?t:$(document).find("."+a).parent().find(".stock_content")},getRecipeDetails:function(){fn.ajaxForm({recipe_id:$(".recipe_id").val()},"POST","/get-recipe-details").done(function(t){if(t=JSON.parse(t),"success"==t.status){var a="";$.map(t.recipe.Images,function(t){a="<img data-src=\""+t+"\" class=\"recipe-images\">"}),$(".recipes-img-wrapper").html(a);var s="";$.map(t.recipe.ingredients,function(t){s=s+"<li><div class=\"list-name\">"+t.ingredients_name+"</div><div class=\"weight\">"+t.ingredients_qty+" "+t.ingredients_measurement+"</div></li>"});var i="";"Breakfast"==t.recipe.category&&(i="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/Breakfast-3.png"),"Lunch"==t.recipe.category&&(i="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/lunch-3.png"),"Dinner"==t.recipe.category&&(i="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/dinner-3.png"),"snacks"==t.recipe.category&&(i="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/snack-3.png"),$(".recipe-process .attribute .food1 img").attr("src",i),$(".recipe-process .attribute .food1 img").attr("data-src",i),$(".Ingredients ul").html(s),$(".recipe-name").html(t.recipe.title),$(".recipe-info").html(t.recipe.description);var o=t.recipe.recipe_method.replace(/\n/g,"<br />");$(".method-list p").html(o),$(".lunch").html(t.recipe.category),$(".time").html(t.recipe.prepTime);var d="Serves:"+t.recipe.serves+"";$(".serves").html(d),fn.msite.getAllDOMImages()}})},getPDPDetails:function(t){var a=$(".productrecipes"),s=$(".productrecipes1");s.html("  <div class=\"ways\"></div>\n      <div class=\"property list-item swiper-container\">\n      <ul class=\"category-list-ul swiper-wrapper\">\n      </ul>\n    </div>"),fn.ajaxForm({},"get","/productDetail/"+t).done(function(t){if(t=JSON.parse(t),"success"==t.status&&t.data&&!!t.data.branding){var i=t.data.branding;i.sort(fn.productDetails.compareData);var o=0,d=$(".pro-detail").find(".wrapper"),r=$(".branding-image-container .image");d.html(""),r.html(""),$(".history-detail .list").html(""),$(".history-detail .sub-head").html(""),$(".source-detail").html(""),$(".Ingredients-list").html(""),$(".facts-detail").html(""),$.map(i,function(t,a){1!=t.status||(o++,d.append("<span class=\"history content-"+a+"\" data-id=\""+t.id+"\" data-url=\""+t.mobile_image_url+"\" data-title=\"ProductDetailPage - "+t.title+"\" data-count=\""+o+"\">"+t.title+"</span>"),r.append("<img data-src="+t.mobile_image_url+" class=\"swiper-slide branding-image\">"),1==t.id&&($(".history-detail .sub-head").append(t.subtitle),$(".history-detail .list").append(fn.productDetails.renderWhatYouGet(t))),2==t.id&&$(".source-detail").append(t.content),3==t.id&&$.map(t.content,function(t,a){$(".Ingredients-list").append("<li><span class=\"attr_count\">"+(a+1)+"</span><span class=\"list\">"+t+"</span></li>")}),4==t.id&&$.map(t.content,function(t){$(".facts-detail .info").append("<li><div class=\"name\"><span>"+t.key+"</span></div><div class=\"weight\"><span>"+t.value+"</span></div></li>")}))});var n=r.find("img").eq(0);n=n.clone(),r.append(n.removeClass("branding-image")),$(".detail-discription").find(".viewport .method").css("width",$(".pro-detail").innerWidth());var c=!0,l=$(".history").eq(0);if(""!=t.data.branding&&$(window).on("scroll",function(){var t=a.offset().top;$(window).scrollTop()+$(window).height()-200>t&&c&&(fn.msite.home.GAEventOther("ProductDetailPage","Click - Impression",l.data("title")),c=!1)}),$(".history").on("click",function(){var t=$(this);0<$(".history.highlight").length&&fn.msite.home.GAEventOther("ProductDetailPage","Click - Impression",t.data("title")),t.parent().find(".history").removeClass("highlight"),t.addClass("highlight");var a=r.find(".reveal");a.css("z-index",2),r.find("img").eq(parseInt(t.data("count")-1)).addClass("reveal"),a.removeClass("reveal"),$(".viewport").css("height",$(".viewport").find(".desc-"+t.attr("data-id")).height()),$(".viewport").animate({scrollLeft:parseInt((t.attr("data-id")-1)*$(".pro-detail").innerWidth(),10)},550)}),$(".history").eq(0).trigger("click"),1==t.data.how_to_eat.status&&null!=t.data.how_to_eat.data&&0!=t.data.how_to_eat.data.length){$(".category-list-ul").html("<li class=\"category-list-li\"><div class=\"product-img\"><img data-src=\"\" class=\"img1\" style=\"width:100%;\"></div><div class=\"view\"><div class=\"pro-name\"></div><div class=\"pro-disc\"></div><div class=\"view-button\"><button class=\"view-btn\">View Recipe</button></div></div><div class=\"item-detail\"><ul class=\"itemdetail-list\"></ul></div></li>");var p=t.data.how_to_eat,m=t.data.how_to_eat.data;$(".view-button").hide(),$(".category-list-ul").find(".item-detail").css("display","block"),$(".category-list-ul").addClass("marinades-images"),$(".category-list-ul").removeClass("swiper-wrapper"),$(".food-ways .ways").html(p.title),$(".itemdetail-list").html(""),m.sort(fn.productDetails.compareData),$.map(m,function(t,a){var s="<li class=\"list1\" data-title=\""+t.title+"\" data-index=\""+a+"\"><img data-src=\""+t.image_url+"\" data-title=\""+t.title+"\" data-desc=\""+t.content+"\" src=\""+t.image_url+"\"></li>";$(".itemdetail-list").append(s)});var u=$(".list1").eq(0);u.addClass("active"),u.find("img").addClass("border");var _=u.find("img").data("title"),g=u.find("img").data("desc"),h=u.find("img").attr("src")?u.find("img").attr("src"):u.find("img").attr("data-src");$(".pro-name").text(_),$(".pro-disc").text(g),$(".product-img img").attr("src",h),$(".product-img img").attr("data-src",h);var v=!0,y=$(".list1").eq(0);$(window).on("scroll",function(){var t=y.offset().top;$(window).scrollTop()+$(window).height()>t&&v&&(fn.msite.home.GAEventOther($(".total-item-pipe .selected").data("name")+"PDP - Recipe","Impression",y.data("title")+"- Pos: 1"),v=!1)}),$(".list1").on("click",function(){var t=$(this);$(".list1").removeClass("active"),$(".list1 img").removeClass("border"),t.addClass("active"),t.find("img").addClass("border");var a=t.find("img").data("title"),s=t.find("img").data("desc"),i=t.find("img").attr("src");$(".pro-name").text(a),$(".pro-disc").text(s),$(".product-img img").attr("src",i),$(".product-img img").attr("data-src",i),fn.msite.home.GAEventOther($(".total-item-pipe .selected").data("name")+"PDP - Recipe","Impression",t.data("title")+"- Pos: "+parseInt(t.data("index")+1))}),$(".food-ways").show()}else $(".food-ways").hide();if(1==t.data.recipes.status){$(".food-ways").show();var f=t.data.recipes,b=$(".cat_name").val();$(".food-ways .ways").html(""),$(".food-ways .ways").append("Ways to enjoy your "+b),fn.productDetails.getPdpRecipeDetails(t.data.recipes.recipe_id)}fn.msite.getAllDOMImages()}else a.hide(),s.hide()}).fail(function(){a.hide(),s.hide()})},pushEEProductView:function(t,a){var s={},i={};try{var o=[],d=t.product_inventory.product_id,r=t.product_master.pr_name,n=t.product_pricing.base_price,c=t.product_master.gross;if(s={item_name:r,item_id:d,price:n,quantity:c,currency:"INR",index:0,item_category:a},o.push(s),i={price:n,event_name:"view_item",item_name:r,currency:"INR"},fn.msite.branchIO.addEvent("view_item",i),window.dataLayer){var l=window.dataLayer;l.push({event:"view_item",ecommerce:{click:{products:o}}})}}catch(t){fn.msite.branchIO.branchLogErr(t,i,"view_item - catch")}},comboChildDescription:function(t){var a=t.product_merchantdising.product_header_tags.split("|"),s=0,i="<div class=\"combo-item-property\">";$.map(a,function(t){t&&(s++,i+="<span class=\"cat-item\">"+t+"</span>")}),s||($(".combo-item-property").hide(),$(".combo-item-property").html("")),i+="</div>";var o=$(".combo-child-desc");attribute="<div class=\"combo-img\"><img data-src=\"".concat(t.product_merchantdising.pr_image,"\" class=\"image\"></div>"),attribute+="<div class=\"combo-image-info\">".concat(t.product_merchantdising.merchandise_name).concat(i," </div>"),o.html(attribute),o.show()},comboProductData:function(t,a,s){var i=$(".combo-products"),o=t[0].product_merchantdising;attribute="<div class=\"combo-name\">".concat(a,"</div><div class=\"short-description\">").concat(s,"</div>"),attribute+="<div class=\"items-selector\">",$.map(t,function(t,a){attribute+="<div class=\"items-bar ".concat(0==a?"selected-item":"","\" id=\"").concat(t.product_inventory.product_id,"\" index=\"").concat(a,"\">").concat(t.product_master.item_display_name,"</div>")}),attribute+="</div>",i.html(attribute),i.show(),fn.productDetails.comboChildDescription(t[0]),fn.productDetails.productDescription(o),fn.productDetails.getPDPDetails(t[0].product_inventory.product_id),$(".items-bar").on("click",function(a){a.preventDefault();var s=$(this);console.log(s.attr("index")),index=s.attr("index"),$(".items-bar").removeClass("selected-item"),s.addClass("selected-item"),o=t[index].product_merchantdising,fn.productDetails.comboChildDescription(t[index]),fn.productDetails.productDescription(o),fn.productDetails.getPDPDetails(t[index].product_inventory.product_id)})},productDescription:function(t){console.log(t.product_shortname);var s={};$(".cat-name").html(""),$(".discription").html(""),$(".cat-property").html(""),$(".cat-property").hide(),$(".total-contain").html(""),$(".cat-name").append(t.product_shortname),$(".discription").append(t.description);var i=t.product_header_tags.split("|");if(t.pdp_gross_wt&&(Object.assign(s,{"Gross Weight":t.pdp_gross_wt,"Net Weight":t.pdp_net_wt,Serves:t.serves,Pieces:t.no_of_piceces}),attributes1="<div class=\"attr-wrap\"><div class=\"contain left-side2\"><div class=\"left-attr\"><span class=\"image\"><img data-src=\""+t.pdp_pieces_img_url+"\" class=\"img\"></span><span class=\"left-title\">No. of pieces "+t.no_of_piceces+"</span></div><div class=\"right-attr\"><span class=\"image\"><img data-src=\""+t.pdp_serves_img_url+"\"  class=\"img\"></span><span class=\"right-title\">Serves "+t.serves+"</span></div></div><div class=\"contain vector right-side2\"><div class=\"left-attr\"><span class=\"image\"><img data-src=\""+t.gross_wt_img_pdp+"\" class=\"img\"></span><span class=\"left-title\">Gross wt. "+t.pdp_gross_wt+"</span></div><div class=\"right-attr\"><span class=\"image\"><img data-src=\""+t.net_wt_img_pdp+"\" class=\"img\"></span><span class=\"right-title\">Net wt. "+t.pdp_net_wt+"</span></div></div></div>",$(".total-contain").html(attributes1)),t.cooking_time&&(Object.assign(s,{"Net Weight":t.pdp_net_wt,Pieces:t.no_of_piceces,Serves:t.serves}),attributes2="<div class=\"attr-wrap\"><div class=\"contain left-side1\"><div class=\"left-attr\"><span class=\"image\"><img data-src=\""+t.pdp_pieces_img_url+"\" class=\"img\"></span><span class=\"left-title\">No. of pieces "+t.no_of_piceces+"</span></div><div class=\"right-attr\"><span class=\"image\"><img data-src=\""+t.pdp_serves_img_url+"\" class=\"img\"></span><span class=\"right-title\">Serves "+t.serves+"</span></div></div><div class=\"contain right-side1\"><div class=\"left-attr\"><p class=\"image\" style=\"display:inline-block;width:16%;\"><img data-src=\""+t.pdp_cooktime_img_url+"\" class=\"img\"></p><p class=\"left-title\" style=\"display:inline-block;width:74%;vertical-align:middle;line-height:1;\">Cooking time "+t.cooking_time+"</p></div><div class=\"right-attr\"><span class=\"image\"><img data-src=\""+t.net_wt_img_pdp+"\"  class=\"img\"></span><span class=\"right-title\">Net wt. "+t.pdp_net_wt+"</span></div></div></div>",$(".total-contain").html(attributes2)),t.best_before){var o="",d="";t.pdp_net_wt&&(o="Net wt. "+t.pdp_net_wt,d=t.net_wt_img_pdp,Object.assign(s,{"Net Weight":t.pdp_net_wt})),t.no_of_piceces&&(o="No. of pieces "+t.no_of_piceces,d=t.pdp_pieces_img_url,Object.assign(s,{Pieces:t.no_of_piceces}));var r="<div class=\"attr-wrap\"><div class=\"contain1\"><div class=\"left-attr1\"><span class=\"image\"><img data-src=\""+t.pdp_bestbefore_img_url+"\" class=\"img\"></span><span class=\"left-title\">Best Before: "+t.best_before+"</span></div><div class=\"right-attr1\"><span class=\"image\"><img data-src=\""+d+"\" style=\"width:20px;\" class=\"img\"></span><span class=\"right-title\">"+o+"</span></div></div> </div>";$(".total-contain").html(r)}if(!t.best_before&&!t.cooking_time&&!t.pdp_gross_wt&&t.pdp_net_wt&&t.no_of_piceces){Object.assign(s,{"Net Weight":t.pdp_net_wt,Pieces:t.no_of_piceces});var r="<div class=\"attr-wrap\"><div class=\"contain1\"><div class=\"left-attr1\"><span class=\"image\"><img data-src=\""+t.pdp_pieces_img_url+"\" class=\"img\"></span><span class=\"left-title\">No. of pieces "+t.no_of_piceces+"</span></div><div class=\"right-attr1\"><span class=\"image\"><img data-src=\""+t.net_wt_img_pdp+"\" style=\"width:20px;\" class=\"img\"></span><span class=\"right-title\">Net wt. "+t.pdp_net_wt+"</span></div></div> </div>";$(".total-contain").html(r)}var n=t.created_at.replace(" ","T"),c=n.split(/[^0-9]/),a=new Date().getTime()-new Date(c[0],c[1]-1,c[2],c[3],c[4],c[5]).getTime(),l=Math.ceil(a/86400000),p=$(".cat-title");10>l&&(p.html("New"),p.show())},getProductData:function(t){fn.msite.showloader();var a=$(".detaildis");fn.ajaxForm({},"get","/productDetailData/"+t).done(function(s){s=JSON.parse(s);var i={category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""};if(fn.msite.hideloader(),fn.productDetails.getOffersDetails(t,s.data.product_pricing),"success"==s.status){var o=s.data.product_inventory,d=s.data.product_merchantdising,r=s.data.product_master,n=s.data.product_pricing,c=s.data.child_products,l="/"+$(".cat_name").val()+"/"+$(".product_name").val(),p=$(".clicked.selected").data("name");$(".product-breadcrumb .third").html(d.product_shortname),$(".product-breadcrumb .second").html($(".cat_name").val().charAt(0).toUpperCase()+$(".cat_name").val().slice(1)),$(".product-breadcrumb .second").attr("href","/".concat($(".cat_name").val())),$(".product-cart .product-name").append(d.product_shortname);var m="";1>s.data.product_inventory.stock_units?(m=fn.validateCookieForProduct(s.data.product_master.product_id)?"<div class= \"notify-btn-container\"><button class=\"notify-btn notify-border-red\" data-pr_id = \""+s.data.product_master.product_id+"\"><span><image class=\"image_notified\" src=\"/images/red-tick.svg\">NOTIFY ME</span></button></div>":"<div class= \"notify-btn-container\"><button class=\"notify-btn\" data_cat = \""+p+"\" data_img = \""+d.pdp_pieces_img_url+"\" data-pr_id = \""+s.data.product_master.product_id+"\"><span><image class=\"image\"src=\"/images/notify-icon2.png\">NOTIFY ME</span></button></div>",$(".footer").append(fn.productDetails.getStockText(s.data.product_inventory,s.data.product_master.product_id))):2==s.data.product_inventory.slot_available?(fn.refreshCookie(s.data.product_master.product_id),m="<div class=\"cart-button-disabled\" data-module = \"Product Listing - "+p+" \"><div><button class=\"addcartbtndisabled\">ADD TO CART</button></div></div> <div class=\"item-count\" data-pr_id = \""+s.data.product_master.product_id+"\" data-stock = \""+s.data.product_inventory.stock_units+"\" data-pr_id = \""+s.data.product_master.product_id+"\" data-count = \"0\"><span class=\"icon icon-minus-disabled\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus-disabled\"></span></div>",$(".footer").append(fn.productDetails.getStockText(s.data.product_inventory,s.data.product_master.product_id))):(fn.refreshCookie(s.data.product_master.product_id),m="<div class=\"cart-button\" data-module = \"Product Detail - "+p+" - "+d.product_shortname+" \"><button class=\"addcartbtn\">ADD TO CART</button></div> <div class=\"item-count\" data-pr_id = \""+s.data.product_master.product_id+"\" data-stock = \""+s.data.product_inventory.stock_units+"\" data-pr_id = \""+s.data.product_master.product_id+"\" data-count = \"0\"><span class=\"icon icon-minus\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus\"></span></div>"),$(".footer .right-side").append(m),$(".pdpcart").hide();var u=$(".right-side");u.addClass(s.data.product_master.product_id),u.children().find(".notify-btn").addClass("notify_".concat(s.data.product_master.product_id)),$(".category-wrap.detaildis .placeholder").remove();var _=fn.msite.discount(s.data.product_pricing),g=0<n.base_discount?"":"MRP: ";if($(".real-charge").append("<span style=\"font-size: 14px;\">"+g+"</span>&#8377;"+_+"/-"),0==s.data.child_products.length){var h=s.data.product_merchantdising.product_id;$(".cat-name").append(d.product_shortname),$(".discription").append(d.description);var v=d.product_header_tags.split("|"),y=0;if($.map(v,function(t){t&&(y++,$(".cat-property").append("<span class=\"cat-item\">"+t+"</span>"))}),s.data.product_videos.length&&($(".cat-ppt-video-container").append("<div class=\"video-link\" video-url=\"".concat(s.data.product_videos[0].video_link,"\" product_id=\"").concat(s.data.product_master.product_id,"\"><img data-src=\"/images/feather-play-circle@3x.png\" class=\"video-link-img\"><span class=\"How-to-cook\">How to cook</span></div>")),$(".video-link").on("click",function(t){t.preventDefault(),url=$(this).attr("video-url");var a={product_id:$(this).attr("product_id"),user_identifier:$(".customer_key_value").val(),city_name:fn.cityName,category_name:$(".cat_name").val(),page:"product_page",hub_id:+fn.hubId};clevertap.event.push("screencat_cookingvideo",a),fn.msite.playvideo(url)})),y||($(".cat-property").hide(),$(".cat-property").html(""),$(".video-link").css("width","100%")),d.pdp_gross_wt&&(attributes1="<div class=\"attr-wrap\"><div class=\"contain left-side2\"><div class=\"left-attr\"><span class=\"image\"><img data-src=\""+d.pdp_pieces_img_url+"\" class=\"img\" alt=\""+d.product_shortname+"\" title=\""+d.product_shortname+"\"></span><span class=\"left-title\">No. of pieces "+d.no_of_piceces+"</span></div><div class=\"right-attr\"><span class=\"image\"><img data-src=\""+d.pdp_serves_img_url+"\"  class=\"img\"></span><span class=\"right-title\">Serves "+d.serves+"</span></div></div><div class=\"contain vector right-side2\"><div class=\"left-attr\"><span class=\"image\"><img data-src=\""+d.gross_wt_img_pdp+"\" class=\"img\"></span><span class=\"left-title\">Gross wt. "+d.pdp_gross_wt+"</span></div><div class=\"right-attr\"><span class=\"image\"><img data-src=\""+d.net_wt_img_pdp+"\" class=\"img\"></span><span class=\"right-title\">Net wt. "+d.pdp_net_wt+"</span></div></div></div>",$(".total-contain").html(attributes1)),d.cooking_time&&(attributes2="<div class=\"attr-wrap\"><div class=\"contain left-side1\"><div class=\"left-attr\"><span class=\"image\"><img data-src=\""+d.pdp_pieces_img_url+"\" class=\"img\"></span><span class=\"left-title\">No. of pieces "+d.no_of_piceces+"</span></div><div class=\"right-attr\"><span class=\"image\"><img data-src=\""+d.pdp_serves_img_url+"\" class=\"img\"></span><span class=\"right-title\">Serves "+d.serves+"</span></div></div><div class=\"contain right-side1\"><div class=\"left-attr\"><p class=\"image\" style=\"display:inline-block;width:16%;\"><img data-src=\""+d.pdp_cooktime_img_url+"\" class=\"img\"></p><p class=\"left-title\" style=\"display:inline-block;width:74%;vertical-align:middle;line-height:1;\">Cooking time "+d.cooking_time+"</p></div><div class=\"right-attr\"><span class=\"image\"><img data-src=\""+d.net_wt_img_pdp+"\"  class=\"img\"></span><span class=\"right-title\">Net wt. "+d.pdp_net_wt+"</span></div></div></div>",$(".total-contain").html(attributes2)),d.best_before){var f="",b="";d.pdp_net_wt&&(f="Net wt. "+d.pdp_net_wt,b=d.net_wt_img_pdp),d.no_of_piceces&&(f="No. of pieces "+d.no_of_piceces,b=d.pdp_pieces_img_url);var w="<div class=\"attr-wrap\"><div class=\"contain1\"><div class=\"left-attr1\"><span class=\"image\"><img data-src=\""+d.pdp_bestbefore_img_url+"\" class=\"img\"></span><span class=\"left-title\">Best Before: "+d.best_before+"</span></div><div class=\"right-attr1\"><span class=\"image\"><img data-src=\""+b+"\" style=\"width:20px;\" class=\"img\"></span><span class=\"right-title\">"+f+"</span></div></div> </div>";$(".total-contain").html(w)}if(!d.best_before&&!d.cooking_time&&!d.pdp_gross_wt&&d.pdp_net_wt&&d.no_of_piceces){var w="<div class=\"attr-wrap\"><div class=\"contain1\"><div class=\"left-attr1\"><span class=\"image\"><img data-src=\""+d.pdp_pieces_img_url+"\" class=\"img\"></span><span class=\"left-title\">No. of pieces "+d.no_of_piceces+"</span></div><div class=\"right-attr1\"><span class=\"image\"><img data-src=\""+d.net_wt_img_pdp+"\" style=\"width:20px;\" class=\"img\"></span><span class=\"right-title\">Net wt. "+d.pdp_net_wt+"</span></div></div> </div>";$(".total-contain").html(w)}var C=d.created_at.replace(" ","T"),k=C.split(/[^0-9]/),a=new Date().getTime()-new Date(k[0],k[1]-1,k[2],k[3],k[4],k[5]).getTime(),x=Math.ceil(a/86400000),P=$(".cat-title");10>x&&(P.html("New"),P.show()),fn.productDetails.getPDPDetails(h)}else fn.productDetails.comboProductData(c,d.merchandise_name,d.usp_desc);var I=0;if($(".banners .placeholder").remove(),$.map(s.data.product_merchantdising.images,function(t,a){t&&($(".main-banner").append("<img data-src=\""+t+"\"  class=\"img-responsive imgbanner swiper-slide\" data-index = \""+a+"\" title=\""+s.data.product_merchantdising.product_shortname+"\" alt=\""+s.data.product_merchantdising.product_shortname+"\">"),I++)}),1==I&&ga("send",{hitType:"event",eventCategory:$(".clicked.selected").data("name")+"ProductView",eventAction:"Impression",eventLabel:"1Picture"}),I?$(".banners").swiper({mode:"horizontal",autoplay:!!(1<I)&&3e3,loop:!!(1<I),autoplayDisableOnInteraction:!1,pagination:1<I?".swiper-pagination":"",autoHeight:!0,roundLengths:!0,onInit:function(t){$(document).on("scroll",function(){$(document).scrollTop()<$(".banners").offset().top-50?t.startAutoplay():t.stopAutoplay()}),$(".loc-pop-cont").hasClass("show")?fn.msite.home.hoverBanner(t,!1):fn.msite.home.hoverBanner(t,!0)},onSlideChangeEnd:function(t){$(document).scrollTop()<$(".banners").offset().top-20||t.stopAutoplay();var a=$(".clicked.selected").data("name");ga("send",{hitType:"event",eventCategory:a+"ProductView",eventAction:"Impression",eventLabel:t.realIndex+1+"Picture"})}}):($(".banner").html(""),$(".banner").hide()),fn.productDetails.productViewedCache(t,r.pr_name,l),fn.msite.home.updateProductcount(s.data.product_inventory,s.data.product_master.product_id),fn.msite.home.addToCart(u,"PDP"),fn.msite.home.removeCart(u,"PDP"),s.data){var S=$(".total-item-pipe .selected").attr("data-catid");fn.productDetails.pushEEProductView(s.data,S)}}$(".notify-btn").on("click",function(t){t.preventDefault();var a=$(this),s=a.parent().parent().parent(),o="true"!==$(".contact-form-pop-up").attr("logged_in"),d=a.attr("data-pr_id");i.price=a.attr("data_price"),i.product_id=d,i.product_name=a.attr("data_name"),i.product_image_url=a.attr("data_img"),i.category_name=a.attr("data_cat"),i.discount=a.attr("data_discount"),i.product_url=window.location.href,fn.populateNotifyMeData(i),localStorage.setItem("loyalty_pr_id",d),console.log({hi:"hi"}),"true"===$(".contact-form-pop-up").attr("logged_in")?fn.getNotified(o,a,s):($(".contact-form-pop-up").addClass("show"),fn.noScroll())})}).fail(function(){fn.msite.hideloader(),a.hide(),a.html("")})},getOffersDetails:function(t,a){fn.ajaxForm({},"get","/OffersDetails/"+t).done(function(t){if(t=JSON.parse(t),"success"==t.status){1==t.data.todays_deal.status?($(".discount-tag").addClass("show"),$(".timer").css("display","inline-block"),fn.msite.home.reverseTimer(t.data.todays_deal.end_time)):$(".discount-tag").removeClass("show");var s=$(".cat-title");1==t.data.bestseller.status&&"New"!=s.html()&&(s.html("BestSeller"),s.show()),0<a.base_discount?($(".Discount").append(a.base_discount+"% Off"),$(".deduct-charge").css("text-decoration","none"),$(".deduct-charge").append("MRP: <span style=\"text-decoration: line-through;\"> &#8377;"+a.base_price+"/-</span>"),$(".discount-charge").append(" "+(a.rounded_base_discount||Math.floor(a.base_discount))+"% Off")):($(".discount-tag").removeClass("show"),$(".deduct-charge").hide())}})},getProductRecommendation:function(t){if(this.PDPRecommendationCount=(+this.PDPRecommendationCount||0)+1,t&&(this.PDPRecommendationProdId=t),!(2>this.PDPRecommendationCount)){var a={category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""},s=$(".cat_id").val(),i=$(".youmaylike"),o=$(".pdp-youmaylike"),d=this.PDPRecommendationProdId;fn.ajaxForm({product_id:d,cat_id:s},"POST","/productRecommendation").done(function(t){if(t=JSON.parse(t),"success"==t.status){var s="",d=$(".cat_name").val();$.map(t.data,function(a,i){try{var o="",r=fn.msite.discount(a.product_pricing),n=r==a.product_pricing.base_price?"MRP: ":"",c=a.product_merchantdising.merchandise_name,l="";l=80<c.length?"<div class=\"item-discription long-text\" data-itemname = \"".concat(c,"\">").concat(c.substring(0,77)," ... <img src=\"/images/ellipses@2x.png\" class=\"ellipses\"></div>"):"<div class=\"item-discription\" data-itemname = \"".concat(c,"\">").concat(c,"</div>"),o=""==a.product_master.pieces?-1===a.product_master.gross.search(/gm/i)&&-1===a.product_master.gross.search(/kg/i)?"<span class=\"item-pieces\">Pieces: "+a.product_master.gross+"</span><span class=\"item-weight\">Net: "+a.product_master.pr_weight+"</span><span class=\"item-status\">"+(a.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item-pieces\">Gross: "+a.product_master.gross+"</span><span class=\"item-weight\">Net: "+a.product_master.pr_weight+"</span><span class=\"item-status\">"+(a.product_merchantdising.wt_msg||"")+"</span>":"<span class=\"item\">"+a.product_master.pieces+" Pieces </span>",1==a.product_merchantdising.is_combo&&(o="");var p="";1>a.product_inventory.stock_units?fn.validateCookieForProduct(a.product_master.product_id)?p="<div class= \"notify-btn-container\"><button class=\"notify-btn notify-border-red\" data-pr_id = \""+a.product_master.product_id+"\"><span><image class=\"image_notified\" data-src=\"/images/red-tick.svg\">NOTIFY ME</span></button></div>":p="<div class= \"notify-btn-container\"><button class=\"notify-btn\" data_name = \""+a.product_merchantdising.merchandise_name+"\" data_cat = \""+cat_name?cat_name:"\" data_img = \""+a.product_merchantdising.pr_image+"\" data_discount = \""+a.product_pricing.base_discount+"\"  data_price = \""+a.product_pricing.base_price+"\" data-pr_id = \""+a.product_master.product_id+"\"><span><image class=\"image\"src=\"/images/notify-icon2.png\">NOTIFY ME</span></button></div>":2==a.product_inventory.slot_available?(fn.refreshCookie(a.product_master.product_id),p="<div class=\"cart-button\" data-module=\""+t.title+"\"><div><button class=\"addcartbtn addcartbtndisabled disabled\">ADD TO CART</button></div></div>     <div class=\"item-count\" data-pr_id = \""+a.product_master.product_id+"\" data-stock = \""+a.product_inventory.stock_units+"\" data-pr_id = \""+a.product_master.product_id+"\" data-count = \"0\" data-index = \""+i+"\"><span class=\"icon icon-minus-disabled\" data-module=\""+t.title+"\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus-disabled\"></span></div>   </div>"):(fn.refreshCookie(a.product_master.product_id),p="<div class=\"cart-button\" data-module=\""+t.title+"\"><button class=\"addcartbtn\">ADD TO CART</button></div>     <div class=\"item-count\" data-pr_id = \""+a.product_master.product_id+"\" data-stock = \""+a.product_inventory.stock_units+"\" data-pr_id = \""+a.product_master.product_id+"\" data-count = \"0\" data-index = \""+i+"\"><span class=\"icon icon-minus\" data-module=\""+t.title+"\"></span><span class=\"item-number\">11</span><span class=\"icon icon-plus\"></span></div>   </div>"),s=s+"<li class = \""+a.product_master.product_id+" swiper-slide\" data-name = \""+a.product_merchantdising.merchandise_name+"\" data-index = \""+i+"\"><a href=\"/"+d+"/"+a.product_master.slug+"\">  <div class=\"image-holder\"><img class=\"deal-images\" data-src=\""+a.product_merchantdising.pr_image+"\" alt=\""+a.product_merchantdising.product_shortname+"\" title=\""+a.product_merchantdising.product_shortname+"\">    <div class=\"item-overelay\">     <div class=\"close-overlay-images\"><img data-src=\"/images/close-info.png\" class=\"overlay-close-image\"></div>     <p class=\"item-basic-detail\"> "+a.product_merchantdising.msite_desc+" </p>   </div>  </div>  <div class=\"itemDetail\">"+l+"<div class=\"short-description\">"+a.product_merchantdising.usp_desc+"</div>   <p class=\"item-quantity\">"+o+"   </p>   <div class=\"item-value\">    <div class=\"item-price\"><span class=\"real-price\"><span style=\"font-size: 14px;\">"+n+"</span>&#8377; "+r+"</span>"+(r==a.product_pricing.base_price?"":"<span class=\"deduct-price\" style=\"text-decoration: none;\">MRP: </span><span class=\"deduct-price\" style=\"margin: 0;\"> &#8377;"+a.product_pricing.base_price+"</span><span class=\"discount-bottom\">"+(a.product_pricing.rounded_base_discount||Math.floor(a.product_pricing.base_discount))+"% Off </span>")+"</div>"+p+"  </div></a>"+fn.productDetails.getStockText(a.product_inventory,a.product_master.product_id),"</li>"}catch(t){}});var r="         <div class=\"today-items\" style=\"padding:10px 0px;\">         <span class=\"today-deal\">"+t.title+"</span>      </div>      <div class=\"list-item swiper-container \"><ul class=\"item-total-list swiper-wrapper\" data-name=\""+t.title+"\">"+s+"    </ul></div>";if(i.attr("data-title",$(".total-item-pipe .selected").data("name")+"CategoryPDP"+t.title),s){i.html(r),i.data("ct",0),i.data("len",t.data.length),fn.msite.home.updateProductcount(),fn.msite.home.addToCart(i,"Home"),fn.msite.home.removeCart(i,"Home"),fn.msite.home.showdDesc(i),fn.msite.home.swiper(i);var n=i.find("ul li").eq(0),c={youmaylike:0};$(window).on("scroll",function(){divposition=i.position().top,$(window).scrollTop()+$(window).height()-200>divposition&&0==c.youmaylike&&(fn.msite.home.GAEventOther($(".total-item-pipe .selected").data("name")+"CategoryPDP - "+t.title,"Impression",n.data("name")+"- Pos: "+parseInt(n.data("index")+1)),c.youmaylike=1)}),i.find(".list-item li a").on("click",function(a){a.preventDefault();var s=$(this),i=$(this).parents(".swiper-slide-active");fn.msite.home.GAEventOther($(".total-item-pipe .selected").data("name")+"CategoryPDP - "+t.title,"Click",i.data("name")+"- Pos: "+parseInt(i.data("index")+1)),window.location.href=s.attr("href")})}else o.hide(),o.html("");fn.msite.getAllDOMImages()}else o.hide(),o.html("");$(".item-discription").on("click",function(t){i=$(this),i.hasClass("long-text")&&(t.preventDefault(),t.stopImmediatePropagation(),i.removeClass("long-text"),i.html(""),i.html(i.data("itemname")))}),$(".notify-btn").on("click",function(t){t.preventDefault();var s=$(this),i=s.parent().parent().parent().parent().parent(),o="true"!==$(".contact-form-pop-up").attr("logged_in"),d=s.attr("data-pr_id");localStorage.setItem("loyalty_pr_id",d),a.price=s.attr("data_price"),a.product_id=d,a.product_name=s.attr("data_name"),a.product_image_url=s.attr("data_img"),a.category_name=s.attr("data_cat"),a.discount=s.attr("data_discount"),a.product_url=window.location.href,fn.populateNotifyMeData(a),"true"===$(".contact-form-pop-up").attr("logged_in")?fn.getNotified(o,s,i):($(".contact-form-pop-up").addClass("show"),fn.noScroll())})}).fail(function(){o.hide(),o.html("")})}},getProductID:function(t){$(".product_id").val(t),fn.productDetails.getProductData(t),fn.productDetails.getProductRecommendation(t),fn.msite.home.getTestimonials("PDP")},getPdpRecipeDetails:function(t){fn.ajaxForm({recipies:t},"post","/GetPdpRecipe").done(function(t){if(t=JSON.parse(t),"success"==t.status){$(".category-list-ul").html(""),$.map(t.data,function(t,a){var s="<li class=\"category-list-li swiper-slide\" data-name=\""+t.title+"\" data-index=\""+a+"\"><div class=\"product-img\"><img data-src=\""+t.Images+"\" alt=\""+t.title+"\" title=\""+t.title+"\" class=\"img1\" style=\"width:100%;\"></div><div class=\"view\"><div class=\"pro-name\">"+t.title+"</div><div class=\"pro-disc\">"+t.description+"</div><a href=\"/recipe/"+t.id+"\" class=\"view-button\" data-title=\""+t.title+"\" data-index =\""+a+"\"><button class=\"view-btn\" data-id = \""+t.id+"\">View Recipe</button></a></div></li>";$(".category-list-ul").append(s)}),$(".food-ways").attr("data-title",$(".total-item-pipe .selected").data("name")+"PDP - Recipe");var a=$(".food-ways").find("ul li").eq(0),s=!0;$(window).on("scroll",function(){var t=a.offset().top;$(window).scrollTop()+$(window).height()>t&&s&&(fn.msite.home.GAEventOther($(".total-item-pipe .selected").data("name")+"PDP - Recipe","Impression",a.data("name")+"- Pos: "+parseInt(a.data("index")+1)),s=!1)}),fn.msite.home.swiper($(".food-ways")),$(".view-button").on("click",function(t){t.preventDefault();var a=$(this);fn.msite.home.GAEventOther($(".total-item-pipe .selected").data("name")+"PDP - Recipe","Click",a.data("title")+"- Pos: "+parseInt(a.data("index")+1)),window.location.href=a.attr("href")}),fn.msite.getAllDOMImages()}})},productViewedCache:function(t,a,s){fn.ajaxForm({pr_id:t,pr_name:a,pr_slug:s},"POST","/productviewedcache").done(function(t){t=JSON.parse(t)})},renderWhatYouGet:function(t){var a="";return $.map(t.proscons,function(t){var s="";!0==t.type&&(s="<li><p class=\"right-wrong\"><img data-src=\"/images/yes.png\"></p><p class=\"list-text\">"+t.key+"</p></li>"),!1==t.type&&(s="<li><p class=\"right-wrong\"><img data-src=\"/images/no.png\"></p><p class=\"list-text\">"+t.key+"</p></li>"),a+=s}),a},compareData:function(t,a){return t.order<a.order?-1:t.order>a.order?1:0}}},fn.msite.setToken(),fn.msite.setCustomer(),search={productClicked:!1,textUpdate:!1,isLoggedIn:"true"==fn.getLoginStatus(),page_no:1,isScroll:!1,end_of_scroll:!1,initSearch:function(t,a){return!!t.is("input:text")&&void(!a,search.searchTextElem=t,search.endPoint=a,search.searchList=$("<div class=\"search-list-container\" style = \"display:none;position:relative\"><ul class=\"search-list\">Explore by category</ul></div>").appendTo("body"),search.scrollEventListener(),search.keyboardEventListener())},displayCSSProps:function(){return{position:"absolute",display:"block",top:parseInt(search.searchTextElem.height()+search.searchTextElem.position().top),left:parseInt(search.searchTextElem.position().left),width:parseInt(search.searchTextElem.width()),"max-height":"95%","overflow-x":"hidden","overflow-y":"scroll"}},hideCSSProps:function(){return{position:"relative",display:"none",height:"auto"}},bindBottomBar:function(t){$(".cart-item-bar").on("click",function(a){a.preventDefault(),a.stopImmediatePropagation(),t?window.location.href="/customer/cart":($(".login-container").addClass("show"),fn.noScroll())})},searchText:function(){return new Promise(function(t){var a=search.searchTextElem.val();if(0<a.length){search.callCount=search.callCount||0;var s=++search.callCount;search.ajaxRequest=fn.ajaxForm({string:a,pageNum:search.page_no},"GET",search.endPoint).done(function(i){try{var o=JSON.parse(i);if(t(o),o.status&&o.searchEntities&&o.searchEntities.length){var d="";if($.map(o.searchEntities,function(t,a){try{d+=search.productListElem(t,a)}catch(t){console.log(t)}}),!d||!search.searchTextElem.val().length||s<search.callCount)return;search.activeIndex=-1,search.totalCount=o.searchEntities.length;if(1==search.page_no){search.searchList.find("ul").html("<div class=\"loader\"><span></span></div>"+d+"<div class=\"cart-item-bar\">\n                                          <div style=\"color:white\" class = \"cart\" data-name=\"Cart\">\n                                            <div>\n                                              <div class=\"cart-left\">\n                                                <span class=\"numbers-item\">0</span>\n                                                <span class=\"items-display\">Items</span>\n                                              </div>\n                                              <div class=\"cart-right\">checkout<img data-src=\"/images/right-arrow.png\" class=\"cart-arrow-image\"></div>\n                                            </div>\n                                          </div>\n                                        </div>"+"<div class=\"add_message\">\n                                      <img data-src=\"https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png\" alt=\"Info\">\n                                      <span>&times;</span>\n                                    </div>"),$(".search-list-container").scrollTop(0);var r=fn.msite.getSearchPayload();r.search_string=a,r.no_of_results=o.numOfRecords+""||"0",fn.msite.sendAnalyticsData("search_triggered",_objectSpread({},r))}else search.searchList.find("ul").append(d);fn.msite.home.updateProductcount(),fn.loyalty_list="search_result";var n=$(".search-list-container");fn.msite.home.addToCart(n,"search"),fn.msite.home.removeCart(n,"search"),fn.msite.bindNotifyMeBtn(n),search.bindBottomBar(search.isLoggedIn),search.bindProductClickedEvent(n,o),search.searchList.css(search.displayCSSProps())}else if(search.end_of_scroll=!0,!search.isScroll){var c="<li class =\"search-list-product no-items\">\n                              <img data-src=\"/images/search_empty.png\" class=\"search-empty\" />\n                              <span class=\"unavailable-text1\">Oops, we couldn\u2019t find any search results</span>\n                              <span class=\"unavailable-text2\">Try refining your search or explore from the below suggestions</span>\n                              <div class=\"explore-by-placeholder\">".concat(unrelatedContentList,"</div>\n                            </li>");search.searchList.find("ul").html(c),fn.msite.getAllDOMImages(),search.searchList.css(search.displayCSSProps()),$(".search-list-container").scrollTop(0)}var l=search.searchTextElem;search.clearText(l),fn.msite.getAllDOMImages()}catch(t){console.log(t)}}).fail(function(){search.listClear()})}})},handlePagination:function(t){t!=null&&t.scrollHeight!=null&&t.scrollTop!=null&&t.offsetHeight!=null&&t.offsetHeight+t.scrollTop>=t.scrollHeight-1&&!search.end_of_scroll&&(search.page_no++,fn.msite.showloader(),search.isScroll=!0,$(window).unbind("scroll"),search.searchText().then(function(){fn.msite.hideloader(),$(window).on("scroll",function(){return throttle(search.handlePagination(),3e3)})}))},bindProductClickedEvent:function(t,a){var s=search.searchTextElem.val(),i=fn.msite.getSearchPayload();t.find(".search-list-product").on("click",function(t){t.stopImmediatePropagation();var o=$(this),d={product_name:o.attr("product_name"),product_id:o.attr("product_id"),search_string:s,item_position:o.attr("index"),no_of_results:a.numOfRecords+""||"0"};fn.msite.sendAnalyticsData("search_result_clicked",_objectSpread(_objectSpread({},i),d))})},clearText:function(t){t.next(".search-icon-class").on("click",function(a){a.preventDefault();var s=$(this);"true"==s.attr("clear")&&(search.listClear(),t.val(""),search.page_no=1,search.end_of_scroll=!1,search.isScroll=!1,s.attr("clear",!1),s.attr("src","/images/search-icon.png"),s.attr("data-src","/images/search-icon.png"),$(".search-type").focus())})},productListElem:function(t,a){var s=t.categoryDetails.slug,i=t.productInventory,o=i.stock_units,d=i.product_id,r=i.next_available_by,n=i.slot_available,c=i.slot_custom_message,l=i.product_delivery_type,p=t.productPricing,m=p.base_discount,u=p.base_price,_=0<o,g=2==n,h=_&&!n,v=fn.validateCookieForProduct(d),y=u-Math.round(u*m/100),f=t.uom.toLowerCase().includes("unit")||t.uom.toLowerCase().includes("piece")?"Pcs:".concat(t.productMerchantdising.no_of_piceces||t.pr_weight):t.pr_weight,b=t.productMerchantdising.is_combo,w=null!=l&&null!==l&&"EXPRESS"==l.toUpperCase();return a=10*(search.page_no-1)+a+1,"<li class=\"search-list-product".concat(h?"":" oos"," ").concat(d," \" data-slug = \"/").concat(s+"/"+t.item_slug,"\" product_name=\"").concat(t.merchandise_name,"\" product_id=\"").concat(d,"\" index=\"").concat(a,"\">\n              <a class=\"anchor\" href = '/").concat(s,"/").concat(t.item_slug,"'>\n                <div class=\"top_content\">\n                  <img class=\"image_view\" data-src=\"").concat(t.item_image,"\" />\n                  <div class=\"details_view\">\n                    <span class=\"product_name\">").concat(t.merchandise_name,"</span>\n                    <div class=\"bottom_details\">\n                      <span class=\"net_wt").concat(b?" combo":"","\">").concat(b?"COMBO":f,"</span>\n                      <span class=\"separator\">|</span>\n                      <span class=\"disc_price\">").concat("\u20B9"+y,"</span>\n                      <span class=\"actual_price\">").concat(u>y?"\u20B9".concat(u):"","</span>\n                      <img class=\"scooter").concat(h?"":" oos","\" data-src=\"/images/Scooter_").concat(w?"express":"scheduled",".png\" />\n                      ").concat(_?"<div class=\"cart-button".concat(g?" disabled":"","\" pr-name=\"").concat(t.merchandise_name,"\" data-module=\"search\">ADD TO CART</div>\n                      <div class=\"item-count\" data-stock=\"").concat(o,"\" data-pr_id=\"").concat(d,"\" data-count=\"0\" data-index=\"").concat(a,"\">\n                        <span class=\"icon icon-minus remove-one\"><img data-src=\"/images/minus.png\" class=\"placeholder\"></span>\n                        <span class=\"item-number total-count\">0</span>\n                        <span class=\"icon icon-plus add-one").concat(g?" disabled":"","\"><img data-src=\"/images/add-").concat(g?"disabled":"red",".png\" class=\"placeholder\"></span>\n                      </div>"):"<button class=\"notify-btn notify_".concat(d).concat(v?" notified":"","\" data-module=\"search\" data-pr_id=\"").concat(d,"\" data_name = \"").concat(t.merchandise_name,"\" data_cat = \"").concat(s,"\" data_img = \"").concat(t.item_image,"\" data_discount = \"",0,"\"  data_price = \"").concat(t.item_price,"\" data-pr_id = \"").concat(d,"\">\n                        <image class=\"image\" data-src=\"/images/").concat(v?"red-tick.svg":"notify-icon2.png","\">\n                        <span>NOTIFY ME</span>\n                      </button>"),"\n                    </div>\n                  </div>\n                </div>\n                ").concat(h?"":"<div class=\"oos-content".concat(v?" notified":" notify","\">\n                  ").concat(v?fn.getterLS("notified-msg")||"Once available, you will be notified":c||r||"Out of Stock","\n                </div>"),"\n              </a>\n            </li>")},listClear:function(){search.searchList.css(search.hideCSSProps()),search.searchList.find("ul").html("")},scrollEventListener:function(){search.searchList.on("scroll",function(t){t.stopImmediatePropagation(),search.handlePagination(this)})},keyboardEventListener:function(){elem=search.searchTextElem,elem.on("focus",function(){search.searchText()}),elem.on("keyup paste",function(){if(search.page_no=1,search.end_of_scroll=!1,search.isScroll=!1,clearTimeout(search.searchAjaxrequest),2>=search.searchTextElem.val().length)search.listClear(),elem.next(".search-icon-class").attr("src","/images/search-icon.png").attr("clear",!1);else{if(search.textUpdate)return;search.searchAjaxrequest=setTimeout(search.searchText,300),elem.next(".search-icon-class").attr("src","/images/search-cross-icon.png").attr("clear",!0)}}),elem.on("keydown",function(t){var a=t.which;if(search.textUpdate=!1,40==a)search.activeIndex=(search.activeIndex+1)%search.totalCount,search.textUpdate=!0;else if(38==a)search.activeIndex=(search.activeIndex-1)%search.totalCount,search.textUpdate=!0;else if(13==a);else if(8==a&&1>=search.searchTextElem.val().length)return search.searchTextElem.val(""),void search.listClear()})}};